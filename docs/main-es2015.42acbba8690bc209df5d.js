(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},mtpe:function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,(function(t){return e[t]}).bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=39)}([function(e,t,n){"use strict";t.__esModule=!0;var r,s,o,i=n(2);t.constants={DEFAULT_STORE:"cometchat",MSG_VER_PRE:"store-ver-pre",MSG_VER_POST:"store-ver-post"},t.DEFAULT_VALUES={ZERO:0,MSGS_LIMIT:30,MSGS_MAX_LIMIT:100,USERS_LIMIT:30,USERS_MAX_LIMIT:100,GROUPS_LIMIT:30,GROUPS_MAX_LIMIT:100,CONVERSATION_MAX_LIMIT:50,CALL_TIMEOUT:45,DEFAULT_MSG_ID:0,DEFAULT_MAX_TYPING_INDICATOR_LIMIT:5,REGION_DEFAULT:"eu",REGION_DEFAULT_EU:"eu",REGION_DEFAULT_US:"us",REGION_DEFAULT_IN:"in",REGION_DEFAULT_PRIVATE:"private"},(r=t.GroupType||(t.GroupType={})).Public="public",r.Private="private",r.Protected="protected",r.Password="password",t.GROUP_TYPE={PUBLIC:"public",PRIVATE:"private",PROTECTED:"password",PASSWORD:"password"},(s=t.GroupMemberScope||(t.GroupMemberScope={})).Admin="admin",s.Moderator="moderator",s.Member="member",t.GROUP_MEMBER_SCOPE={ADMIN:"admin",MODERATOR:"moderator",PARTICIPANT:"participant"},t.APPINFO={platform:"WEB",sdkVersion:"v2.0.5",apiVersion:"v2.0"},t.XMPP={host:"encke.cometchat.com",port:7443,ws_url:"/ws/",bind_url:"/http-bind/",deafult_password:"CometChat",PUBSUB_CHANNEL:"pubsub",jid_string:"[%s]%s@%s/%s",bare_jid_string:"[%s]%s@%s",username_string:"[%s]%s",muc_jid_string:"[%s]%s@%s.%s",pubsub_global_string:"[%s]global_presence",pubsub_default_string:"[%s]default",pubsub_role_string:"[%s]%s",xmpp_resource:"javascripts_"+(new Date).getTime(),CONVERSATION:{TYPE:{CHAT:"chat",GROUP_CHAT:"groupchat"}}},t.LOCAL_STORE={COMMON_STORE:"common_store",MESSAGE_LISTENERS_LIST:"message_listeners_list",USERS_STORE:"users_store",MESSAGES_STORE:"messages_store",KEYS_STORE:"keys_store",STORE_STRING:"%s:%s"},t.ResponseConstants={RESPONSE_KEYS:{KEY_DATA:"data",KEY_META:"meta",KEY_CURSOR:"cursor",KEY_ACTION:"action",KEY_MESSAGE:"message",KEY_ERROR:"error",KEY_ERROR_DETAILS:"details",KEY_ERROR_CODE:"code",KEY_ERROR_MESSAGE:"message",KEY_AUTH_TOKEN:"authToken",KEY_WS_CHANNEL:"wsChannel",KEY_IDENTITY:"identity",KEY_SERVICE:"identity",KEY_ENTITIES:"entities",KEY_ENTITITY:"entity",KEY_ENTITYTYPE:"entityType",KEY_ATTACHMENTS:"attachments",CODE_REQUEST_OK:200,CODE_BAD_REQUEST:401,UNREAD_UNDELIVERED_KEYS:{ENTITY:"entity",ENTITY_TYPE:"entityType",ENTITY_Id:"entityId",COUNT:"count"},GROUP_MEMBERS_RESPONSE:{SUCCESS:"success",ERROR:"error",MESSAGE:"message"},KEY_ENTITY_TYPE:{USER:"user",GROUP:"group"}}},t.DELIVERY_RECEIPTS={RECEIVER_ID:"receiverId",RECEIVER_TYPE:"type",RECIPIENT:"recipient",MESSAGE_ID:"messageId",RECEIVED:"delivered",DELIVERED_AT:"deliveredAt",ID:"id",TIME:"time",DELIVERED_TO_ME_AT:"deliveredToMeAt"},t.READ_RECEIPTS={RECEIVER_ID:"receiverId",RECEIVER_TYPE:"type",RECIPIENT:"recipient",MESSAGE_ID:"messageId",READ:"read",READ_AT:"readAt",ID:"id",TIME:"time",READ_BY_ME_AT:"readByMeAt"},t.MessageConstatnts={XMPP_KEYS:{FROM:"from",TO:"to",TYPE:"type",TYPE_USER:"chat",TYPE_GROUP:"groupchat"},TYPE:{TEXT:"text",MEDIA:"media",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file",CUSTOM:"custom"},CATEGORY:{MESSAGE:"message",ACTION:"action",CALL:"call",CUSTOM:"custom"},RECEIVER_TYPE:{USER:"user",GROUP:"group"},KEYS:{ATTATCHMENT:"attatchment",ATTATCHMENTS:"attachments",ACTION:"action",TYPE:"type",DATA:"data",ID:"id",MUID:"muid",SENDER:"sender",RECEIVER:"receiver",RECEIVER_ID:"receiverId",CATEGORY:"category",RECEIVER_TYPE:"receiverType",SENT_AT:"sentAt",STATUS:"status",TEXT:"text",URL:"url",METADATA:"metadata",RECEIPTS:"receipts",MY_RECEIPTS:"myReceipt",CUSTOM_DATA:"customData",CUSTOM_SUB_TYPE:"subType"},KNOWN_MEDIA_TYPE:{IMAGE:[],VIDEO:[],AUDIO:[],FILE:[]},PAGINATION:{AFFIX:{APPEND:"append",PREPEND:"prepend"},CURSOR_FILEDS:{ID:"id",SENT_AT:"sentAt"},CURSOR_AFFIX_DEFAULT:"prepend",CURSOR_FIELD_DEFAULT:"sentAt",KEYS:{PER_PAGE:"per_page",CURSOR_AFFIX:"cursorAffix",AFFIX:"affix",CURSOR_FIELD:"cursorField",CURSOR_VALUE:"cursorValue",UID:"uid",SENT_AT:"sentAt",ID:"id",CURRENT_PAGE:"page",UNREAD:"unread",UNDELIVERED:"undelivered",HIDE_MESSAGES_FROM_BLOCKED_USER:"hideMessagesFromBlockedUsers",SEARCH_KEY:"searchKey",ONLY_UPDATES:"onlyUpdates",UPDATED_AT:"updatedAt",CATEGORY:"category",TYPE:"type"}}},t.ATTACHMENTS_CONSTANTS={KEYS:{EXTENSION:"extension",MIME_TYPE:"mimeType",NAME:"name",SIZE:"size",URL:"url"}},(o=t.MessageCategory||(t.MessageCategory={})).ACTION="action",o.MESSAGE="message",o.CALL="call",o.CUSTOM="custom",t.TYPING_NOTIFICATION={RECEIVER_ID:"receiverId",RECEIVER_TYPE:"receiverType",META:"metadata",KEYS:{TYPING_NOTIFICATION:"typingNotification",TIMESTAMP:"timestamp"},ACTIONS:{STARTED:"started",ENDED:"ended"}},t.ActionConstatnts={ACTION_SUBJECTS:{ACTION_ON:"on",ACTION_BY:"by",ACTION_FOR:"for"},ACTION_ENTITY_TYPE:{GROUP_USER:"groupuser",USER:"user",GROUP:"group",MESSAGE:"message"},ACTION_KEYS:{ACTION_CREATED:"created",ACTION_UPDATED:"updated",ACTION_DELETED:"deleted",ENTITIES:"entities",ENTITY:"entity",ENTITY_TYPE:"entityType",TYPE_MEMBER_JOINED:"joined",TYPE_MEMBER_LEFT:"left",TYPE_MEMBER_KICKED:"kicked",TYPE_MEMBER_BANNED:"banned",TYPE_MEMBER_UNBANNED:"unbanned",TYPE_MEMBER_INVITED:"invited",TYPE_MEMBER_ADDED:"added",ACTION_SCOPE_CHANGED:"scopeChanged",ACTION_TYPE_USER:"user",ACTION_TYPE_GROUP:"group",ACTION_TYPE_GROUP_MEMBER:"groupMember",TYPE_MESSAGE_EDITED:"edited",TYPE_MESSAGE_DELETED:"deleted",ACTION_TYPE_CALL:"call",EXTRAS:"extras",SCOPE:"scope",NEW:"new",OLD:"old"},ActionMessages:{ACTION_GROUP_JOINED_MESSAGE:"%s joined",ACTION_GROUP_LEFT_MESSAGE:"%s left",ACTION_MEMBER_KICKED_MESSAGE:"%s kicked %s",ACTION_MEMBER_BANNED_MESSAGE:"%s banned %s",ACTION_MEMBER_UNBANNED_MESSAGE:"%s unbanned %s",ACTION_MEMBER_INVITED_MESSAGE:"%s banned %s",ACTION_MESSAGE_EDITED_MESSAGE:" Message Edited",ACTION_MESSAGE_DELETED_MESSAGE:"Message Deleted",ACTION_MEMBER_SCOPE_CHANGED:"%s made %s %s",ACTION_MEMBER_ADDED_TO_GROUP:"%s added %s"},ACTION_TYPE:{TYPE_MEMBER_JOINED:"joined",TYPE_MEMBER_LEFT:"left",TYPE_MEMBER_KICKED:"kicked",TYPE_MEMBER_BANNED:"banned",TYPE_MEMBER_UNBANNED:"unbanned",TYPE_MEMBER_INVITED:"invited",TYPE_MEMBER_SCOPE_CHANGED:"scopeChanged",TYPE_MESSAGE:"message",TYPE_MESSAGE_EDITED:"edited",TYPE_MESSAGE_DELETED:"deleted",TYPE_MEMBER_ADDED:"added"},ACTIONS:{MEMBER_JOINED:"joined",MEMBER_LEFT:"left",MEMBER_KICKED:"kicked",MEMBER_BANNED:"banned",MEMBER_UNBANNED:"unbanned",MEMBER_INVITED:"invited",MEMBER_SCOPE_CHANGED:"scopeChanged"}},t.BlockedUsersConstants={REQUEST_KEYS:{DIRECTIONS:{BOTH:"both",HAS_BLOCKED_ME:"hasBlockedMe",BLOCKED_BY_ME:"blockedByMe"}}},t.CallConstants={CALL_TYPE_AUDIO:"audio",CALL_TYPE_VIDEO:"video",CALL_TYPE:{AUDIO:"audio",VIDEO:"video"},RECEIVER_TYPE_GROUP:"group",RECEIVER_TYPE_USER:"user",CALL_KEYS:{CALL_DATA:"data",CALL_ID:"id",CALL_SESSION_ID:"sessionid",CALL_RECEIVER:"receiver",CALL_SENDER:"sender",CALL_RECEIVER_TYPE:"receiverType",CALL_STATUS:"status",CALL_TYPE:"type",CALL_INITIATED_AT:"initiatedAt",CALL_JOINED_AT:"joinedAt",CALL_LEFT_AT:"leftAt",CALL_METADATA:"metadata",CALL_ENTITIES:"entities",CALL_ENTITY_TYPE:"entityType",CALL_ENTITY:"entity",CALL_ENTITY_USER:"user",CALL_ENTITY_GROUP:"group"},CALL_STATUS:{INITIATED:"initiated",ONGOING:"ongoing",UNANSWERED:"unanswered",REJECTED:"rejected",BUSY:"busy",CANCELLED:"cancelled",ENDED:"ended"}},t.GroupConstants={KEYS:{NAME:"name",GUID:"guid",TYPE:"type",PASSWORD:"password",ICON:"icon",DESCRIPTION:"description",OWNER:"owner",METADATA:"metadata",CREATED_AT:"createdAt",UPDATED_AT:"updatedAt",HAS_JOINED:"hasJoined",WS_CHANNEL:"wsChannel"}},t.GroupMemersConstans={KEYS:{SCOPE:"scope",UID:"uid",GUID:"guid",USER:"user",NAME:"name"}},t.UserConstants={UID:"uid",NAME:"name",AUTH_TOKEN:"authToken",AVATAR:"avatar",CREDITS:"credits",LAST_ACTIVE_AT:"lastActiveAt",LINK:"link",META_DATA:"metaData",ROLE:"role",STATUS:"status",STATUS_MESSAGE:"statusMessage",USER_NAME:"user_name"},t.Errors={ERROR_IO_EXCEPTION:"ERROR_IO_EXCEPTION",ERROR_JSON_EXCEPTION:"ERROR_JSON_EXCEPTION",ERROR_PASSWORD_MISSING:"ERROR_PASSWORD_MISSING",ERROR_LIMIT_EXCEEDED:"ERROR_LIMIT_EXCEEDED",ERROR_USER_NOT_LOGGED_IN:"ERROR_USER_NOT_LOGGED_IN",ERROR_INVALID_GUID:"ERROR_INVALID_GUID",ERROR_PASSWORD_MISSING_MESSAGE:"Password is mandatory for a password group",ERROR_LIMIT_EXCEEDED_MESSAGE:"Limit Exceeded Max limit of %s",ERROR_USER_NOT_LOGGED_IN_MESSAGE:"Please log in to CometChat before calling this method",ERROR_INVALID_GUID_MESSAGE:"Please provide a valid GUID",ERROR_DEFAULT_MESSAGE:"Something went wrong"},t.CALL_ERROR={CALL_ALREADY_INITIATED:{code:"CALL_ALREADY_INITIATED",name:"CALL_ALREADY_INITIATED",message:"There is already call in progress",details:{}},ERROR_IN_CALLING:{code:"CALL_IN_PROGRESS",name:"CALL_ALREADY_INITIATED",message:"There is already call in progress",details:{}},CANNOT_ACCEPT_CALL:{code:"CALL_IN_PROGRESS",name:"CALL_IN_PROGRESS",message:"There is already a call in progress",details:{}}},t.PARAMETER_ERROR={PARAMETER_REQUIRED:{code:"%s_NOT_PROVIDED",name:"%s_NOT_PROVIDED",message:"please provide the %s",details:{}}},t.GENERAL_ERROR={MUST_BE_A_STRING:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a string",details:{}},MUST_BE_A_NUMBER:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a number",details:{}},MUST_BE_A_OBJECT:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a object",details:{}},MUST_BE_AN_ARRAY:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be an array",details:{}},MUST_BE_A_BOOLEAN:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a boolean",details:{}},MUST_BE_A_BLOB:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a blob",details:{}},INVALID:{code:"INVALID_%s",name:"INVALID_%s",message:"%s is invalid",details:{}},COMPULSORY:{code:"%s_IS_COMPULSORY",name:"%s_IS_COMPULSORY",message:"%s is required",details:{}},LIMIT_EXCEEDED:{code:"ERROR_%s_EXCEEDED",name:"ERROR_%s_EXCEEDED",message:"%s exceeded max limit of %s",details:{}},MUST_BE_A_POSITIVE_NUMBER:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a postive integer greater than 0",details:{}},INVALID_MEDIA_FILE:{code:"INVALID_%s",name:"INVALID_%s",message:"The message type does not match the file's mime type.",details:{}},EMPTY_STRING:{code:"INVALID_%s",name:"INVALID_%s",message:"The parameter %s is required and it cannot be empty",details:{}}},t.UserErrors={INVALID_STATUS:new i.CometChatException({code:"INVALID_STATUS_VALUE",name:"INVALID_STATUS_VALUE",message:"status accepts only two values: online and offline",details:""}),INVALID_DIRECTION:new i.CometChatException({code:"INVALID_DIRECTION_VALUE",name:"INVALID_DIRECTION_VALUE",message:"direction accepts only three values: both, blockedByMe and hasBlockedMe",details:""}),USER_NOT_LOGGED_IN:new i.CometChatException({code:"USER_NOT_LOGGED_IN",name:"USER_NOT_LOGGED_IN",message:"please login before using any other method of cometchat",details:""})},t.GroupErrors={NOT_A_GROUP:new i.CometChatException({code:"NOT_A_GROUP",message:"Please use group class to construct a new group"}),INVALID_SCOPE:new i.CometChatException({code:"INVALID_SCOPE_VALUE",name:"INVALID_SCOPE_VALUE",message:"Scope can be admin, moderator or participant",details:""}),INVALID_GROUP_TYPE:new i.CometChatException({code:"INVALID_GROUP_TYPE",name:"INVALID_GROUP_TYPE",message:"Group Type can be public, private, protected or password",details:""})},t.PresenceConstatnts={XMPP_KEYS:{FROM:"from",STATUS:"status",LAST_ACTIVE_AT:"lastActiveAt",TYPE:"type"},STATUS:{ONLINE:"online",AVAILABLE:"available",OFFLINE:"offline",JOINED:"JOINED",LEFT:"LEFT"}},t.APP_SETTINGS={APP_SETTINGS:"app_settings",KEYS:{CHAT_HOST:"CHAT_HOST",CHAT_USE_SSL:"CHAT_USE_SSL",GROUP_SERVICE:"GROUP_SERVICE",CALL_SERVICE:"CALL_SERVICE",CHAT_WS_PORT:"CHAT_WS_PORT",CHAT_WSS_PORT:"CHAT_WSS_PORT",CHAT_HTTP_BIND_PORT:"CHAT_HTTP_BIND_PORT",CHAT_HTTPS_BIND_PORT:"CHAT_HTTPS_BIND_PORT",ADMIN_API_HOST:"ADMIN_API_HOST",CLIENT_API_HOST:"CLIENT_API_HOST",WEBRTC_HOST:"WEBRTC_HOST",WEBRTC_USE_SSL:"WEBRTC_USE_SSL",WEBRTC_WS_PORT:"WEBRTC_WS_PORT",WEBRTC_WSS_PORT:"WEBRTC_WSS_PORT",WEBRTC_HTTP_BIND_PORT:"WEBRTC_HTTP_BIND_PORT",WEBRTC_HTTPS_BIND_PORT:"WEBRTC_HTTPS_BIND_PORT",EXTENSION_LIST:"extensions",EXTENSION_KEYS:{ID:"id",NAME:"name"}}},t.COMMON_UTILITY_CONSTANTS={TYPE_CONSTANTS:{BOOLEAN:"boolean",STRING:"string",OBJECT:"object",NUMBER:"number"}}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(9),s=n(0),o=n(4),i=n(2),a=n(17),c=n(18),l=n(19),u=n(3),h=n(14);function d(e){return null!=e&&("string"==typeof e&&(e=e.trim()),"object"==typeof e&&0===Object.keys(e).length&&(e=void 0)),["",0,"0",!1,null,"null",void 0,"undefined"].includes(e)}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.split("%s").reduce(function(e,n,r){return e+n+(t[r]||"")},"")}t.isObject=function(e){return e instanceof Object&&e.constructor===Object},t.isTruthy=function(e){return[!0,1,"1","true","TRUE"].includes(e)},t.isFalsy=d,t.getOrdinalSuffix=function(e){var t=e%10,n=e%100;return 1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"},t.format=p,t.createUidFromJid=function(e){return e.substring(e.lastIndexOf("]")+1,e.lastIndexOf("@"))};var f=function(){function e(){}return e.log=function(e,t){},e.error=function(e,t){},e.info=function(e,t){},e}();function g(){return new Promise(function(e,t){o.makeApiCall("appSettings").then(function(t){r.LocalStorage.getInstance().set("app_settings",t.data),e(t.data)},function(e){t(new i.CometChatException(e.error))})})}function E(e,t){return e<<t|e>>>32-t}function m(e){var t,n="";for(t=7;0<=t;t--)n+=(e>>>4*t&15).toString(16);return n}t.Logger=f,t.getCurrentTime=function(){return(new Date).getTime()},t.getAppSettings=function(){return new Promise(function(e,t){r.LocalStorage.getInstance().get(s.APP_SETTINGS.APP_SETTINGS).then(function(n){d(n)?g().then(function(t){e(t)},function(e){t(e)}):e(n)},function(e){t(e)})})},t.getUpdatedSettings=g,t.isImage=function(e){var t;return e.type&&e.type.toLowerCase().includes("image")&&(t=!0),t},t.isVideo=function(e){var t;return e.type&&e.type.toLowerCase().includes("video")&&(t=!0),t},t.isAudio=function(e){var t;return e.type&&e.type.toLowerCase().includes("audio")&&(t=!0),t},t.validateScope=function(e){return typeof e!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"SCOPE","SCOPE","scope"))):d(e)?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"SCOPE","SCOPE","scope"))):e!=u.CometChat.GROUP_MEMBER_SCOPE.ADMIN&&e!=u.CometChat.GROUP_MEMBER_SCOPE.MODERATOR&&e!=u.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT?new i.CometChatException(s.GroupErrors.INVALID_SCOPE):void 0},t.validateUpdateGroup=function(e){return e.hasOwnProperty(s.GroupConstants.KEYS.GUID)?typeof e[s.GroupConstants.KEYS.GUID]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","guid"))):d(e[s.GroupConstants.KEYS.GUID])?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"GUID","GUID","guid"))):e.hasOwnProperty(s.GroupConstants.KEYS.NAME)&&""===e[s.GroupConstants.KEYS.NAME]?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.EMPTY_STRING),"GROUP_NAME","GROUP_NAME","group name"))):void 0:new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.COMPULSORY),"GUID","GUID","guid")))},t.validateJoinGroup=function(e,t,n){if(typeof e==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.OBJECT){if(!e.hasOwnProperty(s.GroupConstants.KEYS.GUID))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.COMPULSORY),"GUID","GUID","guid")));if(typeof e[s.GroupConstants.KEYS.GUID]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","guid")));if(d(e[s.GroupConstants.KEYS.GUID]))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"GUID","GUID","guid")));if(!e.hasOwnProperty(s.GroupConstants.KEYS.TYPE))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.COMPULSORY),"GROUP_TYPE","GROUP_TYPE","group type")));if(typeof e[s.GroupConstants.KEYS.TYPE]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GROUP_TYPE","GROUP_TYPE","group type")));if(d(e[s.GroupConstants.KEYS.TYPE]))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"GROUP_TYPE","GROUP_TYPE","group type")));if(e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=u.CometChat.GROUP_TYPE.PUBLIC&&e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=u.CometChat.GROUP_TYPE.PASSWORD&&e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=u.CometChat.GROUP_TYPE.PROTECTED&&e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=u.CometChat.GROUP_TYPE.PRIVATE)return new i.CometChatException(s.GroupErrors.INVALID_GROUP_TYPE);if(e[s.GroupConstants.KEYS.TYPE].toLowerCase()==u.CometChat.GROUP_TYPE.PASSWORD){if(!e.hasOwnProperty(s.GroupConstants.KEYS.PASSWORD))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.COMPULSORY),"PASSWORD","PASSWORD","password")));if(typeof e[s.GroupConstants.KEYS.PASSWORD]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"PASSWORD","PASSWORD","password")));if(d(e[s.GroupConstants.KEYS.PASSWORD]))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"PASSWORD","PASSWORD","password")))}}else{if(void 0!==e){if(typeof e!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","guid")));if(d(e))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"GUID","GUID","guid")))}if(void 0!==t){if(typeof t!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GROUP_TYPE","GROUP_TYPE","group type")));if(d(t))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"GROUP_TYPE","GROUP_TYPE","group type")));if(t.toLowerCase()!=u.CometChat.GROUP_TYPE.PUBLIC&&t.toLowerCase()!=u.CometChat.GROUP_TYPE.PASSWORD&&t.toLowerCase()!=u.CometChat.GROUP_TYPE.PROTECTED&&t.toLowerCase()!=u.CometChat.GROUP_TYPE.PRIVATE)return new i.CometChatException(s.GroupErrors.INVALID_GROUP_TYPE);if(t.toLowerCase()==u.CometChat.GROUP_TYPE.PASSWORD){if(typeof n!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"PASSWORD","PASSWORD","password")));if(d(n))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"PASSWORD","PASSWORD","password")))}}}},t.validateCreateGroup=function(e){if(!e.hasOwnProperty(s.GroupConstants.KEYS.GUID))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.COMPULSORY),"GUID","GUID","guid")));if(typeof e[s.GroupConstants.KEYS.GUID]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","guid")));if(d(e[s.GroupConstants.KEYS.GUID]))return new i.CometChatException({code:"Empty GUID"});if(!e.hasOwnProperty(s.GroupConstants.KEYS.NAME))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.COMPULSORY),"GROUP_NAME","GROUP_NAME","group name")));if(typeof e[s.GroupConstants.KEYS.NAME]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GROUP_NAME","GROUP_NAME","group name")));if(d(e[s.GroupConstants.KEYS.NAME]))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"GROUP_NAME","GROUP_NAME","group name")));if(!e.hasOwnProperty(s.GroupConstants.KEYS.TYPE))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.COMPULSORY),"GROUP_TYPE","GROUP_TYPE","group type")));if(typeof e[s.GroupConstants.KEYS.TYPE]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GROUP_TYPE","GROUP_TYPE","group type")));if(d(e[s.GroupConstants.KEYS.TYPE]))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"GROUP_TYPE","GROUP_TYPE","group type")));if(e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=u.CometChat.GROUP_TYPE.PUBLIC&&e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=u.CometChat.GROUP_TYPE.PASSWORD&&e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=u.CometChat.GROUP_TYPE.PROTECTED&&e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=u.CometChat.GROUP_TYPE.PRIVATE)return new i.CometChatException(s.GroupErrors.INVALID_GROUP_TYPE);if(e[s.GroupConstants.KEYS.TYPE].toLowerCase()==u.CometChat.GROUP_TYPE.PASSWORD){if(!e.hasOwnProperty(s.GroupConstants.KEYS.PASSWORD))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.COMPULSORY),"PASSWORD","PASSWORD","password")));if(typeof e[s.GroupConstants.KEYS.PASSWORD]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"PASSWORD","PASSWORD","password")));if(d(e[s.GroupConstants.KEYS.PASSWORD]))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"PASSWORD","PASSWORD","password")))}},t.validateId=function(e){return typeof e!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"UID/GUID","UID/GUID","uid/guid"))):d(e)?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"UID/GUID","UID/GUID","uid/guid"))):void 0},t.validateHideMessagesFromBlockedUsers=function(e){if(typeof e!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_BOOLEAN),"HIDE_MESSAGES_FROM_BLOCKED_USERS","HIDE_MESSAGES_FROM_BLOCKED_USERS","hideMessagesFromBlockedUsers")))},t.validateArray=function(e){return typeof e!=s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.OBJECT?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_OBJECT),"LIST","LIST","list"))):Array.isArray(e)?void 0:new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_AN_ARRAY),"LIST","LIST","list")))},t.validateMsgId=function(e){return isNaN(e)?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_NUMBER),"MESSAGE_ID","MESSAGE_ID","Message Id"))):d(e)?new i.CometChatException(h.ERRORS.PARAMETER_MISSING):void 0},t.validateChatType=function(e){return typeof e!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"RECEIVER_TYPE","RECEIVER_TYPE","receiver type"))):d(e)?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"RECEIVER_TYPE","RECEIVER_TYPE","receiver type"))):e!=s.MessageConstatnts.RECEIVER_TYPE.GROUP&&e!=s.MessageConstatnts.RECEIVER_TYPE.USER?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"RECEIVER_TYPE","RECEIVER_TYPE","Receiver Type"))):void 0},t.validateMessage=function(e){var n=e;if(typeof n.getReceiverId()!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"RECEIVER_ID","RECEIVER_ID","Receiver Id")));if(d(n.getReceiverId()))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"RECEIVER_ID","RECEIVER_ID","Receiver Id")));if(typeof n.getReceiverType()!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"RECEIVER_TYPE","RECEIVER_TYPE","Receiver Type")));if(d(n.getReceiverType()))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"RECEIVER_TYPE","RECEIVER_TYPE","Receiver Type")));if(n.getReceiverType()!=s.MessageConstatnts.RECEIVER_TYPE.GROUP&&n.getReceiverType()!=s.MessageConstatnts.RECEIVER_TYPE.USER)return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"RECEIVER_TYPE","RECEIVER_TYPE","Receiver Type")));if(e instanceof a.TextMessage&&d(e.getText()))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"MESSAGE_TEXT","MESSAGE_TEXT","Message Text")));if(e instanceof c.MediaMessage){var r=e;if(!(r.file instanceof Blob))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_BLOB),"MEDIA_OBJECT","MEDIA_OBJECT","Media Object")));if(typeof r.getData()!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.OBJECT)return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_OBJECT),"MEDIA_OBJECT","MEDIA_OBJECT","Media Object")));if(d(r.getData()))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"MEDIA_OBJECT","MEDIA_OBJECT","Media Object")));if("image"==r.getType()){if(!t.isImage(r.file))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID_MEDIA_FILE),"IMAGE_FILE","IMAGE_FILE")))}else if("video"==r.getType()){if(!t.isVideo(r.file))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID_MEDIA_FILE),"VIDEO_FILE","VIDEO_FILE")))}else if("audio"==r.getType()&&!t.isAudio(r.file))return new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID_MEDIA_FILE),"AUDIO_FILE","AUDIO_FILE")))}return e instanceof l.CustomMessage&&d(e.getCustomData())?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"CUSTOM_DATA","CUSTOM_DATA","Custom Data"))):void 0},t.validateCreateUser=function(e){return e.hasOwnProperty(s.UserConstants.UID)?typeof e[s.UserConstants.UID]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"UID","UID","uid"))):d(e[s.UserConstants.UID])?new i.CometChatException({code:"Empty UID"}):e.hasOwnProperty(s.UserConstants.NAME)?typeof e[s.UserConstants.NAME]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"USER_NAME","USER_NAME","user name"))):d(e[s.UserConstants.NAME])?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.INVALID),"USER_NAME","USER_NAME","user name"))):void 0:new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.COMPULSORY),"USER_NAME","USER_NAME","user name"))):new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.COMPULSORY),"UID","UID","uid")))},t.validateUpdateUser=function(e){return e.hasOwnProperty(s.UserConstants.UID)?typeof e[s.UserConstants.UID]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"UID","UID","uid"))):d(e[s.UserConstants.UID])?new i.CometChatException({code:"Empty UID"}):e.hasOwnProperty(s.UserConstants.NAME)&&""===e[s.UserConstants.NAME]?new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.EMPTY_STRING),"USER_NAME","USER_NAME","user name"))):void 0:new i.CometChatException(JSON.parse(p(JSON.stringify(s.GENERAL_ERROR.COMPULSORY),"UID","UID","uid")))},t.SHA1=function(e){var t,n,r,s,o,i,a,c,l,u=new Array(80),h=1732584193,d=4023233417,p=2562383102,f=271733878,g=3285377520,_=(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):(127<r&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}(e)).length,C=new Array;for(n=0;n<_-3;n+=4)r=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),C.push(r);switch(_%4){case 0:n=2147483648;break;case 1:n=e.charCodeAt(_-1)<<24|8388608;break;case 2:n=e.charCodeAt(_-2)<<24|e.charCodeAt(_-1)<<16|32768;break;case 3:n=e.charCodeAt(_-3)<<24|e.charCodeAt(_-2)<<16|e.charCodeAt(_-1)<<8|128}for(C.push(n);C.length%16!=14;)C.push(0);for(C.push(_>>>29),C.push(_<<3&4294967295),t=0;t<C.length;t+=16){for(n=0;n<16;n++)u[n]=C[t+n];for(n=16;n<=79;n++)u[n]=E(u[n-3]^u[n-8]^u[n-14]^u[n-16],1);for(s=h,o=d,i=p,a=f,c=g,n=0;n<=19;n++)l=E(s,5)+(o&i|~o&a)+c+u[n]+1518500249&4294967295,c=a,a=i,i=E(o,30),o=s,s=l;for(n=20;n<=39;n++)l=E(s,5)+(o^i^a)+c+u[n]+1859775393&4294967295,c=a,a=i,i=E(o,30),o=s,s=l;for(n=40;n<=59;n++)l=E(s,5)+(o&i|o&a|i&a)+c+u[n]+2400959708&4294967295,c=a,a=i,i=E(o,30),o=s,s=l;for(n=60;n<=79;n++)l=E(s,5)+(o^i^a)+c+u[n]+3395469782&4294967295,c=a,a=i,i=E(o,30),o=s,s=l;h=h+s&4294967295,d=d+o&4294967295,p=p+i&4294967295,f=f+a&4294967295,g=g+c&4294967295}return(m(h)+m(d)+m(p)+m(f)+m(g)).toLowerCase()}},function(e,t,n){"use strict";t.__esModule=!0,t.CometChatException=function(e){null!=e.code&&""!==e.code&&(this.code=e.code),null!=e.name&&""!==e.name&&(this.name=e.name),null!=e.message&&""!==e.message&&(this.message=e.message),null!=e.details&&""!==e.details&&(this.details=e.details)}},function(e,t,n){"use strict";(function(e){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(i,a)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=0<(s=i.trys).length&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(a){o=[6,a],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};t.__esModule=!0;var i=n(27),a=n(1),c=n(2),l=n(4),u=n(5),h=n(13),d=n(15),p=n(9),f=n(18),g=n(17),E=n(7),m=n(21),_=n(8),C=n(0),S=n(6),T=n(16),y=n(34),v=n(48),A=n(20),I=n(23),R=n(29),N=n(14),O=n(22),w=n(49),M=n(50),b=n(52),P=n(53),L=n(54),x=n(24),U=n(30),D=n(31),Y=n(19),G=n(35),k=n(55),F=n(32),V=n(25),B=n(56),H=n(33),K=n(57),j=n(37),J=n(58),q=h.XMPPConnectionHelper.getInstance(),X=function(){function t(r){try{"undefined"!=typeof document?a.Logger.info("This is browser","we have everything"):"undefined"!=typeof navigator&&"ReactNative"==navigator.product?(a.Logger.info("This is react-native","we do not have dom"),e.DOMParser=n(61).DOMParser,e.document=(new e.DOMParser).parseFromString("<?xml version='1.0'?>","text/xml"),t.isNative=!0):a.Logger.info("This is node","we do not have anything"),t.typingTimer(),t.appId=r,t.messagesStore=m.MessagesStore.getInstance(),t.localStorage=p.LocalStorage.getInstance(),t.userStore=y.UserStore.getInstance(),t.keyStore=v.KeyStore.getInstance(),t.messageListnerMaping=x.MessageListnerMaping.getInstance()}catch(r){a.Logger.error("CometChat: constructor",r)}}return t.setAuthToken=function(e){try{t.authToken=e}catch(e){a.Logger.error("CometChat: setAuthToken",e)}},t.prototype.getAuthToken=function(){try{return t.authToken}catch(i){a.Logger.error("CometChat: getAuthToken",i)}},t.getAppId=function(){try{return t.appId}catch(i){a.Logger.error("CometChat: getAppId",i)}},t.prototype.getApiKey=function(){try{return t.apiKey}catch(i){a.Logger.error("CometChat: getApiKey",i)}},t.init=function(e,n){var r=this;return void 0===e&&(e=""),void 0===n&&(n={}),new Promise(function(s,o){try{"object"==typeof e&&(e.hasOwnProperty("appId")&&(e=e.appId),e.hasOwnProperty("appSettings")&&(n=e.appSettings)),a.isFalsy(n)?n=(new H.AppSettingsBuilder).setRegion(H.AppSettings.REGION_EU).build():n.getRegion()==H.AppSettings.REGION_PRIVATE&&(n.region=e),r.appSettings=n,a.isFalsy(e)?o(new c.CometChatException(N.INIT_ERROR.NO_APP_ID)):(r.initialzed=!0,r.getInstance(e)),s(!0),t.keyStore.get("deviceId").then(function(n){if(null==n){var r=e.substr(0,e.length-10)+"_"+J()+"_"+(new Date).getTime(),s=a.SHA1(r);t.keyStore.set("deviceId",s)}}),t.localStorage.get("user").then(function(e){e?(t.user=new u.Me(e),t.setAuthToken(t.user.getAuthToken()),t.XMPPLogin(t.user,function(){s(!0)},function(){o("error in connecting to xmpp server")})):s(!0)})}catch(n){o(new c.CometChatException(n))}})},t.isInitialized=function(){try{return this.initialzed}catch(i){a.Logger.error("CometChat: isInitialized",i)}},t.getInstance=function(e){try{return this.cometChat||(this.cometChat=new t(e)),this.cometChat}catch(e){a.Logger.error("CometChat: getInstance",e)}},t.registerTokenForPushNotification=function(e,n){var r=this;return new Promise(function(s,o){try{t.keyStore.get("deviceId").then(function(i){var u="",h=i,d=C.APPINFO.platform,p=C.APPINFO.sdkVersion,f=C.APPINFO.apiVersion;if(navigator&&(u=navigator.userAgent),null==h){var g=r.appId.substr(0,r.appId.length-10)+"_"+J()+"_"+(new Date).getTime();h=a.SHA1(g),t.keyStore.set("deviceId",h)}l.makeApiCall("updateMyDetails",{},{platform:d,userAgent:u,deviceId:h,appInfo:{version:p,apiVersion:f,pushNotification:{fcmDeviceToken:e,settings:n}}},!1).then(function(e){s("Token Registration successful")},function(e){o(new c.CometChatException(e.error))}).catch(function(e){o(new c.CometChatException(e))})})}catch(i){o(new c.CometChatException(i))}})},t.login=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new Promise(function(r,s){try{if("object"==typeof n[0]){var o=n[0];n[0].hasOwnProperty("authToken")?n[0]=o.authToken:n[0].hasOwnProperty("username")&&n[0].hasOwnProperty("apiKey")&&(n[0]=o.username,n[1]=o.apiKey)}if(2==n.length?(a.isFalsy(n[0])||a.isFalsy(n[1]))&&s(new c.CometChatException(N.ERRORS.PARAMETER_MISSING)):1==n.length?a.isFalsy(n[0])&&s(new c.CometChatException(N.ERRORS.PARAMETER_MISSING)):s(new c.CometChatException(N.ERRORS.PARAMETER_MISSING)),!a.isFalsy(e.getAppId()))return t.localStorage.get("user").then(function(o){if(2==n.length){t.isSecure=!1,t.apiKey=n[1];var i=n[0];null!=o&&o.uid!==n[0]?e.messagesStore.clearStore().then(function(){t.userStore.clearStore().then(function(){t.localStorage.clearStore().then(function(){h.XMPPConnectionHelper.getInstance().XMPPDisconnect(),t.generateAuthToken(i).then(function(e){t.user=new u.Me(e),t.setAuthToken(t.user.getAuthToken()),t.getLoggedInUser().then(function(e){(t.user=new u.Me(e)).setAuthToken(t.authToken),t.setAuthToken(t.user.getAuthToken()),V.ExtensionController.hookOnLogin(t.user),t.XMPPLogin(t.user,r,s)},function(e){s(new c.CometChatException(e.error))})},function(e){s(new c.CometChatException(e))})})})}):a.isFalsy(t.authToken)?a.isFalsy(i)||(a.isFalsy(t.apiKey)?s(new c.CometChatException(N.LOGIN_ERROR.UNAUTHORISED)):e.generateAuthToken(i).then(function(n){e.user=new u.Me(n),e.setAuthToken(t.user.getAuthToken()),e.getLoggedInUser().then(function(n){e.user=new u.Me(n),e.user.setAuthToken(t.authToken),e.setAuthToken(e.user.getAuthToken()),V.ExtensionController.hookOnLogin(t.user),h.XMPPConnectionHelper.getInstance().XMPPDisconnect(),e.XMPPLogin(e.user,r,s)},function(e){s(new c.CometChatException(e.error))})},function(e){s(new c.CometChatException(e))})):(V.ExtensionController.hookOnLogin(t.user),r(e.user))}else t.authToken=n[0],t.isSecure=!0,e.getLoggedInUser().then(function(i){if(i.authToken!=n[0]){var a=e;a.messagesStore.clearStore().then(function(){a.userStore.clearStore().then(function(){a.localStorage.clearStore().then(function(){h.XMPPConnectionHelper.getInstance().XMPPDisconnect(),a.getLoggedInUser().then(function(e){t.XMPPLogin(new u.Me(e),r,s)},function(e){s(new c.CometChatException(e))})})})})}else o?r(new u.Me(i)):t.XMPPLogin(new u.Me(i),r,s)},function(e){s(new c.CometChatException(e))})});s(new c.CometChatException(N.LOGIN_ERROR.NOT_INITIALIZED))}catch(o){s(new c.CometChatException(o))}})},t.sendMessage=function(e){var t=this;return new Promise(function(n,r){return s(t,void 0,void 0,function(){var t,i,u,h,d=this;return o(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),e instanceof g.TextMessage||e instanceof f.MediaMessage||e instanceof Y.CustomMessage||(e=e[C.MessageConstatnts.KEYS.ATTATCHMENT]?(t=C.MessageConstatnts.TYPE.FILE,a.isImage(e[C.MessageConstatnts.KEYS.ATTATCHMENT])?t=C.MessageConstatnts.TYPE.IMAGE:a.isAudio(e[C.MessageConstatnts.KEYS.ATTATCHMENT])?t=C.MessageConstatnts.TYPE.AUDIO:a.isVideo(e[C.MessageConstatnts.KEYS.ATTATCHMENT])&&(t=C.MessageConstatnts.TYPE.VIDEO),new f.MediaMessage(e[C.MessageConstatnts.KEYS.RECEIVER_ID],e[C.MessageConstatnts.KEYS.ATTATCHMENT],t,e[C.MessageConstatnts.KEYS.RECEIVER_TYPE])):new g.TextMessage(e[C.MessageConstatnts.KEYS.RECEIVER_ID],e[C.MessageConstatnts.KEYS.TEXT],e[C.MessageConstatnts.KEYS.RECEIVER_TYPE])),[4,V.ExtensionController.hookBeforeMessageSent(e)];case 1:return i=p.sent(),(u=a.validateMessage(e=i))instanceof c.CometChatException?(r(u),[2]):(e.receiver=e.receiverId,delete e.receiverId,[2,l.makeApiCall("sendMessage",{},e,e instanceof f.MediaMessage).then(function(e){return s(d,void 0,void 0,function(){var t,r;return o(this,function(s){switch(s.label){case 0:return t=E.MessageController.trasformJSONMessge(e.data),[4,V.ExtensionController.hookAfterMessageSent(t)];case 1:return r=s.sent(),n(t=r),[2]}})})},function(e){r(new c.CometChatException(e.error))})]);case 2:return h=p.sent(),r(new c.CometChatException(h)),[3,3];case 3:return[2]}})})})},t.sendDirectMessage=function(e){try{return Object.assign(e,{receiverType:C.MessageConstatnts.RECEIVER_TYPE.USER}),this.sendMessage(e)}catch(e){a.Logger.error("CometChat: sendDirectMessage",e)}},t.sendGroupMessage=function(e){try{return Object.assign(e,{receiverType:C.MessageConstatnts.RECEIVER_TYPE.GROUP}),this.sendMessage(e)}catch(e){a.Logger.error("CometChat: sendGroupMessage",e)}},t.sendMediaMessage=function(e){try{return this.sendMessage(e)}catch(e){a.Logger.error("CometChat: sendMediaMessage",e)}},t.sendCustomMessage=function(e){try{return this.sendMessage(e)}catch(e){a.Logger.error("CometChat: sendCustomMessage",e)}},t.getLastDeliveredMessageId=function(){return s(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,x.MessageListnerMaping.getInstance().get("all")];case 1:return[2,t.sent()];case 2:return e=t.sent(),a.Logger.error("CometChat: getLastDeliveredMessageId",e),[3,3];case 3:return[2]}})})},t.startTyping=function(e){try{if(a.isFalsy(e))return;var n,r=this.RECEIVER_TYPE.USER,s={};if(e instanceof U.TypingIndicator)n=e.getReceiverId(),r=e.getReceiverType(),s=e.getMetadata();else{if(!e.hasOwnProperty(C.TYPING_NOTIFICATION.RECEIVER_ID))return;n=e[C.TYPING_NOTIFICATION.RECEIVER_ID],e.hasOwnProperty(C.TYPING_NOTIFICATION.RECEIVER_TYPE)&&(r=e[C.TYPING_NOTIFICATION.RECEIVER_TYPE]),e.hasOwnProperty(C.TYPING_NOTIFICATION.META)&&(s=e[C.TYPING_NOTIFICATION.META])}if(a.isFalsy(n))return;r=r==this.RECEIVER_TYPE.USER?C.XMPP.CONVERSATION.TYPE.CHAT:C.XMPP.CONVERSATION.TYPE.GROUP_CHAT,(D.TypingNotificationController.getTypingStartedMap(n)&&a.getCurrentTime()-D.TypingNotificationController.getTypingStartedMap(n)>=1e3*C.DEFAULT_VALUES.DEFAULT_MAX_TYPING_INDICATOR_LIMIT||null==D.TypingNotificationController.getTypingStartedMap(n))&&a.getAppSettings().then(function(e){switch(r){case C.XMPP.CONVERSATION.TYPE.CHAT:q.sendTypingStarted(a.format(C.XMPP.bare_jid_string,t.getAppId(),n,e[C.APP_SETTINGS.KEYS.CHAT_HOST]),r,s);break;case C.XMPP.CONVERSATION.TYPE.GROUP_CHAT:q.sendTypingStarted(a.format(C.XMPP.muc_jid_string,t.getAppId(),n,e[C.APP_SETTINGS.KEYS.GROUP_SERVICE],e[C.APP_SETTINGS.KEYS.CHAT_HOST]),r,s)}D.TypingNotificationController.addTypingStarted(n)},function(e){})}catch(e){a.Logger.error("CometChat: startTyping",e)}},t.endTyping=function(e){try{if(!a.isFalsy(e)){var n,r=this.RECEIVER_TYPE.USER,s={};if(e instanceof U.TypingIndicator)n=e.getReceiverId(),r=e.getReceiverType(),s=e.getMetadata();else{if(!e.hasOwnProperty(C.TYPING_NOTIFICATION.RECEIVER_ID))return;n=e[C.TYPING_NOTIFICATION.RECEIVER_ID],e.hasOwnProperty(C.TYPING_NOTIFICATION.RECEIVER_TYPE)&&(r=e[C.TYPING_NOTIFICATION.RECEIVER_TYPE]),r=r==this.RECEIVER_TYPE.USER?C.XMPP.CONVERSATION.TYPE.CHAT:C.XMPP.CONVERSATION.TYPE.GROUP_CHAT,e.hasOwnProperty(C.TYPING_NOTIFICATION.META)&&(s=e[C.TYPING_NOTIFICATION.META])}if(a.isFalsy(n))return;r=r==this.RECEIVER_TYPE.USER?C.XMPP.CONVERSATION.TYPE.CHAT:C.XMPP.CONVERSATION.TYPE.GROUP_CHAT,D.TypingNotificationController.getTypingStartedMap(n)&&a.getCurrentTime()-D.TypingNotificationController.getTypingStartedMap(n)<1e3*C.DEFAULT_VALUES.DEFAULT_MAX_TYPING_INDICATOR_LIMIT&&(D.TypingNotificationController.getTypingEndedMap(n)&&a.getCurrentTime()-D.TypingNotificationController.getTypingEndedMap(n)>=1e3*C.DEFAULT_VALUES.DEFAULT_MAX_TYPING_INDICATOR_LIMIT||null==D.TypingNotificationController.getTypingEndedMap(n))&&a.getAppSettings().then(function(e){switch(r){case C.XMPP.CONVERSATION.TYPE.CHAT:q.sendTypingPaused(a.format(C.XMPP.bare_jid_string,t.getAppId(),n,e[C.APP_SETTINGS.KEYS.CHAT_HOST]),r,s);break;case C.XMPP.CONVERSATION.TYPE.GROUP_CHAT:q.sendTypingPaused(a.format(C.XMPP.muc_jid_string,t.getAppId(),n,e[C.APP_SETTINGS.KEYS.GROUP_SERVICE],e[C.APP_SETTINGS.KEYS.CHAT_HOST]),r,s)}D.TypingNotificationController.addTypingEnded(n)},function(e){})}}catch(e){a.Logger.error("CometChat: endTyping",e)}},t.markAsRead=function(e,t,n){try{h.XMPPConnectionHelper.getInstance().markAsRead(t,n,e)}catch(e){a.Logger.error("CometChat: markAsRead",e)}},t.markAsDelivered=function(e,t,n){try{h.XMPPConnectionHelper.getInstance().markAsDelivered(t,n,e)}catch(e){a.Logger.error("CometChat: markAsDelivered",e)}},t.getMessageDetails=function(e){return new Promise(function(t,n){try{a.isFalsy(e)?n(new c.CometChatException(N.ERRORS.PARAMETER_MISSING)):l.makeApiCall("getMessageDetails",{messageId:e}).then(function(e){t(E.MessageController.trasformJSONMessge(e.data))},function(e){a.Logger.error("CometChat:GetMessageDetails:",e),n(new c.CometChatException(e.error))})}catch(e){n(new c.CometChatException(e))}})},t.getMessageReceipts=function(e){return new Promise(function(t,n){try{var r=a.validateMsgId(e);if(r instanceof c.CometChatException)return void n(r);a.isFalsy(e)?n(new c.CometChatException(N.ERRORS.PARAMETER_MISSING)):l.makeApiCall("getMessageDetails",{messageId:e}).then(function(e){E.MessageController.getReceiptsFromJSON(e.data).then(function(e){t(e)},function(e){n(new c.CometChatException(e))})},function(e){a.Logger.error("CometChat:GetMessageDetails:",e),n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},t.getUnreadMessageCount=function(e){void 0===e&&(e=!1);var t=0;return new Promise(function(n,r){try{var s=a.validateHideMessagesFromBlockedUsers(e);if(s instanceof c.CometChatException)return void r(s);e&&(t=1),l.makeApiCall("getMessages",{},{unread:1,count:1,hideMessagesFromBlockedUsers:t}).then(function(e){var t={},r={};e.data.map(function(e){e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE]==C.MessageConstatnts.RECEIVER_TYPE.GROUP?r[e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]:t[e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]}),n({users:t,groups:r})},function(e){r(new c.CometChatException(e.error))})}catch(s){r(new c.CometChatException(s))}})},t.getUnreadMessageCountForAllUsers=function(e){void 0===e&&(e=!1);var t=0;return new Promise(function(n,s){try{var o=a.validateHideMessagesFromBlockedUsers(e);if(o instanceof c.CometChatException)return void s(o);e&&(t=1),l.makeApiCall("getMessages",{},{hideMessagesFromBlockedUsers:t,receiverType:C.MessageConstatnts.RECEIVER_TYPE.USER,unread:1,count:1}).then(function(e){var t={};e.data.map(function(e){t[e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]}),n(r({},t))},function(e){s(new c.CometChatException(e.error))})}catch(o){s(new c.CometChatException(o))}})},t.getUnreadMessageCountForAllGroups=function(e){void 0===e&&(e=!1);var t=0;return new Promise(function(n,s){try{var o=a.validateHideMessagesFromBlockedUsers(e);if(o instanceof c.CometChatException)return void s(o);e&&(t=1),l.makeApiCall("getMessages",{},{hideMessagesFromBlockedUsers:t,receiverType:C.MessageConstatnts.RECEIVER_TYPE.GROUP,unread:1,count:1}).then(function(e){var t={};e.data.map(function(e){e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE]==C.MessageConstatnts.RECEIVER_TYPE.GROUP&&(t[e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT])}),n(r({},t))},function(e){s(new c.CometChatException(e.error))})}catch(o){s(new c.CometChatException(o))}})},t.getUnreadMessageCountForUser=function(e,t){void 0===t&&(t=!1);var n=0;return new Promise(function(s,o){try{var i=a.validateId(e);if(i instanceof c.CometChatException)return void o(i);var u=a.validateHideMessagesFromBlockedUsers(t);if(u instanceof c.CometChatException)return void o(u);t&&(n=1),l.makeApiCall("getUserMessages",{listId:e},{hideMessagesFromBlockedUsers:n,unread:1,count:1,uid:e}).then(function(e){var t={};e.data.map(function(e){t[e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]}),s(r({},t))},function(e){o(new c.CometChatException(e.error))})}catch(i){o(new c.CometChatException(i))}})},t.getUnreadMessageCountForGroup=function(e,t){void 0===t&&(t=!1);var n=0;return new Promise(function(s,o){try{var i=a.validateId(e);if(i instanceof c.CometChatException)return void o(i);var u=a.validateHideMessagesFromBlockedUsers(t);if(u instanceof c.CometChatException)return void o(u);t&&(n=1),l.makeApiCall("getGroupMessages",{listId:e},{hideMessagesFromBlockedUsers:n,unread:1,count:1,guid:e}).then(function(e){var t={};e.data.map(function(e){e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE]==C.MessageConstatnts.RECEIVER_TYPE.GROUP&&(t[e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT])}),s(r({},t))},function(e){o(new c.CometChatException(e.error))})}catch(i){o(new c.CometChatException(i))}})},t.getUndeliveredMessageCount=function(e){void 0===e&&(e=!1);var t=0;return new Promise(function(n,r){try{var s=a.validateHideMessagesFromBlockedUsers(e);if(s instanceof c.CometChatException)return void r(s);e&&(t=1),l.makeApiCall("getMessages",{},{hideMessagesFromBlockedUsers:t,undelivered:1,count:1}).then(function(e){var t={},r={};e.data.map(function(e){e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE]==C.MessageConstatnts.RECEIVER_TYPE.GROUP?r[e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]:t[e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]}),n({users:t,groups:r})},function(e){r(new c.CometChatException(e.error))})}catch(s){r(new c.CometChatException(s))}})},t.getUndeliveredMessageCountForAllUsers=function(e){void 0===e&&(e=!1);var t=0;return new Promise(function(n,s){try{var o=a.validateHideMessagesFromBlockedUsers(e);if(o instanceof c.CometChatException)return void s(o);e&&(t=1),l.makeApiCall("getMessages",{},{hideMessagesFromBlockedUsers:t,unread:1,count:1}).then(function(e){var t={};e.data.map(function(e){t[e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]}),n(r({},t))},function(e){s(new c.CometChatException(e.error))})}catch(o){s(new c.CometChatException(o))}})},t.getUndeliveredMessageCountForAllGroups=function(e){void 0===e&&(e=!1);var t=0;return new Promise(function(n,s){try{var o=a.validateHideMessagesFromBlockedUsers(e);if(o instanceof c.CometChatException)return void s(o);e&&(t=1),l.makeApiCall("getMessages",{},{hideMessagesFromBlockedUsers:t,unread:1,count:1}).then(function(e){var t={};e.data.map(function(e){t[e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]}),n(r({},t))},function(e){s(new c.CometChatException(e.error))})}catch(o){s(new c.CometChatException(o))}})},t.getUndeliveredMessageCountForUser=function(e,t){void 0===t&&(t=!1);var n=0;return new Promise(function(s,o){try{var i=a.validateId(e);if(i instanceof c.CometChatException)return void o(i);var u=a.validateHideMessagesFromBlockedUsers(t);if(u instanceof c.CometChatException)return void o(u);t&&(n=1),l.makeApiCall("getUserMessages",{listId:e},{hideMessagesFromBlockedUsers:n,undelivered:1,count:1,uid:e}).then(function(e){var t={};e.data.map(function(e){t[e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]}),s(r({},t))},function(e){o(new c.CometChatException(e.error))})}catch(i){o(new c.CometChatException(i))}})},t.getUndeliveredMessageCountForGroup=function(e,t){void 0===t&&(t=!1);var n=0;return new Promise(function(s,o){try{var i=a.validateId(e);if(i instanceof c.CometChatException)return void o(i);var u=a.validateHideMessagesFromBlockedUsers(t);if(u instanceof c.CometChatException)return void o(u);t&&(n=1),l.makeApiCall("getGroupMessages",{listId:e},{hideMessagesFromBlockedUsers:n,undelivered:1,count:1,uid:e}).then(function(e){var t={};e.data.map(function(e){t[e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[C.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]}),s(r({},t))},function(e){o(new c.CometChatException(e.error))})}catch(i){o(new c.CometChatException(i))}})},t.editMessage=function(e){return new Promise(function(t,n){try{var r=a.validateMsgId(e.getId());if(r instanceof c.CometChatException)return void n(r);l.makeApiCall("updateMessage",{messageId:e.getId()},e).then(function(e){t(E.MessageController.trasformJSONMessge(e.data).getActionOn())},function(e){n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},t.deleteMessage=function(e){return new Promise(function(t,n){try{var r=a.validateMsgId(e);if(r instanceof c.CometChatException)return void n(r);l.makeApiCall("deleteMessage",{messageId:e},{id:e}).then(function(e){t(E.MessageController.trasformJSONMessge(e.data).getActionOn())},function(e){n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},t.getPreviousMessagesByTimestamp=function(e,t){return new Promise(function(n,r){try{a.isFalsy(t)?r(new c.CometChatException(JSON.parse(a.format(JSON.stringify(C.PARAMETER_ERROR.PARAMETER_REQUIRED),"TIMESTAMP","TIMESTAMP","timestamp")))):E.MessageController.getAllMessage(e,t,C.MessageConstatnts.PAGINATION.CURSOR_FILEDS.SENT_AT,C.MessageConstatnts.PAGINATION.AFFIX.PREPEND).then(function(e){return n(e)},function(e){return r(new c.CometChatException(e))})}catch(e){r(new c.CometChatException(e))}})},t.getPreviousMessagesById=function(e,t){return new Promise(function(n,r){try{a.isFalsy(t)?r(new c.CometChatException(JSON.parse(a.format(JSON.stringify(C.PARAMETER_ERROR.PARAMETER_REQUIRED),"ID","ID","id")))):E.MessageController.getAllMessage(e,t,C.MessageConstatnts.PAGINATION.CURSOR_FILEDS.ID,C.MessageConstatnts.PAGINATION.AFFIX.PREPEND).then(function(e){return n(e)},function(e){return r(new c.CometChatException(e))})}catch(e){r(new c.CometChatException(e))}})},t.getNextMessagesByTimestamp=function(e,t){return new Promise(function(n,r){try{a.isFalsy(t)?r(new c.CometChatException(JSON.parse(a.format(JSON.stringify(C.PARAMETER_ERROR.PARAMETER_REQUIRED),"TIMESTAMP","TIMESTAMP","timestamp")))):E.MessageController.getAllMessage(e,t,C.MessageConstatnts.PAGINATION.CURSOR_FILEDS.SENT_AT,C.MessageConstatnts.PAGINATION.AFFIX.APPEND).then(function(e){return n(e)},function(e){return r(new c.CometChatException(e))})}catch(e){r(new c.CometChatException(e))}})},t.getNextMessagesById=function(e,t){return new Promise(function(n,r){try{a.isFalsy(t)?r(new c.CometChatException(JSON.parse(a.format(JSON.stringify(C.PARAMETER_ERROR.PARAMETER_REQUIRED),"ID","ID","id")))):E.MessageController.getAllMessage(e,t,C.MessageConstatnts.PAGINATION.CURSOR_FILEDS.ID,C.MessageConstatnts.PAGINATION.AFFIX.APPEND).then(function(e){return n(e)},function(e){return r(new c.CometChatException(e))})}catch(e){r(new c.CometChatException(e))}})},t.createUser=function(e,n){return new Promise(function(r,s){try{if(a.isFalsy(n))return void s(new c.CometChatException(JSON.parse(a.format(JSON.stringify(C.GENERAL_ERROR.INVALID),"API_KEY","API_KEY","API_KEY"))));t.apiKey=n;var o=a.validateCreateUser(e);if(o instanceof c.CometChatException)return void s(o);if(!(e instanceof u.User)){var i=void 0;if(!e.hasOwnProperty(C.UserConstants.UID))return void s(new c.CometChatException(N.ERRORS.PARAMETER_MISSING));if(!e.hasOwnProperty(C.UserConstants.NAME))return void s(new c.CometChatException(N.ERRORS.PARAMETER_MISSING));i=new u.User(e[C.UserConstants.UID],e[C.UserConstants.NAME]),e.hasOwnProperty(C.UserConstants.AVATAR)&&i.setAvatar(e[C.UserConstants.AVATAR]),e.hasOwnProperty(C.UserConstants.ROLE)&&i.setRole(e[C.UserConstants.ROLE]),e.hasOwnProperty(C.UserConstants.META_DATA)&&i.setMetadata(e[C.UserConstants.META_DATA]),e.hasOwnProperty(C.UserConstants.LINK)&&i.setLink(e[C.UserConstants.LINK]),e.hasOwnProperty(C.UserConstants.CREDITS)&&i.setCredits(e[C.UserConstants.CREDITS]),e.hasOwnProperty(C.UserConstants.STATUS_MESSAGE)&&i.setStatusMessage(e[C.UserConstants.STATUS_MESSAGE]),e=i}l.makeApiCall("createUser",{},e).then(function(e){var t=_.UsersController.trasformJSONUser(e.data);r(t)},function(e){s(new c.CometChatException(e.error))})}catch(o){s(new c.CometChatException(o))}})},t.updateUser=function(e,n){return new Promise(function(r,s){try{if(a.isFalsy(n))return void s(new c.CometChatException(JSON.parse(a.format(JSON.stringify(C.GENERAL_ERROR.INVALID),"API_KEY","API_KEY","API_KEY"))));t.apiKey=n;var o=a.validateUpdateUser(e);if(o instanceof c.CometChatException)return void s(o);if(!(e instanceof u.User)){var i=void 0;if(!e.hasOwnProperty(C.UserConstants.UID))return void s(new c.CometChatException(N.ERRORS.PARAMETER_MISSING));i=new u.User(e[C.UserConstants.UID]),e.hasOwnProperty(C.UserConstants.NAME)&&i.setName(e[C.UserConstants.NAME]),e.hasOwnProperty(C.UserConstants.AVATAR)&&i.setAvatar(e[C.UserConstants.AVATAR]),e.hasOwnProperty(C.UserConstants.ROLE)&&i.setRole(e[C.UserConstants.ROLE]),e.hasOwnProperty(C.UserConstants.META_DATA)&&i.setMetadata(e[C.UserConstants.META_DATA]),e.hasOwnProperty(C.UserConstants.LINK)&&i.setLink(e[C.UserConstants.LINK]),e.hasOwnProperty(C.UserConstants.CREDITS)&&i.setCredits(e[C.UserConstants.CREDITS]),e.hasOwnProperty(C.UserConstants.STATUS_MESSAGE)&&i.setStatusMessage(e[C.UserConstants.STATUS_MESSAGE]),e=i}l.makeApiCall("updateUser",{uid:e.uid},e).then(function(e){var t=_.UsersController.trasformJSONUser(e.data);r(t)},function(e){s(new c.CometChatException(e.error))})}catch(o){s(new c.CometChatException(o))}})},t.getUser=function(e){return new Promise(function(t,n){try{"object"==typeof e&&e.hasOwnProperty("uid")&&(e=e.uid);var r=a.validateId(e);if(r instanceof c.CometChatException)return void n(r);l.makeApiCall("user",{uid:e}).then(function(e){var n=_.UsersController.trasformJSONUser(e.data);t(n)}).catch(function(e){n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},t.getLoggedInUser=function(){var e=this;return new Promise(function(n,r){try{t.localStorage.get("user").then(function(s){if(s)n(t.user=new u.Me(s));else{var o="",i="",h=C.APPINFO.platform,d=C.APPINFO.sdkVersion,p=C.APPINFO.apiVersion;t.keyStore.get("deviceId").then(function(s){if(i=s,navigator&&(o=navigator.userAgent),null==i){var f=e.appId.substr(0,e.appId.length-10)+"_"+J()+"_"+(new Date).getTime();i=a.SHA1(f),t.keyStore.set("deviceId",i)}l.makeApiCall("updateMyDetails",{},{platform:h,userAgent:o,deviceId:i,appInfo:{version:d,apiVersion:p}},!1).then(function(e){n(new u.Me(e.data))},function(e){r(new c.CometChatException(e.error))}).catch(function(e){r(new c.CometChatException(e))})})}})}catch(i){r(new c.CometChatException(i))}})},t.getLoggedinUser=function(){return new Promise(function(e,n){try{t.localStorage.get("user").then(function(n){e(n?t.user=new u.Me(n):null)},function(t){e(null)})}catch(i){n(new c.CometChatException(i))}})},t.blockUsers=function(e){return new Promise(function(t,n){try{var r=a.validateArray(e);if(r instanceof c.CometChatException)return void n(r);a.isFalsy(e)?n(new c.CometChatException(N.USERS_REQUEST_ERRORS.EMPTY_USERS_LIST)):l.makeApiCall("blockUsers",{},{blockedUids:e}).then(function(e){t(e.data)},function(e){n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},t.unblockUsers=function(e){return new Promise(function(t,n){try{var r=a.validateArray(e);if(r instanceof c.CometChatException)return void n(r);a.isFalsy(e)?n(new c.CometChatException(N.USERS_REQUEST_ERRORS.EMPTY_USERS_LIST)):l.makeApiCall("unblockUsers",{},{blockedUids:e}).then(function(e){t(e.data)},function(e){n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},t.createGroup=function(e){return new Promise(function(t,n){try{var r=a.validateCreateGroup(e);if(r instanceof c.CometChatException)return void n(r);if(!(e instanceof S.Group)){var s=void 0;if(!e.hasOwnProperty(C.GroupConstants.KEYS.GUID))return void n(new c.CometChatException(N.ERRORS.PARAMETER_MISSING));if(!e.hasOwnProperty(C.GroupConstants.KEYS.NAME))return void n(new c.CometChatException(N.ERRORS.PARAMETER_MISSING));if(s=new S.Group(e[C.GroupConstants.KEYS.GUID],e[C.GroupConstants.KEYS.NAME],""),e.hasOwnProperty(C.GroupConstants.KEYS.TYPE))if(e[C.GroupConstants.KEYS.TYPE].toLocaleLowerCase()==C.GroupType.Password){if(!e.hasOwnProperty(C.GroupConstants.KEYS.PASSWORD))return void n(new c.CometChatException(N.GROUP_CREATION_ERRORS.EMPTY_PASSWORD));s.setType(C.GROUP_TYPE.PASSWORD),s.setPassword(e[C.GroupConstants.KEYS.PASSWORD])}else s.setType(e[C.GroupConstants.KEYS.TYPE]);else s.setType(C.GROUP_TYPE.PUBLIC);e.hasOwnProperty(C.GroupConstants.KEYS.ICON)&&s.setIcon(e[C.GroupConstants.KEYS.ICON]),e.hasOwnProperty(C.GroupConstants.KEYS.DESCRIPTION)&&s.setDescription(e[C.GroupConstants.KEYS.DESCRIPTION]),e=s}l.makeApiCall("createGroup",{},e).then(function(n){q.joinMuc(e),T.GroupsController.trasformJSONGroup(n.data).setHasJoined(!0),t(T.GroupsController.trasformJSONGroup(n.data))},function(e){n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},t.getGroup=function(e){return new Promise(function(t,n){try{"object"==typeof e&&e.hasOwnProperty("guid")&&(e=e.guid);var r=a.validateId(e);if(r instanceof c.CometChatException)return void n(r);l.makeApiCall("getGroup",{guid:e}).then(function(e){t(T.GroupsController.trasformJSONGroup(e.data))},function(e){n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},t.getJoinedGroups=function(){return new Promise(function(e,t){try{q.getRooms().then(function(t){e(t)},function(e){t(e)})}catch(i){t(new c.CometChatException(i))}})},t.joinGroup=function(e,t,n){return void 0===t&&(t=C.GroupType.Public),void 0===n&&(n=""),new Promise(function(r,s){try{var o,i=a.validateJoinGroup(e,t,n);if(i instanceof c.CometChatException)return void s(i);"object"==typeof e&&(e.hasOwnProperty(C.GroupConstants.KEYS.GUID)?(e.hasOwnProperty(C.GroupConstants.KEYS.TYPE)&&(t=e[C.GroupConstants.KEYS.TYPE],e[C.GroupConstants.KEYS.TYPE].toLocaleLowerCase()===C.GroupType.Password&&e.hasOwnProperty(C.GroupConstants.KEYS.PASSWORD)&&(n=e[C.GroupConstants.KEYS.PASSWORD])),e=e[C.GroupConstants.KEYS.GUID]):s(new c.CometChatException(N.ERRORS.PARAMETER_MISSING))),o=a.isFalsy(n)?new S.Group(e,"name",t):new S.Group(e,"name",t,n),l.makeApiCall("joinGroup",o,o).then(function(e){q.joinMuc(o);var t=T.GroupsController.trasformJSONGroup(e.data[C.ResponseConstants.RESPONSE_KEYS.KEY_DATA][C.ActionConstatnts.ACTION_KEYS.ENTITIES][C.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][C.ActionConstatnts.ACTION_KEYS.ENTITY]);t.setHasJoined(!0),r(t)},function(e){s(new c.CometChatException(e.error))})}catch(i){s(new c.CometChatException(i))}})},t.updateGroup=function(e){return new Promise(function(t,n){try{var r=a.validateUpdateGroup(e);if(r instanceof c.CometChatException)return void n(r);if(!(e instanceof S.Group)){var s=void 0;if(!e.hasOwnProperty(C.GroupConstants.KEYS.GUID))return void n(new c.CometChatException(N.ERRORS.PARAMETER_MISSING));s=new S.Group(C.GroupConstants.KEYS.GUID,"",""),e.hasOwnProperty(C.GroupConstants.KEYS.TYPE)?s.setType(e[C.GroupConstants.KEYS.TYPE]):e[C.GroupConstants.KEYS.TYPE]=C.GROUP_TYPE.PUBLIC,e.hasOwnProperty(C.GroupConstants.KEYS.NAME)&&s.setName(e[C.GroupConstants.KEYS.NAME]),e.hasOwnProperty(C.GroupConstants.KEYS.ICON)&&s.setIcon(e[C.GroupConstants.KEYS.ICON]),e.hasOwnProperty(C.GroupConstants.KEYS.DESCRIPTION)&&s.setDescription(e[C.GroupConstants.KEYS.DESCRIPTION]),e=s}l.makeApiCall("updateGroup",e,e).then(function(e){t(T.GroupsController.trasformJSONGroup(e.data))},function(e){n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},t.deleteGroup=function(e){return new Promise(function(t,n){try{var r=a.validateId(e);if(r instanceof c.CometChatException)return void n(r);l.makeApiCall("deleteGroup",{guid:e}).then(function(e){t(!0)},function(e){n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},t.leaveGroup=function(e){return new Promise(function(t,n){try{var r=a.validateId(e);if(r instanceof c.CometChatException)return void n(r);l.makeApiCall("leaveGroup",{guid:e}).then(function(n){q.leaveMuc(e),t(!0)},function(e){n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},t.kickGroupMember=function(e,t){return new Promise(function(n,r){try{var s=a.validateId(e);if(s instanceof c.CometChatException)return void r(s);var o=a.validateId(t);if(o instanceof c.CometChatException)return void r(o);l.makeApiCall("kickGroupMembers",{guid:e,uid:t}).then(function(e){n(!0)},function(e){r(new c.CometChatException(e.error))})}catch(s){r(new c.CometChatException(s))}})},t.updateGroupMemberScope=function(e,t,n){return new Promise(function(r,s){try{var o=a.validateId(e);if(o instanceof c.CometChatException)return void s(o);var i=a.validateId(t);if(i instanceof c.CometChatException)return void s(i);var u=a.validateScope(n);if(u instanceof c.CometChatException)return void s(u);l.makeApiCall("changeScopeOfMember",{guid:e,uid:t},{scope:n}).then(function(e){r(!0)},function(e){s(new c.CometChatException(e.error))})}catch(o){s(new c.CometChatException(o))}})},t.banGroupMember=function(e,t){return new Promise(function(n,r){try{var s=a.validateId(e);if(s instanceof c.CometChatException)return void r(s);var o=a.validateId(t);if(o instanceof c.CometChatException)return void r(o);l.makeApiCall("banGroupMember",{guid:e,uid:t}).then(function(e){n(!0)},function(e){r(new c.CometChatException(e.error))})}catch(s){r(new c.CometChatException(s))}})},t.unbanGroupMember=function(e,t){return new Promise(function(n,r){try{var s=a.validateId(e);if(s instanceof c.CometChatException)return void r(s);var o=a.validateId(t);if(o instanceof c.CometChatException)return void r(o);l.makeApiCall("unbanGroupMember",{guid:e,uid:t}).then(function(e){n(!0)},function(e){r(new c.CometChatException(e.error))})}catch(s){r(new c.CometChatException(s))}})},t.addMembersToGroup=function(e,t,n){var s=[],o=[],i=[],u=[];return new Promise(function(h,d){try{var p=a.validateId(e);if(p instanceof c.CometChatException)return void d(p);var f=a.validateArray(t);if(f instanceof c.CometChatException)return void d(f);var g=a.validateArray(n);if(g instanceof c.CometChatException)return void d(g);a.isFalsy(t)&&a.isFalsy(n)?d(new c.CometChatException({})):a.isFalsy(t)||a.isFalsy(n)?a.isFalsy(t)?n.map(function(e){u.push(e)}):(t.filter(function(e){if(e.getScope()==C.GROUP_MEMBER_SCOPE.ADMIN)return!0}).map(function(e){s.push(e.getUid())}),t.filter(function(e){if(e.getScope()==C.GROUP_MEMBER_SCOPE.MODERATOR)return!0}).map(function(e){o.push(e.getUid())}),t.filter(function(e){if(e.getScope()==C.GROUP_MEMBER_SCOPE.PARTICIPANT)return!0}).map(function(e){i.push(e.getUid())})):(t.filter(function(e){if(e.getScope()==C.GROUP_MEMBER_SCOPE.ADMIN)return!0}).map(function(e){s.push(e.getUid())}),t.filter(function(e){if(e.getScope()==C.GROUP_MEMBER_SCOPE.MODERATOR)return!0}).map(function(e){o.push(e.getUid())}),t.filter(function(e){if(e.getScope()==C.GROUP_MEMBER_SCOPE.PARTICIPANT)return!0}).map(function(e){i.push(e.getUid())}),n.map(function(e){u.push(e)}));var E={};a.isFalsy(s)||(E=r({},E,{admins:s})),a.isFalsy(i)||(E=r({},E,{participants:i})),a.isFalsy(o)||(E=r({},E,{moderators:o})),a.isFalsy(u)||(E=r({},E,{usersToBan:u})),l.makeApiCall("addMemebersToGroup",{guid:e},E).then(function(e){var t={};Object.keys(e.data.admins).map(function(n){t[n]=e.data.admins[n][C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:e.data.admins[n][C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),Object.keys(e.data.participants).map(function(n){t[n]=e.data.participants[n][C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:e.data.participants[n][C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),Object.keys(e.data.moderators).map(function(n){t[n]=e.data.moderators[n][C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:e.data.moderators[n][C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),Object.keys(e.data.usersToBan).map(function(n){t[n]=e.data.usersToBan[n][C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:e.data.usersToBan[n][C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][C.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),h(t)},function(e){d(new c.CometChatException(e.error))})}catch(h){d(new c.CometChatException(h))}})},t.initiateCall=function(e){var t=this;return new Promise(function(n,r){if(null===t.getActiveCall())try{a.isFalsy(JSON.parse(JSON.stringify(e)).sender)?a.isFalsy(t.getActiveCall())?(e.setStatus(C.CallConstants.CALL_STATUS.INITIATED),e.receiver=e.receiverId.toString(),delete e.receiverId,l.makeApiCall("createCallSession",{},e).then(function(e){var t=E.MessageController.trasformJSONMessge(e[C.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);R.CallController.getInstance().initiateCall(t).then(function(e){n(t)}).catch(function(e){r(new c.CometChatException(e))})},function(e){r(new c.CometChatException(e.error))})):r(new c.CometChatException(C.CALL_ERROR.ERROR_IN_CALLING)):R.CallController.getInstance().initiateCall(e).then(function(t){n(Object.assign(e))}).catch(function(e){r(new c.CometChatException(e))})}catch(t){r(new c.CometChatException(t))}else r(new c.CometChatException(C.CALL_ERROR.CALL_ALREADY_INITIATED))})},t.acceptCall=function(e){var t=this;return new Promise(function(n,r){if(null===t.getActiveCall())try{var s={};s[C.CallConstants.CALL_KEYS.CALL_STATUS]=C.CallConstants.CALL_STATUS.ONGOING,l.makeApiCall("updateCallSession",{sessionid:e},s).then(function(e){var t=E.MessageController.trasformJSONMessge(e[C.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);R.CallController.getInstance().onCallStarted(t),n(t)},function(e){r(new c.CometChatException(e.error))})}catch(s){r(new c.CometChatException(s))}else r(new c.CometChatException(C.CALL_ERROR.CANNOT_ACCEPT_CALL))})},t.rejectCall=function(e,t){try{switch(t){case C.CallConstants.CALL_STATUS.REJECTED:return this.rejectIncomingCall(e);case C.CallConstants.CALL_STATUS.CANCELLED:return this.cancelCall(e);case C.CallConstants.CALL_STATUS.BUSY:return this.sendBusyResponse(e);default:return this.endCall(e)}}catch(e){a.Logger.error("CometChat: rejectCall",e)}},t.endCall=function(e){var t=this;return new Promise(function(n,r){var s=t.getActiveCall();if(null!==s&&s.getSessionId()===e)try{var o={};o[C.CallConstants.CALL_KEYS.CALL_STATUS]=C.CallConstants.CALL_STATUS.ENDED,R.CallController.getInstance().getActiveCall().getJoinedAt()&&(o[C.CallConstants.CALL_KEYS.CALL_JOINED_AT]=R.CallController.getInstance().getActiveCall().getJoinedAt()),l.makeApiCall("updateCallSession",{sessionid:e},o).then(function(e){var t=E.MessageController.trasformJSONMessge(e[C.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);n(t),R.CallController.getInstance().endCall()},function(e){a.Logger.log("calling Log",{error:e});var r=t.getActiveCall();r.setStatus(C.CallConstants.CALL_STATUS.ENDED),n(r),R.CallController.getInstance().endCall()})}catch(s){r(new c.CometChatException(s))}})},t.getActiveCall=function(){try{return R.CallController.getInstance().getActiveCall()}catch(i){a.Logger.error("CometChat: getActiveCall",i)}},t.startCall=function(e,t,n,r){try{R.CallController.getInstance().startCall(t,n,r)}catch(e){a.Logger.error("CometChat: startCall",e)}},t.toggleAudio=function(){try{R.CallController.toggleAudio()}catch(i){a.Logger.error("CometChat: toggleAudio",i)}},t.toggleVideo=function(){try{R.CallController.toggleVideo()}catch(i){a.Logger.error("CometChat: toggleVideo",i)}},t.leaveCall=function(){try{R.CallController.leave()}catch(i){a.Logger.error("CometChat: leaveCall",i)}},t.createCallView=function(e){var n=this;try{return{prop1:this.makeCall,onMessage:function(e){R.CallController.getInstance().getCallListner()._eventListener.onCallEnded(n.getActiveCall()),t.endCall(n.getActiveCall().getSessionId()).then(function(e){a.Logger.info("CometChat: createCallView",e)}).catch(function(e){a.Logger.error("CometChat: createCallView",e)})}}}catch(e){a.Logger.error("CometChat: createCallView",e)}},t.makeCall=function(e,t){try{e.setState(function(e){return r({},e,{uri:t})})}catch(e){a.Logger.error("CometChat: makeCall",e)}},t.rejectIncomingCall=function(e){return new Promise(function(t,n){try{var r={};r[C.CallConstants.CALL_KEYS.CALL_STATUS]=C.CallConstants.CALL_STATUS.REJECTED,l.makeApiCall("updateCallSession",{sessionid:e},r).then(function(e){var n=E.MessageController.trasformJSONMessge(e[C.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);t(n)},function(e){n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},t.cancelCall=function(e){var t=this;return new Promise(function(n,r){try{var s={};s[C.CallConstants.CALL_KEYS.CALL_STATUS]=C.CallConstants.CALL_STATUS.CANCELLED,l.makeApiCall("updateCallSession",{sessionid:e},s).then(function(r){var s=E.MessageController.trasformJSONMessge(r[C.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);t.getActiveCall().getSessionId()===e&&R.CallController.getInstance().endCallSession(),n(s)},function(e){r(new c.CometChatException(e.error))})}catch(s){r(new c.CometChatException(s))}})},t.sendBusyResponse=function(e){return new Promise(function(t,n){try{var r={};r[C.CallConstants.CALL_KEYS.CALL_STATUS]=C.CallConstants.CALL_STATUS.BUSY,l.makeApiCall("updateCallSession",{sessionid:e},r).then(function(e){var n=E.MessageController.trasformJSONMessge(e[C.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);t(n)},function(e){n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},t.sendUnansweredResponse=function(e){return new Promise(function(t,n){try{var r={};r[C.CallConstants.CALL_KEYS.CALL_STATUS]=C.CallConstants.CALL_STATUS.UNANSWERED,l.makeApiCall("updateCallSession",{sessionid:e},r).then(function(e){var n=E.MessageController.trasformJSONMessge(e[C.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);h.XMPPConnectionHelper.getInstance().trigerMessageHandler(Object.assign(n,e[C.ResponseConstants.RESPONSE_KEYS.KEY_DATA])),t(n)},function(e){n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},t.addMessageListener=function(e,t){try{q.addMessageEventListener(e,t)}catch(e){a.Logger.error("CometChat: addMessageListener",e)}},t.removeMessageListener=function(e){try{q.removeMessageEventListener(e)}catch(e){a.Logger.error("CometChat: removeMessageListener",e)}},t.addCallListener=function(e,t){try{q.addCallEventListener(e,t)}catch(e){a.Logger.error("CometChat: addCallListener",e)}},t.removeCallListener=function(e){try{q.removeCallEventListener(e)}catch(e){a.Logger.error("CometChat: removeCallListener",e)}},t.addUserListener=function(e,t){try{q.addUserEventListener(e,t)}catch(e){a.Logger.error("CometChat: addUserListener",e)}},t.removeUserListener=function(e){try{q.removeUserEventListener(e)}catch(e){a.Logger.error("CometChat: removeUserListener",e)}},t.addGroupListener=function(e,t){try{q.addGroupEventListener(e,t)}catch(e){a.Logger.error("CometChat: addGroupListener",e)}},t.removeGroupListener=function(e){try{q.removeGroupEventListener(e)}catch(e){a.Logger.error("CometChat: removeGroupListener",e)}},t.generateAuthToken=function(e){var n=this;return new Promise(function(r,s){try{var o="",u="",h=C.APPINFO.platform,d=C.APPINFO.sdkVersion,p=C.APPINFO.apiVersion;navigator&&(u=navigator.userAgent),t.keyStore.get("deviceId").then(function(i){if(null==(o=i)){var f=n.appId.substr(0,n.appId.length-10)+"_"+J()+"_"+(new Date).getTime();o=a.SHA1(f),t.keyStore.set("deviceId",o)}l.makeApiCall("authToken",{uid:e},{platform:h,userAgent:u,deviceId:o,appInfo:{version:d,apiVersion:p}}).then(function(e){r(e.data)}).catch(function(e){s(new c.CometChatException(e.error))})},function(e){a.Logger.error("Got error while fetching data from key store",e)})}catch(i){s(new c.CometChatException(i))}})},t.XMPPLogin=function(e,t,n){var r=this;try{var s=!1;this.timeOut+this.timeIncrements<3e4&&(this.timeOut=this.timeOut+this.timeIncrements,this.timeIncrements=this.timeIncrements+2e3);var o=!0;q.XMMPLogin(e.getUid(),e.getWsChannel().secret,this.fallback,function(i){switch(i){case d.Strophe.Status.CONNFAIL:a.Logger.info("CometChat: XMPPLogin","In connection fail state"),s=!0,o&&setTimeout(function(){r.fallback=!r.fallback,r.XMPPLogin(e,t,n)},r.timeOut);break;case d.Strophe.Status.CONNECTING:a.Logger.info("CometChat: XMPPLogin","In connecting state");break;case d.Strophe.Status.CONNECTED:a.Logger.info("CometChat: XMPPLogin","In connected state"),r.timeOut=0,r.timeIncrements=1e3,s=!1,r.localStorage.set("user",e),t(new u.User(e));break;case d.Strophe.Status.DISCONNECTED:a.Logger.info("CometChat: XMPPLogin","In disconnected state"),o&&!s&&setTimeout(function(){r.fallback=!r.fallback,r.XMPPLogin(e,t,n)},r.timeOut);break;case d.Strophe.Status.DISCONNECTING:o=!1,a.Logger.info("CometChat: XMPPLogin","In disconnecting state");break;case d.Strophe.Status.AUTHFAIL:r.timeOut=0,r.timeIncrements=1e3,s=!1,n(new c.CometChatException(N.LOGIN_ERROR.XMPP_AUTH_FAIL))}})}catch(i){return void n(new c.CometChatException(i))}},t.getAppSettings=function(){return new Promise(function(e,t){try{l.makeApiCall("appSettings").then(function(t){p.LocalStorage.getInstance().set("app_settings",t.data),e(t.data)},function(e){t(new c.CometChatException(e.error))})}catch(i){t(new c.CometChatException(i))}})},t.logout=function(){var e=this;return new Promise(function(t,n){try{l.makeApiCall("userLogout").then(function(n){e.clearCache(),e.apiKey=void 0,e.user=void 0,e.authToken=void 0,e.cometChat=void 0,h.XMPPConnectionHelper.getInstance().XMPPDisconnect(),t(n.data)},function(r){e.clearCache(),e.apiKey=void 0,e.user=void 0,e.authToken=void 0,e.cometChat=void 0,h.XMPPConnectionHelper.getInstance().XMPPDisconnect(),new c.CometChatException(r.error).code==N.SERVER_ERRORS.AUTH_ERR.code?t({}):n(new c.CometChatException(r.error))})}catch(i){n(new c.CometChatException(i))}})},t.isExtensionEnabled=function(e){return new Promise(function(t,n){try{V.ExtensionController.getExtensionList().then(function(n){Object.keys(n).map(function(n){n==e&&t(!0)}),t(!1)},function(e){a.Logger.log("error while fetching exntension list",e),t(!1)})}catch(i){n(new c.CometChatException(i))}})},t.clearCache=function(){try{this.messagesStore.clearStore(),this.userStore.clearStore(),this.localStorage.clearStore()}catch(i){a.Logger.error("CometChat: clearCache",i)}},t.typingTimer=function(){try{setInterval(function(){D.TypingNotificationController.clearTimer()},500)}catch(i){a.Logger.error("CometChat: typingTimer",i)}},t.initialzed=!1,t.isNative=!1,t.CometChatException=c.CometChatException,t.TextMessage=g.TextMessage,t.MediaMessage=f.MediaMessage,t.CustomMessage=Y.CustomMessage,t.Action=O.Action,t.Call=I.Call,t.TypingIndicator=U.TypingIndicator,t.Group=S.Group,t.AppUser=u.User,t.User=u.User,t.GroupMember=G.GroupMember,t.Conversation=j.Conversation,t.USER_STATUS={ONLINE:C.PresenceConstatnts.STATUS.ONLINE,OFFLINE:C.PresenceConstatnts.STATUS.OFFLINE},t.MessagesRequest=L.DefaultMessagesRequest,t.MessagesRequestBuilder=L.DefaultMessagesRequestBuilder,t.UsersRequest=b.UsersRequest,t.UsersRequestBuilder=b.UsersRequestBuilder,t.ConversationsRequest=P.ConversationsRequest,t.ConversationsRequestBuilder=P.ConversationsRequestBuilder,t.BlockedUsersRequest=B.BlockedUsersRequest,t.BlockedUsersRequestBuilder=B.BlockedUsersRequestBuilder,t.GroupsRequest=w.GroupsRequest,t.GroupsRequestBuilder=w.GroupsRequestBuilder,t.GroupMembersRequest=M.GroupMembersRequest,t.GroupMembersRequestBuilder=M.GroupMembersRequestBuilder,t.BannedMembersRequest=M.GroupMembersRequest,t.BannedMembersRequestBuilder=M.GroupOutCastMembersRequestBuilder,t.AppSettings=H.AppSettings,t.AppSettingsBuilder=H.AppSettingsBuilder,t.MessageListener=A.MessageEventListener,t.UserListener=A.UserEventListener,t.GroupListener=A.GroupEventListener,t.OngoingCallListener=A.UserCallEventListener,t.CallListener=A.CallEventListener,t.MESSAGE_TYPE=C.MessageConstatnts.TYPE,t.CATEGORY_MESSAGE=C.MessageConstatnts.CATEGORY.MESSAGE,t.CATEGORY_ACTION=C.MessageConstatnts.CATEGORY.ACTION,t.CATEGORY_CALL=C.MessageConstatnts.CATEGORY.CALL,t.ACTION_TYPE=C.ActionConstatnts.ACTIONS,t.CALL_TYPE=C.CallConstants.CALL_TYPE,t.RECEIVER_TYPE=C.MessageConstatnts.RECEIVER_TYPE,t.CALL_STATUS=C.CallConstants.CALL_STATUS,t.CallController=R.CallController,t.GROUP_MEMBER_SCOPE=C.GROUP_MEMBER_SCOPE,t.GROUP_TYPE=C.GROUP_TYPE,t.MESSAGE_REQUEST=C.MessageConstatnts.PAGINATION.CURSOR_FILEDS,t.CometChatExtension=k.CometChatExtension,t.ExtensionManager=F.ExtensionManager,t.isCall=!1,t.endpointFactory=new i.EndpointFactory,t.startTypingCount=0,t.endTypingCount=0,t.CometChatHelper=K.CometChatHelper,t.fallback=!1,t.timeOut=0,t.timeIncrements=1e3,t}();t.CometChat=X}).call(this,n(26))},function(e,t,n){"use strict";t.__esModule=!0;var r=n(40),s=n(3),o=n(1),i=n(2);function a(e,t,n,r,s){var i;return void 0===e&&(e=""),void 0===t&&(t="GET"),void 0===n&&(n={}),void 0===r&&(r={}),n=o.isFalsy(n)?void 0:("GET"==t&&(e+="?",Object.keys(n).map(function(t){e=e+t+"="+n[t]+"&"}),n=void 0),s&&(i=new FormData,Object.keys(n).map(function(e){"data"!=e?"metadata"!=e&&i.append(e,n[e]):i.append(e,JSON.stringify(n[e]))})),JSON.stringify(n)),fetch(e,{method:t,mode:"cors",cache:"no-cache",headers:r,redirect:"follow",referrer:"no-referrer",body:s?i:n})}t.makeApiCall=function(e,t,n,o){void 0===e&&(e=""),void 0===t&&(t={}),void 0===n&&(n={});var c=s.CometChat.getInstance();return new Promise(function(l,u){try{r.getEndPoint(e,t).then(function(t){var r={appId:s.CometChat.getAppId(),Accept:"application/json"};o||(r["Content-Type"]="application/json"),t.hasOwnProperty("isAdminApi")&&t.isAdminApi?c.getApiKey()?r.apiKey=c.getApiKey():u({error:{code:"API_KEY_NOT_SET",message:"An apiKey is needed to use the "+e+" api.",name:"API_KEY_NOT_SET"}}):c.getAuthToken()?r.authToken=c.getAuthToken():u({error:{code:"USER_NOT_LOGED_IN",message:"An authToken is need to use the "+e+" api.",name:"user not logged in"}}),a(t.endpoint,t.method,n,r,o).then(function(e){return e.json()}).then(function(e){e.hasOwnProperty("data")?(e.data.hasOwnProperty("authToken")&&s.CometChat.setAuthToken(e.data.authToken),l(e)):u(e)}).catch(function(e){return u})}).catch(function(e){return u})}catch(t){u(new i.CometChatException(t))}})},t.makeAdminApiCall=function(e,t,n,o){void 0===e&&(e=""),void 0===t&&(t={}),void 0===n&&(n={});var i=s.CometChat.getInstance();return new Promise(function(c,l){r.getEndPoint(e,t).then(function(t){var r={appId:s.CometChat.getAppId(),Accept:"application/json"};o||(r["Content-Type"]="application/json"),t.hasOwnProperty("isAdminApi")&&t.isAdminApi?i.getApiKey()?r.apiKey=i.getApiKey():l({error:"An apiKey is need to use the "+e+" api."}):i.getAuthToken()?r.authToken=i.getAuthToken():l({error:"An authToken is need to use the "+e+" api."}),a(t.endpoint,t.method,n,r,o).then(function(e){return e.json()}).then(function(e){e.hasOwnProperty("data")?(e.data.hasOwnProperty("authToken")&&s.CometChat.setAuthToken(e.data.authToken),c(e)):l(e)}).catch(function(e){return l})}).catch(function(e){return l})})},t.postData=a},function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var o=n(2),i=n(14),a=n(0),c=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.hasBlockedMe=!1,this.blockedByMe=!1,1===e.length)typeof e[0]===a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?this.uid=e[0]:(this.uid=e[0].uid,this.name=e[0].name,e[0].authToken&&(this.authToken=e[0].authToken),e[0].avatar&&(this.avatar=e[0].avatar),e[0].credits&&(this.credits=e[0].credits),e[0].lastActiveAt&&(this.lastActiveAt=e[0].lastActiveAt),e[0].link&&(this.link=e[0].link),e[0].metadata&&(this.metadata=e[0].metadata),e[0].role&&(this.role=e[0].role),e[0].statusMessage&&(this.statusMessage=e[0].statusMessage));else{if(2!==e.length)throw new o.CometChatException(i.ERRORS.PARAMETER_MISSING);this.uid=e[0],this.name=e[1]}}return e.prototype.getUid=function(){return this.uid},e.prototype.setUid=function(e){this.uid=e},e.prototype.getName=function(){return this.name},e.prototype.setName=function(e){e&&(this.name=e)},e.prototype.getAuthToken=function(){return this.authToken},e.prototype.setAuthToken=function(e){this.authToken=e},e.prototype.getAvatar=function(){return this.avatar},e.prototype.setAvatar=function(e){this.avatar=e},e.prototype.getCredits=function(){return this.credits},e.prototype.setCredits=function(e){this.credits=e},e.prototype.getLastActiveAt=function(){return this.lastActiveAt},e.prototype.setLastActiveAt=function(e){this.lastActiveAt=e},e.prototype.getLink=function(){return this.link},e.prototype.setLink=function(e){return this.link=e},e.prototype.getMetadata=function(){return this.metadata},e.prototype.setMetadata=function(e){this.metadata=e},e.prototype.getRole=function(){return this.role},e.prototype.setRole=function(e){this.role=e},e.prototype.getStatus=function(){return this.status},e.prototype.setStatus=function(e){this.status=e},e.prototype.getStatusMessage=function(){return this.statusMessage},e.prototype.setStatusMessage=function(e){this.statusMessage=e},e.prototype.setBlockedByMe=function(e){this.blockedByMe=e},e.prototype.getBlockedByMe=function(){return this.blockedByMe},e.prototype.setHasBlockedMe=function(e){this.hasBlockedMe=e},e.prototype.getHasBlockedMe=function(){return this.hasBlockedMe},e}(),l=function(e){function t(t){var n=e.call(this,t)||this;return n.wsChannel=t.wsChannel,n}return s(t,e),t.prototype.getWsChannel=function(){return this.wsChannel},t}(t.User=c);t.Me=l},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),s=function(){function e(e,t,n,r,s,o,i){this.hasJoined=!1,this.guid=e,t&&(this.name=t),n&&(this.type=n),!r&&""!==r||"password"!=n||(this.password=r),(s||""===s)&&(this.icon=s),(o||""===o)&&(this.description=o),i&&(this.hasJoined=i)}return e.prototype.getGuid=function(){return this.guid},e.prototype.setGuid=function(e){this.guid=e},e.prototype.getName=function(){return this.name},e.prototype.setName=function(e){e&&(this.name=e)},e.prototype.getType=function(){return this.type},e.prototype.setType=function(e){this.type=e},e.prototype.setPassword=function(e){this.password=e},e.prototype.getIcon=function(){return this.icon},e.prototype.setIcon=function(e){this.icon=e},e.prototype.getDescription=function(){return this.description},e.prototype.setDescription=function(e){this.description=e},e.prototype.getOwner=function(){return this.owner},e.prototype.setOwner=function(e){this.owner=e},e.prototype.getMetadata=function(){return this.metadata},e.prototype.setMetadata=function(e){this.metadata=e},e.prototype.getCreatedAt=function(){return this.createdAt},e.prototype.setCreatedAt=function(e){this.createdAt=e},e.prototype.getUpdatedAt=function(){return this.updatedAt},e.prototype.setUpdatedAt=function(e){this.updatedAt=e},e.prototype.getHasJoined=function(){return this.hasJoined},e.prototype.setHasJoined=function(e){this.hasJoined=e},e.prototype.getWsChannel=function(){return this.wsChannel},e.prototype.setWsChannel=function(e){this.wsChannel=e},e.prototype.setScope=function(e){this.scope=e},e.prototype.getScope=function(){return this.scope},e.prototype.getJoinedAt=function(){return this.joinedAt},e.prototype.setJoinedAt=function(e){this.joinedAt=e},e.Type=e.TYPE=r.GroupType,e}();t.Group=s},function(e,t,n){"use strict";t.__esModule=!0;var r=n(17),s=n(10),o=n(18),i=n(4),a=n(21),c=n(1),l=n(0),u=n(13),h=n(22),d=n(23),p=n(42),f=n(2),g=n(43),E=n(19),m=n(3),_=n(8),C=function(){function t(){}return t.trasformXMPPMessage=function(e){var t={};try{var n=JSON.parse(unescape(s.parseHTML(e.getElementsByTagName("body")[0])).trim().toString());t=this.trasformJSONMessge(n)}catch(e){c.Logger.error("MessageController: transformXMPPMessage",{e})}return t},t.checkIfCabon=function(e){try{return 0<e.getElementsByTagName("forwarded").length&&e.getElementsByTagName("forwarded"),0<e.getElementsByTagName("forwarded").length}catch(e){c.Logger.error("MessageController: checkIfCabon",{e})}},t.trasformJSONMessge=function(e){try{var t=void 0;switch(e[l.MessageConstatnts.KEYS.CATEGORY]){case l.MessageConstatnts.CATEGORY.ACTION:t=h.Action.actionFromJSON(e);break;case l.MessageConstatnts.CATEGORY.CALL:t=d.Call.callFromJSON(e);break;case l.MessageConstatnts.CATEGORY.MESSAGE:switch(e[l.MessageConstatnts.KEYS.TYPE]){case l.MessageConstatnts.TYPE.TEXT:t=new r.TextMessage(e[l.MessageConstatnts.KEYS.RECEIVER],e[l.MessageConstatnts.KEYS.DATA][l.MessageConstatnts.KEYS.TEXT],e[l.MessageConstatnts.KEYS.RECEIVER_TYPE]);break;case l.MessageConstatnts.TYPE.CUSTOM:t=new E.CustomMessage(e[l.MessageConstatnts.KEYS.RECEIVER],e[l.MessageConstatnts.KEYS.DATA][l.MessageConstatnts.KEYS.CUSTOM_DATA],e[l.MessageConstatnts.KEYS.RECEIVER_TYPE]);break;default:if(t=new o.MediaMessage(e[l.MessageConstatnts.KEYS.RECEIVER],e[l.MessageConstatnts.KEYS.DATA][l.MessageConstatnts.KEYS.URL],e[l.MessageConstatnts.KEYS.TYPE],e[l.MessageConstatnts.KEYS.RECEIVER_TYPE]),e.hasOwnProperty(l.MessageConstatnts.KEYS.DATA)){var n=e[l.MessageConstatnts.KEYS.DATA];if(n.hasOwnProperty(l.MessageConstatnts.KEYS.ATTATCHMENTS)){var s,i=n[l.MessageConstatnts.KEYS.ATTATCHMENTS];new Array,i.map(function(e){s=new g.Attachment(e)}),t.setAttachment(s)}n.hasOwnProperty(l.MessageConstatnts.KEYS.TEXT)&&t.setCaption(n[l.MessageConstatnts.KEYS.TEXT])}t.hasOwnProperty("file")&&delete t.file}break;case l.MessageConstatnts.CATEGORY.CUSTOM:t=new E.CustomMessage(e[l.MessageConstatnts.KEYS.RECEIVER],e[l.MessageConstatnts.KEYS.DATA][l.MessageConstatnts.KEYS.CUSTOM_DATA],e[l.MessageConstatnts.KEYS.RECEIVER_TYPE],e.type)}e[l.MessageConstatnts.KEYS.MY_RECEIPTS]&&(e[l.MessageConstatnts.KEYS.MY_RECEIPTS]=e[l.MessageConstatnts.KEYS.MY_RECEIPTS],Object.keys(e[l.MessageConstatnts.KEYS.MY_RECEIPTS]).map(function(t){var n=new p.MessageReceipt;t==l.DELIVERY_RECEIPTS.DELIVERED_AT&&(n.setReceiptType(n.RECEIPT_TYPE.DELIVERY_RECEIPT),n.setDeliveredAt(e[l.MessageConstatnts.KEYS.MY_RECEIPTS][l.DELIVERY_RECEIPTS.DELIVERED_AT]),c.isFalsy(e[l.MessageConstatnts.KEYS.MY_RECEIPTS][l.DELIVERY_RECEIPTS.RECIPIENT])?e[l.DELIVERY_RECEIPTS.DELIVERED_TO_ME_AT]=e[l.MessageConstatnts.KEYS.MY_RECEIPTS][l.DELIVERY_RECEIPTS.DELIVERED_AT]:n.setSender(e[l.MessageConstatnts.KEYS.MY_RECEIPTS][l.DELIVERY_RECEIPTS.RECIPIENT]),n.setReceiverType(e[l.MessageConstatnts.KEYS.RECEIVER_TYPE]),n.setReceiver(e[l.MessageConstatnts.KEYS.RECEIVER])),e[l.MessageConstatnts.KEYS.MY_RECEIPTS][l.READ_RECEIPTS.READ_AT]&&(n.setReceiptType(n.RECEIPT_TYPE.READ_RECEIPT),n.setReadAt(e[l.MessageConstatnts.KEYS.MY_RECEIPTS][l.READ_RECEIPTS.READ_AT]),c.isFalsy(e[l.MessageConstatnts.KEYS.MY_RECEIPTS][l.READ_RECEIPTS.RECIPIENT])?e[l.READ_RECEIPTS.READ_BY_ME_AT]=e[l.MessageConstatnts.KEYS.MY_RECEIPTS][l.READ_RECEIPTS.READ_AT]:n.setSender(e[l.MessageConstatnts.KEYS.MY_RECEIPTS][l.READ_RECEIPTS.RECIPIENT]),n.setReceiverType(e[l.MessageConstatnts.KEYS.RECEIVER_TYPE]),n.setReceiver(e[l.MessageConstatnts.KEYS.RECEIVER]))}));try{if(Object.assign(t,e),(e=t)instanceof r.TextMessage)e.setSender(e.getSender()),e.setReceiver(e.getReceiver()),e.getData()[l.MessageConstatnts.KEYS.METADATA]&&e.setMetadata(e.getData()[l.MessageConstatnts.KEYS.METADATA]);else if(e instanceof o.MediaMessage)e.getData()[l.MessageConstatnts.KEYS.METADATA]&&e.setMetadata(e.getData()[l.MessageConstatnts.KEYS.METADATA]),e.setSender(e.getSender()),e.setReceiver(e.getReceiver());else if(e instanceof h.Action)e.setSender(e.getSender()),e.setReceiver(e.getActionFor()),e.setActionBy(e.getActionBy()),e.setActionOn(e.getActionOn()),e.setActionFor(e.getActionFor()),e.setMessage(e.getMessage());else if(e instanceof d.Call){try{e.setSender(e.getSender())}catch(t){c.Logger.error("MessageController: trasformJSONMessge: setSender",t)}try{e.setCallInitiator(e.getCallInitiator())}catch(t){c.Logger.error("MessageController: trasformJSONMessge: setCallInitiator",t)}try{e.setReceiver(e.getCallReceiver()),e.setCallReceiver(e.getCallReceiver())}catch(t){c.Logger.error("MessageController: trasformJSONMessge: setCallreceiver",t)}}else e instanceof E.CustomMessage&&(e.getData()[l.MessageConstatnts.KEYS.METADATA]&&e.setMetadata(e.getData()[l.MessageConstatnts.KEYS.METADATA]),e.setSubType(e.getData()[l.MessageConstatnts.KEYS.CUSTOM_SUB_TYPE]),e.setSender(e.getSender()),e.setReceiver(e.getReceiver()))}catch(t){c.Logger.error("MessageController: trasformJSONMessge: Main",t),e=null}return e}catch(t){c.Logger.error("MessageController: trasformJSONMessge",t)}},t.getOfflineHistory=function(e,n){void 0===e&&(e=1e3),void 0===n&&(n=1);try{a.MessagesStore.getInstance();var r=[];i.makeApiCall("getMessages",{},this.createData(e,n)).then(function(e){return c.isFalsy(e.data)||e.data.map(function(e){u.XMPPConnectionHelper.getInstance().trigerMessageHandler(e),r.push(t.trasformJSONMessge(e))}),!0})}catch(e){c.Logger.error("MessageController: getOfflineHistory",e)}},t.getAllMessage=function(e,n,r,s){var o=this;void 0===e&&(e=100);var a=[];return new Promise(function(l,u){try{i.makeApiCall("getMessages",{},o.createAllMessageData(e,n,r,s)).then(function(e){c.isFalsy(e.data)||(e.data.map(function(e){a.push(t.trasformJSONMessge(e))}),l(a))},function(e){c.Logger.error("Error on fetching all message",e),l([])})}catch(e){u(new f.CometChatException(e))}})},t.createData=function(e,t){return void 0===t&&(t=0),{per_page:e,cursorValue:t,cursorField:l.MessageConstatnts.PAGINATION.CURSOR_FILEDS.ID,cursorAffix:c.isFalsy(t)?l.MessageConstatnts.PAGINATION.AFFIX.PREPEND:l.MessageConstatnts.PAGINATION.AFFIX.APPEND}},t.createAllMessageData=function(e,t,n,r){return{per_page:e,cursorValue:t,cursorField:n,cursorAffix:r}},t.isDeliveryReceipt=function(e){try{return 0<e.getElementsByTagName(l.DELIVERY_RECEIPTS.RECEIVED).length}catch(e){c.Logger.error("MessageController: isDeliveryReceipts",e)}},t.isReadRceipt=function(e){try{return 0<e.getElementsByTagName(l.READ_RECEIPTS.READ).length}catch(e){c.Logger.error("MessageController: isDeliveryReceipts",e)}},t.processDeliveryReceipt=function(t){return new Promise(function(n,r){try{var o=t.getElementsByTagName(l.DELIVERY_RECEIPTS.RECEIVED)[0],i=t.getElementsByTagName(l.DELIVERY_RECEIPTS.DELIVERED_AT)[0];u.XMPPConnectionHelper.getInstance().getUsersVCard(s.getUidFromJid(t.getAttribute(l.MessageConstatnts.XMPP_KEYS.FROM)),function(e){var r=new p.MessageReceipt;r.setSender(e),o.getAttribute(l.DELIVERY_RECEIPTS.RECEIVER_TYPE)==l.MessageConstatnts.RECEIVER_TYPE.GROUP?(r.setReceiverType(l.MessageConstatnts.RECEIVER_TYPE.GROUP),r.setReceiver(o.getAttribute(l.DELIVERY_RECEIPTS.RECEIVER_ID))):(r.setReceiverType(l.MessageConstatnts.RECEIVER_TYPE.USER),r.setReceiver(s.getUidFromJid(t.getAttribute(l.MessageConstatnts.XMPP_KEYS.TO)))),r.setReceiptType(r.RECEIPT_TYPE.DELIVERY_RECEIPT),r.setMessageId(s.getmessageIdFromStanzaId(o.getAttribute(l.DELIVERY_RECEIPTS.ID))),r.setTimestamp(i.getAttribute(l.DELIVERY_RECEIPTS.TIME)),r.setDeliveredAt(i.getAttribute(l.DELIVERY_RECEIPTS.TIME)),n(r)})}catch(e){r(new f.CometChatException(e))}})},t.processReadReceipt=function(t){return new Promise(function(n,r){try{var o=t.getElementsByTagName(l.READ_RECEIPTS.READ)[0],i=t.getElementsByTagName(l.READ_RECEIPTS.READ_AT)[0];u.XMPPConnectionHelper.getInstance().getUsersVCard(s.getUidFromJid(t.getAttribute(l.MessageConstatnts.XMPP_KEYS.FROM)),function(e){var r=new p.MessageReceipt;r.setSender(e),o.getAttribute(l.READ_RECEIPTS.RECEIVER_TYPE)==l.MessageConstatnts.RECEIVER_TYPE.GROUP?(r.setReceiverType(l.MessageConstatnts.RECEIVER_TYPE.GROUP),r.setReceiver(o.getAttribute(l.READ_RECEIPTS.RECEIVER_ID))):(r.setReceiverType(l.MessageConstatnts.RECEIVER_TYPE.USER),r.setReceiver(s.getUidFromJid(t.getAttribute(l.MessageConstatnts.XMPP_KEYS.TO)))),r.setReceiptType(r.RECEIPT_TYPE.READ_RECEIPT),r.setMessageId(s.getmessageIdFromStanzaId(o.getAttribute(l.READ_RECEIPTS.ID))),r.setTimestamp(i.getAttribute(l.READ_RECEIPTS.TIME)),r.setReadAt(i.getAttribute(l.READ_RECEIPTS.TIME)),n(r)})}catch(e){r(new f.CometChatException(e))}})},t.getReceiptsFromJSON=function(e){return new Promise(function(t,n){try{var r=[];m.CometChat.getLoggedInUser().then(function(n){c.isFalsy(e.receipts)?t([]):(e.receipts.data.map(function(t){var s=new p.MessageReceipt;t[l.DELIVERY_RECEIPTS.DELIVERED_AT]&&(s.setReceiptType(s.RECEIPT_TYPE.DELIVERY_RECEIPT),s.setDeliveredAt(t[l.DELIVERY_RECEIPTS.DELIVERED_AT]),s.setTimestamp(t[l.DELIVERY_RECEIPTS.DELIVERED_AT]),c.isFalsy(t[l.DELIVERY_RECEIPTS.RECIPIENT])?s.setSender(n):s.setSender(_.UsersController.trasformJSONUser(t[l.DELIVERY_RECEIPTS.RECIPIENT])),s.setReceiverType(e[l.MessageConstatnts.KEYS.RECEIVER_TYPE]),s.setReceiver(e[l.MessageConstatnts.KEYS.RECEIVER])),t[l.READ_RECEIPTS.READ_AT]&&(s.setReceiptType(s.RECEIPT_TYPE.READ_RECEIPT),s.setReadAt(t[l.READ_RECEIPTS.READ_AT]),s.setTimestamp(t[t[l.READ_RECEIPTS.READ_AT]]),c.isFalsy(t[l.READ_RECEIPTS.RECIPIENT])?s.setSender(n):s.setSender(_.UsersController.trasformJSONUser(t[l.READ_RECEIPTS.RECIPIENT])),s.setReceiverType(e[l.MessageConstatnts.KEYS.RECEIVER_TYPE]),s.setReceiver(e[l.MessageConstatnts.KEYS.RECEIVER])),r.push(s)}),t(r))})}catch(t){n(new f.CometChatException(t))}})},t}();t.MessageController=C},function(e,t,n){"use strict";t.__esModule=!0;var r=n(5),s=n(1),o=function(){function e(){}return e.trasformJSONUser=function(e){var t;try{"offline"!=e.status&&(e.status="online"),t=new r.User(e),Object.assign(t,e),e=t}catch(e){s.Logger.error("UsersController:transformJSONUser",e)}return e},e}();t.UsersController=o},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),s=n(0),o=n(11),i=n(3),a=n(2),c=function(){function e(e){this.store=s.constants.DEFAULT_STORE,r.isFalsy(e)||(this.store=e),this.localStore=o.createInstance({name:r.format(s.LOCAL_STORE.STORE_STRING,i.CometChat.getAppId(),s.LOCAL_STORE.COMMON_STORE)}),this.localStore.setDriver([o.LOCALSTORAGE,o.INDEXEDDB,o.WEBSQL])}return e.getInstance=function(){return null==e.localStorage&&(e.localStorage=new e),e.localStorage},e.prototype.set=function(e,t){return this.localStore.setItem(e,JSON.stringify(t))},e.prototype.remove=function(e){this.localStore.removeItem(e)},e.prototype.get=function(e){var t=this;return new Promise(function(n,r){try{t.localStore.getItem(e).then(function(t){try{n(JSON.parse(t))}catch(e){n(t)}},function(e){r(e)})}catch(e){r(new a.CometChatException(e))}})},e.prototype.clearStore=function(){return this.localStore.clear()},e.prototype.clear=function(e){},e.prototype.selectStore=function(e){this.store=e},e.localStorage=null,e}();t.LocalStorage=c},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),s=n(1),o=n(3),i=n(2);t.getUidFromJid=function(e){try{return e.substring(e.lastIndexOf("]")+1,e.lastIndexOf("@"))}catch(e){s.Logger.error("XMPPUtils: getUidFromJid",e)}},t.getappIdFromJid=function(e){try{return e.substring(e.lastIndexOf("[")+1,e.lastIndexOf("]"))}catch(e){s.Logger.error("XMPPUtils: getappIdFromJid",e)}},t.getmessageIdFromStanzaId=function(t){try{return t?t.substring(t.lastIndexOf("]")+1,t.length):t}catch(e){return s.Logger.error("XMPPUtils: getmessageIdFromStanzaId",e),t}},t.parseHTML=function(t){try{return void 0!==t?t.textContent:t}catch(e){return s.Logger.error("XMPPUtils: parseHTML",e),t}},t.getJidFromUid=function(t){return new Promise(function(n,a){try{s.getAppSettings().then(function(e){n(s.format(r.XMPP.bare_jid_string,o.CometChat.getAppId(),t,e[r.APP_SETTINGS.KEYS.CHAT_HOST]))},function(e){n(s.format(r.XMPP.bare_jid_string,o.CometChat.getAppId(),t,r.XMPP.host))})}catch(e){a(new i.CometChatException(e))}})},t.getGUIDFromJID=function(e){try{return e.substring(e.indexOf("]")+1,e.indexOf("@"))}catch(e){s.Logger.error("XMPPUtils: getGUIDFromJID",e)}},t.getGroupJidFromGUID=function(t){return new Promise(function(n,a){try{s.getAppSettings().then(function(e){n(s.format(r.XMPP.muc_jid_string,o.CometChat.getAppId(),t,e[r.APP_SETTINGS.KEYS.GROUP_SERVICE],e[r.APP_SETTINGS.KEYS.CHAT_HOST]))},function(e){n(s.format(r.XMPP.muc_jid_string,o.CometChat.getAppId(),t,o.CometChat.getAppId(),r.XMPP.host))})}catch(e){a(new i.CometChatException(e))}})},t.getFullJidForGroup=function(e){try{return e.substring(e.indexOf("/")+1)}catch(e){s.Logger.error("XMPPUtils: getFullJidForGroup",e)}},t.getGroupJidFullGroupJid=function(e){try{return e.substring(0,e.indexOf("/"))}catch(e){s.Logger.error("XMPPUtils: getGroupJidFullGroupJid",e)}}},function(e,t,n){(function(t){e.exports=function e(t,n,r){function s(i,a){if(!n[i]){if(!t[i]){if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){return s(t[i][1][e]||e)},l,l.exports,e,t,n,r)}return n[i].exports}for(var o=!1,i=0;i<r.length;i++)s(r[i]);return s}({1:[function(e,n,r){(function(e){"use strict";var t,r,s=e.MutationObserver||e.WebKitMutationObserver;if(s){var o=0,i=new s(u),a=e.document.createTextNode("");i.observe(a,{characterData:!0}),t=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,t=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}n.exports=function(e){1!==l.push(e)||r||t()}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function s(){}var o={},i=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==s&&p(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,t,n){r(function(){var r;try{r=t(n)}catch(r){return o.reject(e,r)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)})}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function s(t){n||(n=!0,o.resolve(e,t))}var i=f(function(){t(s,r)});"error"===i.status&&r(i.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=l).prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===i)return this;var n=new this.constructor(s);return this.state!==c?h(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){o.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=f(d,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=a,e.outcome=t;for(var s=-1,i=e.queue.length;++s<i;)e.queue[s].callFulfilled(t)}return e},o.reject=function(e,t){e.state=i,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:o.resolve(new this(s),e)},l.reject=function(e){var t=new this(s);return o.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i=new Array(n),a=0,c=-1,l=new this(s);++c<n;)u(e[c],c);return l;function u(e,s){t.resolve(e).then(function(e){i[s]=e,++a!==n||r||(r=!0,o.resolve(l,i))},function(e){r||(r=!0,o.reject(l,e))})}},l.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r=-1,i=new this(s);++r<t;)this.resolve(e[r]).then(function(e){n||(n=!0,o.resolve(i,e))},function(e){n||(n=!0,o.reject(i,e))});return i}},{1:1}],3:[function(e,n,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),s=0;s<t.length;s+=1)r.append(t[s]);return r.getBlob(n.type)}}"undefined"==typeof Promise&&e(3);var i=Promise;function a(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function l(e){return"string"!=typeof e&&(e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",d=void 0,p={},f=Object.prototype.toString,g="readonly",E="readwrite";function m(e){return"boolean"==typeof d?i.resolve(d):(t=e,new i(function(e){var n=t.transaction(h,E),r=o([""]);n.objectStore(h).put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||43<=parseInt(t[1],10))}}).catch(function(){return!1})).then(function(e){return d=e});var t}function _(e){var t=p[e.name],n={};n.promise=new i(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady=t.dbReady?t.dbReady.then(function(){return n.promise}):n.promise}function C(e){var t=p[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function S(e,t){var n=p[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function T(e,t){return new i(function(n,r){if(p[e.name]=p[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);_(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=s.open.apply(s,o);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(h)}catch(t){if("ConstraintError"!==t.name)throw t}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){n(i.result),C(e)}})}function y(e){return T(e,!1)}function v(e){return T(e,!0)}function A(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version>e.db.version;if(e.version<e.db.version&&(e.version=e.db.version),r||n){if(n){var s=e.db.version+1;s>e.version&&(e.version=s)}return!0}return!1}function I(e){return o([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),s=0;s<t;s++)r[s]=e.charCodeAt(s);return n}(atob(e.data))],{type:e.type})}function R(e){return e&&e.__local_forage_encoded_blob}function N(e){var t=this,n=t._initReady().then(function(){var e=p[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return c(n,e,e),n}function O(e,t,n,r){void 0===r&&(r=1);try{var s=e.db.transaction(e.storeName,t);n(null,s)}catch(s){if(0<r&&(!e.db||"InvalidStateError"===s.name||"NotFoundError"===s.name))return i.resolve().then(function(){if(!e.db||"NotFoundError"===s.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),v(e)}).then(function(){return function(e){_(e);for(var t=p[e.name],n=t.forages,r=0;r<n.length;r++){var s=n[r];s._dbInfo.db&&(s._dbInfo.db.close(),s._dbInfo.db=null)}return e.db=null,y(e).then(function(t){return e.db=t,A(e)?v(e):t}).then(function(r){e.db=t.db=r;for(var s=0;s<n.length;s++)n[s]._dbInfo.db=r}).catch(function(t){throw S(e,t),t})}(e).then(function(){O(e,t,n,r-1)})}).catch(n);n(s)}}var w={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var s=p[n.name];s||(p[n.name]=s={forages:[],db:null,dbReady:null,deferredOperations:[]}),s.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=N);var o=[];function a(){return i.resolve()}for(var c=0;c<s.forages.length;c++){var l=s.forages[c];l!==t&&o.push(l._initReady().catch(a))}var u=s.forages.slice(0);return i.all(o).then(function(){return n.db=s.db,y(n)}).then(function(e){return n.db=e,A(n)?v(n):e}).then(function(e){n.db=s.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var o=u[r];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}})},_support:function(){try{if(!s)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=new i(function(t,r){n.ready().then(function(){O(n._dbInfo,g,function(s,o){if(s)return r(s);try{var i=o.objectStore(n._dbInfo.storeName).openCursor(),a=1;i.onsuccess=function(){var n=i.result;if(n){var r=n.value;R(r)&&(r=I(r));var s=e(r,n.key,a++);void 0!==s?t(s):n.continue()}else t()},i.onerror=function(){r(i.error)}}catch(s){r(s)}})}).catch(r)});return a(r,t),r},getItem:function(e,t){var n=this;e=l(e);var r=new i(function(t,r){n.ready().then(function(){O(n._dbInfo,g,function(s,o){if(s)return r(s);try{var i=o.objectStore(n._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),R(e)&&(e=I(e)),t(e)},i.onerror=function(){r(i.error)}}catch(s){r(s)}})}).catch(r)});return a(r,t),r},setItem:function(e,t,n){var r=this;e=l(e);var s=new i(function(n,s){var o;r.ready().then(function(){return o=r._dbInfo,"[object Blob]"===f.call(t)?m(o.db).then(function(e){return e?t:(n=t,new i(function(e,t){var r=new FileReader;r.onerror=t,r.onloadend=function(t){var r=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)}));var n}):t}).then(function(t){O(r._dbInfo,E,function(o,i){if(o)return s(o);try{var a=i.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=a.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),n(t)},i.onabort=i.onerror=function(){s(c.error?c.error:c.transaction.error)}}catch(o){s(o)}})}).catch(s)});return a(s,n),s},removeItem:function(e,t){var n=this;e=l(e);var r=new i(function(t,r){n.ready().then(function(){O(n._dbInfo,E,function(s,o){if(s)return r(s);try{var i=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(i.error)},o.onabort=function(){r(i.error?i.error:i.transaction.error)}}catch(s){r(s)}})}).catch(r)});return a(r,t),r},clear:function(e){var t=this,n=new i(function(e,n){t.ready().then(function(){O(t._dbInfo,E,function(r,s){if(r)return n(r);try{var o=s.objectStore(t._dbInfo.storeName).clear();s.oncomplete=function(){e()},s.onabort=s.onerror=function(){n(o.error?o.error:o.transaction.error)}}catch(r){n(r)}})}).catch(n)});return a(n,e),n},length:function(e){var t=this,n=new i(function(e,n){t.ready().then(function(){O(t._dbInfo,g,function(r,s){if(r)return n(r);try{var o=s.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(r){n(r)}})}).catch(n)});return a(n,e),n},key:function(e,t){var n=this,r=new i(function(t,r){e<0?t(null):n.ready().then(function(){O(n._dbInfo,g,function(s,o){if(s)return r(s);try{var i=o.objectStore(n._dbInfo.storeName),a=!1,c=i.openCursor();c.onsuccess=function(){var n=c.result;n?0===e?t(n.key):a?t(n.key):(a=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(s){r(s)}})}).catch(r)});return a(r,t),r},keys:function(e){var t=this,n=new i(function(e,n){t.ready().then(function(){O(t._dbInfo,g,function(r,s){if(r)return n(r);try{var o=s.objectStore(t._dbInfo.storeName).openCursor(),i=[];o.onsuccess=function(){var t=o.result;t?(i.push(t.key),t.continue()):e(i)},o.onerror=function(){n(o.error)}}catch(r){n(r)}})}).catch(n)});return a(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n,r=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),e.name){var o=e.name===r.name&&this._dbInfo.db?i.resolve(this._dbInfo.db):y(e).then(function(t){var n=p[e.name],r=n.forages;n.db=t;for(var s=0;s<r.length;s++)r[s]._dbInfo.db=t;return t});n=o.then(e.storeName?function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;_(e);var r=p[e.name],o=r.forages;t.close();for(var a=0;a<o.length;a++){var c=o[a];c._dbInfo.db=null,c._dbInfo.version=n}return new i(function(t,r){var o=s.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,C(n._dbInfo)}}).catch(function(t){throw(S(e,t)||i.resolve()).catch(function(){}),t})}}:function(t){_(e);var n=p[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new i(function(t,n){var r=s.deleteDatabase(e.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++)C(r[t]._dbInfo)}).catch(function(t){throw(S(e,t)||i.resolve()).catch(function(){}),t})})}else n=i.reject("Invalid arguments");return a(n,t),n}},M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=/^~~local_forage_type~([^~]+)~/,P="__lfsc__:",L=P.length,x="arbf",U="blob",D=L+x.length,Y=Object.prototype.toString;function G(e){var t,n,r,s,o,i=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var l=new ArrayBuffer(i),u=new Uint8Array(l);for(t=0;t<a;t+=4)n=M.indexOf(e[t]),r=M.indexOf(e[t+1]),s=M.indexOf(e[t+2]),o=M.indexOf(e[t+3]),u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|s>>2,u[c++]=(3&s)<<6|63&o;return l}function k(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=M[n[t]>>2],r+=M[(3&n[t])<<4|n[t+1]>>4],r+=M[(15&n[t+1])<<2|n[t+2]>>6],r+=M[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var F={serialize:function(e,t){var n="";if(e&&(n=Y.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===Y.call(e.buffer))){var r,s=P;e instanceof ArrayBuffer?(r=e,s+=x):(r=e.buffer,"[object Int8Array]"===n?s+="si08":"[object Uint8Array]"===n?s+="ui08":"[object Uint8ClampedArray]"===n?s+="uic8":"[object Int16Array]"===n?s+="si16":"[object Uint16Array]"===n?s+="ur16":"[object Int32Array]"===n?s+="si32":"[object Uint32Array]"===n?s+="ui32":"[object Float32Array]"===n?s+="fl32":"[object Float64Array]"===n?s+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(s+k(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n="~~local_forage_type~"+e.type+"~"+k(this.result);t(P+U+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){t(null,n)}},deserialize:function(e){if(e.substring(0,L)!==P)return JSON.parse(e);var t,n=e.substring(D),r=e.substring(L,D);if(r===U&&b.test(n)){var s=n.match(b);t=s[1],n=n.substring(s[0].length)}var i=G(n);switch(r){case x:return i;case U:return o([i],{type:t});case"si08":return new Int8Array(i);case"ui08":return new Uint8Array(i);case"uic8":return new Uint8ClampedArray(i);case"si16":return new Int16Array(i);case"ur16":return new Uint16Array(i);case"si32":return new Int32Array(i);case"ui32":return new Uint32Array(i);case"fl32":return new Float32Array(i);case"fl64":return new Float64Array(i);default:throw new Error("Unkown type: "+r)}},stringToBuffer:G,bufferToString:k};function V(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function B(e,t,n,r,s,o){e.executeSql(n,r,s,function(e,i){i.code===i.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],function(e,a){a.rows.length?o(e,i):V(e,t,function(){e.executeSql(n,r,s,o)},o)},o):o(e,i)},o)}var H={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var s=new i(function(r,s){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return s(e)}n.db.transaction(function(e){V(e,n,function(){t._dbInfo=n,r()},function(e,t){s(t)})},s)});return n.serializer=F,s},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new i(function(t,r){n.ready().then(function(){var s=n._dbInfo;s.db.transaction(function(n){B(n,s,"SELECT * FROM "+s.storeName,[],function(n,r){for(var o=r.rows,i=o.length,a=0;a<i;a++){var c=o.item(a),l=c.value;if(l&&(l=s.serializer.deserialize(l)),void 0!==(l=e(l,c.key,a+1)))return void t(l)}t()},function(e,t){r(t)})})}).catch(r)});return a(r,t),r},getItem:function(e,t){var n=this;e=l(e);var r=new i(function(t,r){n.ready().then(function(){var s=n._dbInfo;s.db.transaction(function(n){B(n,s,"SELECT * FROM "+s.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=s.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return a(r,t),r},setItem:function(e,t,n){return(function e(t,n,r,s){var o=this;t=l(t);var c=new i(function(i,a){o.ready().then(function(){void 0===n&&(n=null);var c=n,l=o._dbInfo;l.serializer.serialize(n,function(n,u){u?a(u):l.db.transaction(function(e){B(e,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[t,n],function(){i(c)},function(e,t){a(t)})},function(n){if(n.code===n.QUOTA_ERR){if(0<s)return void i(e.apply(o,[t,c,r,s-1]));a(n)}})})}).catch(a)});return a(c,r),c}).apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=l(e);var r=new i(function(t,r){n.ready().then(function(){var s=n._dbInfo;s.db.transaction(function(n){B(n,s,"DELETE FROM "+s.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return a(r,t),r},clear:function(e){var t=this,n=new i(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){B(t,r,"DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return a(n,e),n},length:function(e){var t=this,n=new i(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){B(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})}).catch(n)});return a(n,e),n},key:function(e,t){var n=this,r=new i(function(t,r){n.ready().then(function(){var s=n._dbInfo;s.db.transaction(function(n){B(n,s,"SELECT key FROM "+s.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})}).catch(r)});return a(r,t),r},keys:function(e){var t=this,n=new i(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){B(t,r,"SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],s=0;s<n.rows.length;s++)r.push(n.rows.item(s).key);e(r)},function(e,t){n(t)})})}).catch(n)});return a(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,s=this;return a(r=e.name?new i(function(t){var r,o;r=e.name===n.name?s._dbInfo.db:openDatabase(e.name,"","",0),t(e.storeName?{db:r,storeNames:[e.storeName]}:(o=r,new i(function(e,t){o.transaction(function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(t,n){for(var r=[],s=0;s<n.rows.length;s++)r.push(n.rows.item(s).name);e({db:o,storeNames:r})},function(e,n){t(n)})},function(e){t(e)})})))}).then(function(e){return new i(function(t,n){e.db.transaction(function(r){function s(e){return new i(function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){n(t)})})}for(var o=[],a=0,c=e.storeNames.length;a<c;a++)o.push(s(e.storeNames[a]));i.all(o).then(function(){t()}).catch(function(e){n(e)})},function(e){n(e)})})}):i.reject("Invalid arguments"),t),r}};function K(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}var j={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=K(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||0<localStorage.length?((this._dbInfo=t).serializer=F,i.resolve()):i.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,s=r.length,o=localStorage.length,i=1,a=0;a<o;a++){var c=localStorage.key(a);if(0===c.indexOf(r)){var l=localStorage.getItem(c);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,c.substring(s),i++)))return l}}});return a(r,t),r},getItem:function(e,t){var n=this;e=l(e);var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return a(r,t),r},setItem:function(e,t,n){var r=this;e=l(e);var s=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new i(function(s,o){var i=r._dbInfo;i.serializer.serialize(t,function(t,r){if(r)o(r);else try{localStorage.setItem(i.keyPrefix+e,t),s(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||o(t),o(t)}})})});return a(s,n),s},removeItem:function(e,t){var n=this;e=l(e);var r=n.ready().then(function(){localStorage.removeItem(n._dbInfo.keyPrefix+e)});return a(r,t),r},clear:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;0<=n;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return a(n,e),n},length:function(e){var t=this.keys().then(function(e){return e.length});return a(t,e),t},key:function(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(r){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return a(r,t),r},keys:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],s=0;s<n;s++){var o=localStorage.key(s);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r});return a(n,e),n},dropInstance:function(e,t){if(t=u.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,s=this;return a(r=e.name?new i(function(t){t(e.storeName?K(e,s._defaultConfig):e.name+"/")}).then(function(e){for(var t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):i.reject("Invalid arguments"),t),r}},J=function(e,t){for(var n=e.length,r=0;r<n;){if((s=e[r])===(o=t)||"number"==typeof s&&"number"==typeof o&&isNaN(s)&&isNaN(o))return!0;r++}var s,o;return!1},q=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},X={},$={},W={INDEXEDDB:w,WEBSQL:H,LOCALSTORAGE:j},z=[W.INDEXEDDB._driver,W.WEBSQL._driver,W.LOCALSTORAGE._driver],Q=["dropInstance"],Z=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Q),ee={description:"",driver:z.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function te(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function ne(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(arguments[0][n]=q(t[n])?t[n].slice():t[n])}return arguments[0]}var re=new(function(){function e(t){for(var n in function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),W)if(W.hasOwnProperty(n)){var r=W[n],s=r._driver;this[n]=s,X[s]||this.defineDriver(r)}this._defaultConfig=ne({},ee),this._config=ne({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"!==(void 0===e?"undefined":r(e)))return"string"==typeof e?this._config[e]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)},e.prototype.defineDriver=function(e,t,n){var r=new i(function(t,n){try{var r=e._driver,s=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(s);for(var o=Z.concat("_initStorage"),c=0,l=o.length;c<l;c++){var u=o[c];if((!J(Q,u)||e[u])&&"function"!=typeof e[u])return void n(s)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=i.reject(t);return a(n,arguments[arguments.length-1]),n}},n=0,r=Q.length;n<r;n++){var s=Q[n];e[s]||(e[s]=t(s))}}();var h=function(n){X[r]=e,$[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(h,n):h(!!e._support):h(!0)}catch(s){n(s)}});return c(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=X[e]?i.resolve(X[e]):i.reject(new Error("Driver not found."));return c(r,t,n),r},e.prototype.getSerializer=function(e){var t=i.resolve(F);return c(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return c(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;q(e)||(e=[e]);var s=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function a(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}var l=null!==this._driverSet?this._driverSet.catch(function(){return i.resolve()}):i.resolve();return this._driverSet=l.then(function(){var e=s[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then(function(e){var t;r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=(t=s,function(){var e=0;return function n(){for(;e<t.length;){var s=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(s).then(a).catch(n)}o();var c=new Error("No available storage method found.");return r._driverSet=i.reject(c),r._driverSet}()})})}).catch(function(){o();var e=new Error("No available storage method found.");return r._driverSet=i.reject(e),r._driverSet}),c(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!$[e]},e.prototype._extend=function(e){ne(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var s=e[n];this.supports(s)&&t.push(s)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=Z.length;e<t;e++)te(this,Z[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=re},{3:3}]},{},[4])(4)}).call(this,n(26))},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t,n,r){this.receiverId=e,this.type=t,this.receiverType=n,this.category=r}return e.prototype.getId=function(){return this.id},e.prototype.setId=function(e){this.id=e},e.prototype.getConversationId=function(){return this.conversationId},e.prototype.setConversationId=function(e){this.conversationId=e},e.prototype.getMuid=function(){return this.muid},e.prototype.setMuid=function(e){this.muid=e},e.prototype.getSender=function(){return this.sender},e.prototype.setSender=function(e){this.sender=e},e.prototype.getReceiver=function(){return this.receiver},e.prototype.setReceiver=function(e){this.receiver=e},e.prototype.getReceiverId=function(){return this.receiverId},e.prototype.setReceiverId=function(e){this.receiverId=e},e.prototype.getType=function(){return this.type},e.prototype.setType=function(e){this.type=e},e.prototype.get=function(){return this.id},e.prototype.setReceiverType=function(e){this.receiverType=e},e.prototype.getReceiverType=function(){return this.receiverType},e.prototype.setSentAt=function(e){this.sentAt=e},e.prototype.getSentAt=function(){return this.sentAt},e.prototype.getStatus=function(){return this.status},e.prototype.setStatus=function(e){this.status=e},e.prototype.getDeliveredAt=function(){return this.deliveredAt},e.prototype.setDeliveredAt=function(e){this.deliveredAt=e},e.prototype.getDeliveredToMeAt=function(){return this.deliveredToMeAt},e.prototype.setDeliveredToMeAt=function(e){this.deliveredToMeAt=e},e.prototype.getReadAt=function(){return this.readAt},e.prototype.setReadAt=function(e){this.readAt=e},e.prototype.getReadByMeAt=function(){return this.readByMeAt},e.prototype.setReadByMeAt=function(e){this.readByMeAt=e},e.prototype.getCategory=function(){return this.category},e.prototype.setCategory=function(e){this.category=e},e.prototype.setEditedAt=function(e){this.editedAt=e},e.prototype.getEditedAt=function(){return this.editedAt},e.prototype.setEditedBy=function(e){this.editedBy=e},e.prototype.getEditedBy=function(){return this.editedBy},e.prototype.setDeletedAt=function(e){this.deletedAt=e},e.prototype.getDeletedAt=function(){return this.deletedAt},e.prototype.setDeletedBy=function(e){this.deletedBy=e},e.prototype.getDeletedBy=function(){return this.deletedBy},e}();t.BaseMessage=r},function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(i,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=0<(s=i.trys).length&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(a){o=[6,a],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};t.__esModule=!0;var a=n(1),c=n(41),l=n(3),u=n(20),h=n(7),d=n(0),p=n(28),f=(n(45),n(46),n(22)),g=n(10),E=n(47),m=n(23),_=n(29),C=n(9),S=n(30),T=n(24),y=n(31),v=n(25),A=n(8),I=n(33),R=n(2);c.Strophe.addConnectionPlugin("pubsub",{_connection:null,init:function(e){this._connection=e,c.Strophe.addNamespace("PUBSUB","http://jabber.org/protocol/pubsub"),c.Strophe.addNamespace("PUBSUB_SUBSCRIBE_OPTIONS",c.Strophe.NS.PUBSUB+"#subscribe_options"),c.Strophe.addNamespace("PUBSUB_ERRORS",c.Strophe.NS.PUBSUB+"#errors"),c.Strophe.addNamespace("PUBSUB_EVENT",c.Strophe.NS.PUBSUB+"#event"),c.Strophe.addNamespace("PUBSUB_OWNER",c.Strophe.NS.PUBSUB+"#owner"),c.Strophe.addNamespace("PUBSUB_AUTO_CREATE",c.Strophe.NS.PUBSUB+"#auto-create"),c.Strophe.addNamespace("PUBSUB_PUBLISH_OPTIONS",c.Strophe.NS.PUBSUB+"#publish-options"),c.Strophe.addNamespace("PUBSUB_NODE_CONFIG",c.Strophe.NS.PUBSUB+"#node_config"),c.Strophe.addNamespace("PUBSUB_CREATE_AND_CONFIGURE",c.Strophe.NS.PUBSUB+"#create-and-configure"),c.Strophe.addNamespace("PUBSUB_SUBSCRIBE_AUTHORIZATION",c.Strophe.NS.PUBSUB+"#subscribe_authorization"),c.Strophe.addNamespace("PUBSUB_GET_PENDING",c.Strophe.NS.PUBSUB+"#get-pending"),c.Strophe.addNamespace("PUBSUB_MANAGE_SUBSCRIPTIONS",c.Strophe.NS.PUBSUB+"#manage-subscriptions"),c.Strophe.addNamespace("PUBSUB_META_DATA",c.Strophe.NS.PUBSUB+"#meta-data")},createNode:function(e,t,n,r,s){var o=this._connection.getUniqueId("pubsubcreatenode"),i=c.$iq({from:e,to:t,type:"set",id:o}),a=c.Strophe.xmlElement("configure",[]),l=c.Strophe.xmlElement("x",[["xmlns","jabber:x:data"]]),u=c.Strophe.xmlElement("field",[["var","FORM_TYPE"],["type","hidden"]]),h=c.Strophe.xmlElement("value",[]),d=c.Strophe.xmlTextNode(c.Strophe.NS.PUBSUB+"#node_config");for(var p in h.appendChild(d),u.appendChild(h),l.appendChild(u),r)l.appendChild(r[p]);return r.length&&0!=r.length&&a.appendChild(l),i.c("pubsub",{xmlns:c.Strophe.NS.PUBSUB}).c("create",{node:n}).up().cnode(a),this._connection.addHandler(s,null,"iq",null,o,null),this._connection.send(i.tree()),o},subscribe:function(e,t,n,r,s,o){var i=this._connection.getUniqueId("subscribenode"),a=c.Strophe.xmlElement("options",[]),l=c.Strophe.xmlElement("x",[["xmlns","jabber:x:data"]]),u=c.Strophe.xmlElement("field",[["var","FORM_TYPE"],["type","hidden"]]),h=c.Strophe.xmlElement("value",[]),d=c.Strophe.xmlTextNode(c.Strophe.NS.PUBSUB_SUBSCRIBE_OPTIONS);h.appendChild(d),u.appendChild(h),l.appendChild(u);var p=c.$iq({from:e,to:t,type:"set",id:i});if(r&&r.length&&0!==r.length){for(var f=0;f<r.length;f++)l.appendChild(r[f]);a.appendChild(l),p.c("pubsub",{xmlns:c.Strophe.NS.PUBSUB}).c("subscribe",{node:n,jid:e}).up().cnode(a)}else p.c("pubsub",{xmlns:c.Strophe.NS.PUBSUB}).c("subscribe",{node:n,jid:e});return this._connection.addHandler(o,null,"iq",null,i,null),this._connection.addHandler(s,null,"message",null,null,null),this._connection.send(p.tree()),i},unsubscribe:function(e,t,n,r){var s=this._connection.getUniqueId("unsubscribenode"),o=c.$iq({from:e,to:t,type:"set",id:s});return o.c("pubsub",{xmlns:c.Strophe.NS.PUBSUB}).c("unsubscribe",{node:n,jid:e}),this._connection.addHandler(r,null,"iq",null,s,null),this._connection.send(o.tree()),s},publish:function(e,t,n,r,s){var o=this._connection.getUniqueId("publishnode"),i=c.Strophe.xmlElement("publish",[["node",n],["jid",e]]);for(var a in r){var l=c.Strophe.xmlElement("item",[]),u=c.Strophe.xmlElement("entry",[]),h=c.Strophe.xmlTextNode(r[a]);u.appendChild(h),l.appendChild(u),i.appendChild(l)}var d=c.$iq({from:e,to:t,type:"set",id:o});return d.c("pubsub",{xmlns:c.Strophe.NS.PUBSUB}).cnode(i),this._connection.addHandler(s,null,"iq",null,o,null),this._connection.send(d.tree()),o},items:function(e,t,n,r,s){var o=c.$iq({from:e,to:t,type:"get"});return o.c("pubsub",{xmlns:c.Strophe.NS.PUBSUB}).c("items",{node:n}),this._connection.sendIQ(o.tree(),r,s)}});var N=function(){function t(){this.messageHandlers=[],this.XMPPConnectionHandlers=[],this.userHandlers=[],this.callHandlers=[],this.groupHandlers=[],this.joinedGroups=[],this.iqHandlers=[]}return t.getInstance=function(){try{return null!=this.xMPPConnectionHelper&&null!=this.xMPPConnectionHelper||(this.xMPPConnectionHelper=new t),this.xMPPConnectionHelper}catch(e){a.Logger.error("Error in getInstance",e)}},t.prototype.XMPPConnect=function(e,n){var r=this,s="wss://",o="/ws/";return e&&(s="https://",o="/http-bind/"),new Promise(function(i,l){try{a.isFalsy(n)&&(n=e?t.XMPP_BIND_URL_HTTPS:t.XMPP_BIND_URL_WS),C.LocalStorage.getInstance().get(d.APP_SETTINGS.APP_SETTINGS).then(function(e){a.isFalsy(e)?a.getAppSettings().then(function(e){r.connection=new c.Strophe.Connection(t.XMPP_BIND_URL=s+e[d.APP_SETTINGS.KEYS.CHAT_HOST]+":"+e[d.APP_SETTINGS.KEYS.CHAT_HTTPS_BIND_PORT]+o),i(!0)}):(r.connection=new c.Strophe.Connection(t.XMPP_BIND_URL=s+e[d.APP_SETTINGS.KEYS.CHAT_HOST]+":"+e[d.APP_SETTINGS.KEYS.CHAT_HTTPS_BIND_PORT]+o),i(!0))})}catch(e){l(new R.CometChatException(e))}})},t.prototype.XMPPDisconnect=function(){try{this.connection?(this.connection.flush(),this.connection.disconnect()):a.Logger.info("XMPPPHelper","No connection object found")}catch(e){a.Logger.error("XMPPHelper: XMPPDisconnect",e)}},t.prototype.XMMPLogin=function(e,t,n,r){var s=this;void 0===t&&(t=d.XMPP.deafult_password);try{this.XMPPConnect(n).then(function(n){s.connection.connected?r(c.Strophe.Status.CONNECTED):C.LocalStorage.getInstance().get(d.APP_SETTINGS.APP_SETTINGS).then(function(n){a.isFalsy(n)?a.getAppSettings().then(function(n){s.perfomAfterConnection(e,t,r,n[d.APP_SETTINGS.KEYS.CHAT_HOST])}):s.perfomAfterConnection(e,t,r,n[d.APP_SETTINGS.KEYS.CHAT_HOST])})})}catch(n){a.Logger.error("XMPPHelper: XMPPLogin",n)}},t.prototype.getPresenceInfo=function(e,t){var n=this;try{var r="somename"+(new Date).getTime();this.addIqHandler(r,function(e){t(e)}),a.getAppSettings().then(function(t){var r=c.$iq({from:n.connection.jid,id:"CC^COMETCHAT-PRESENCE",type:"get",to:t[d.APP_SETTINGS.KEYS.CHAT_HOST]}).c("query",{xmlns:"jabber:iq:presencereq",action:"presence"}).t(JSON.stringify(e));n.connection.send(r)},function(t){a.Logger.error("XMPPHelper: getPresenceInfo",t);var r=c.$iq({from:n.connection.jid,id:"CC^COMETCHAT-PRESENCE",type:"get",to:d.XMPP.host}).c("query",{xmlns:"jabber:iq:presencereq",action:"presence"}).t(JSON.stringify(e));n.connection.send(r)})}catch(r){a.Logger.error("XMPPHelper: getPresenceInfo",r)}},t.prototype.sendTypingStarted=function(e,t,n){void 0===t&&(t=d.XMPP.CONVERSATION.TYPE.CHAT);try{e&&this.connection.chatstates.sendComposing(e,t,n)}catch(e){a.Logger.error("XMPPHelper: sendTypingStarted",e)}},t.prototype.sendTypingPaused=function(e,t,n){void 0===t&&(t=d.XMPP.CONVERSATION.TYPE.CHAT);try{e&&this.connection.chatstates.sendPaused(e,t,n)}catch(e){a.Logger.error("XMPPHelper: sendTypingPaused",e)}},t.prototype.addMessageEventListener=function(e,t){try{this.messageHandlers=this.messageHandlers.filter(function(t){return t._name!=e}),this.messageHandlers=this.messageHandlers.concat([new u.MessageListener(e,t)])}catch(t){a.Logger.error("XMPPHelper: addMessageEventListener",t)}},t.prototype.removeMessageEventListener=function(t){try{this.messageHandlers=this.messageHandlers.filter(function(e){return e._name!==t})}catch(e){a.Logger.error("XMPPHelper: removeMessageEventListener",e)}},t.prototype.addXMPPConnectionEventListener=function(e,t){try{this.XMPPConnectionHandlers=this.XMPPConnectionHandlers.filter(function(t){return t._name!=e}),this.XMPPConnectionHandlers=this.XMPPConnectionHandlers.concat([new w(e,t)])}catch(t){a.Logger.error("XMPPHelper: addXMPPConnectionEventListener",t)}},t.prototype.removeXMPPConnectionEventListener=function(t){try{this.XMPPConnectionHandlers=this.XMPPConnectionHandlers.filter(function(e){return e._name!==t})}catch(e){a.Logger.error("XMPPHelper: removeXMPPConnectionEventListener",e)}},t.prototype.addCallEventListener=function(e,t){try{this.callHandlers=this.callHandlers.filter(function(t){return t._name!=e}),this.callHandlers=this.callHandlers.concat([new u.CallListener(e,t)])}catch(t){a.Logger.error("XMPPHelper: addCallEventListener",t)}},t.prototype.removeCallEventListener=function(t){try{this.callHandlers=this.callHandlers.filter(function(e){return e._name!==t})}catch(e){a.Logger.error("XMPPHelper: removeCallEventListener",e)}},t.prototype.addUserEventListener=function(e,t){try{this.userHandlers=this.userHandlers.filter(function(t){return t._name!=e}),this.userHandlers=this.userHandlers.concat([new u.UserListener(e,t)])}catch(t){a.Logger.error("XMPPHelper: addUserEventListener",t)}},t.prototype.removeUserEventListener=function(t){try{this.userHandlers=this.userHandlers.filter(function(e){return e._name!==t})}catch(e){a.Logger.error("XMPPHelper: removeUserEventListener",e)}},t.prototype.addGroupEventListener=function(e,t){try{this.groupHandlers=this.groupHandlers.filter(function(t){return t._name!=e}),this.groupHandlers=this.groupHandlers.concat([new u.GroupListener(e,t)])}catch(t){a.Logger.error("XMPPHelper: addGroupEventListener",t)}},t.prototype.removeGroupEventListener=function(t){try{this.groupHandlers=this.groupHandlers.filter(function(e){return e._name!==t})}catch(e){a.Logger.error("XMPPHelper: removeGroupEventListener",e)}},t.prototype.addIqHandler=function(e,t){try{this.iqHandlers=this.iqHandlers.concat([new u.Listener(e,t)])}catch(e){a.Logger.error("XMPPHelper: addIqHandler",e)}},t.prototype.removeIqHandler=function(t){try{this.iqHandlers=this.iqHandlers.filter(function(e){return e._name!==t})}catch(e){a.Logger.error("XMPPHelper: removeIqHandler",e)}},t.prototype.joinMuc=function(t){var n=this;try{a.getAppSettings().then(function(e){n.connection.muc.join(a.format(d.XMPP.muc_jid_string,l.CometChat.getAppId(),t.getGuid(),l.CometChat.getAppId(),e[d.APP_SETTINGS.KEYS.CHAT_HOST]),n.connection.jid,null,null,null,null,0)})}catch(e){a.Logger.error("XMPPHelper: joinMuc",e)}},t.prototype.leaveMuc=function(t){var n=this;try{a.getAppSettings().then(function(e){n.connection.muc.leave(a.format(d.XMPP.muc_jid_string,l.CometChat.getAppId(),t,l.CometChat.getAppId(),e[d.APP_SETTINGS.KEYS.CHAT_HOST]),n.connection.jid)})}catch(e){a.Logger.error("XMPPHelper: leaveMuc",e)}},t.prototype.getUsersVCard=function(e,t){var n=this;try{g.getJidFromUid(e).then(function(e){n.connection.vcard.get(function(e){t(E.VCardController.transformVCard(e))},e)})}catch(e){a.Logger.error("XMPPHelper: getUsersVCard",e)}},t.prototype.trigerMessageHandler=function(e,t){if(a.isFalsy(t))e=h.MessageController.trasformJSONMessge(e),this.messageHandlers.map(function(t){try{if(t._eventListener)if(e instanceof f.Action);else if(e instanceof m.Call);else{var n=e;switch(n.getType()){case d.MessageConstatnts.TYPE.TEXT:a.isFalsy(t._eventListener.onTextMessageReceived)||t._eventListener.onTextMessageReceived(e);break;case d.MessageConstatnts.TYPE.CUSTOM:a.isFalsy(t._eventListener.onCustomMessageReceived)||t._eventListener.onCustomMessageReceived(e);break;default:n.getCategory()==d.MessageCategory.CUSTOM?a.isFalsy(t._eventListener.onCustomMessageReceived)||t._eventListener.onCustomMessageReceived(e):a.isFalsy(t._eventListener.onMediaMessageReceived)||t._eventListener.onMediaMessageReceived(e)}}}catch(t){a.Logger.error("XMPPHelper: trigerMessageHandler",t)}}),e instanceof m.Call&&this.publishCallEvents(e),e instanceof f.Action&&this.publishActionEvents(e);else if(e=h.MessageController.trasformJSONMessge(e),this.messageHandlers[t]._eventListener)try{if(this.messageHandlers[t]._eventListener)if(e instanceof f.Action);else if(e instanceof m.Call);else{var n=e;switch(n.getType()){case d.MessageConstatnts.TYPE.TEXT:a.isFalsy(this.messageHandlers[t]._eventListener.onTextMessageReceived)||this.messageHandlers[t]._eventListener.onTextMessageReceived(e);break;case d.MessageConstatnts.TYPE.CUSTOM:a.isFalsy(this.messageHandlers[t]._eventListener.onCustomMessageReceived)||this.messageHandlers[t]._eventListener.onCustomMessageReceived(e);break;default:n.getCategory()==d.MessageCategory.CUSTOM?a.isFalsy(this.messageHandlers[t]._eventListener.onCustomMessageReceived)||this.messageHandlers[t]._eventListener.onCustomMessageReceived(e):a.isFalsy(this.messageHandlers[t]._eventListener.onMediaMessageReceived)||this.messageHandlers[t]._eventListener.onMediaMessageReceived(e)}}}catch(t){a.Logger.error("XMPPHelper: trigerMessageHandler",t)}},t.prototype.publishActionEvents=function(e){var t=this;try{switch(e.getAction()){case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_JOINED:case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_INVITED:this.groupHandlers.map(function(t){a.isFalsy(t._eventListener.onUserJoined)||t._eventListener.onUserJoined(e,e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_LEFT:this.groupHandlers.map(function(t){a.isFalsy(t._eventListener.onUserLeft)||t._eventListener.onUserLeft(e,e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_BANNED:this.groupHandlers.map(function(t){a.isFalsy(t._eventListener.onUserBanned)||t._eventListener.onUserBanned(e,e.getActionOn(),e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_KICKED:this.groupHandlers.map(function(t){a.isFalsy(t._eventListener.onUserKicked)||t._eventListener.onUserKicked(e,e.getActionOn(),e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_UNBANNED:this.groupHandlers.map(function(t){a.isFalsy(t._eventListener.onUserUnbanned)||t._eventListener.onUserUnbanned(e,e.getActionOn(),e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_SCOPE_CHANGED:this.groupHandlers.map(function(t){a.isFalsy(t._eventListener.onMemberScopeChanged)||t._eventListener.onMemberScopeChanged(e,e.getActionOn(),e.getNewScope(),e.getOldScope(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MESSAGE_EDITED:this.messageHandlers.map(function(t){a.isFalsy(t._eventListener.onMessageEdited)||t._eventListener.onMessageEdited(e.getActionOn())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MESSAGE_DELETED:this.messageHandlers.map(function(t){a.isFalsy(t._eventListener.onMessageDeleted)||t._eventListener.onMessageDeleted(e.getActionOn())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_ADDED:var n=e.getActionOn();g.getJidFromUid(n.getUid()).then(function(n){n==c.Strophe.getBareJidFromJid(t.connection.jid)&&(t.joinMuc(e.getActionFor()),t.markAsDelivered(e.getActionFor().guid,"group",e.getId()))}),this.groupHandlers.map(function(n){var r=e.getActionOn();g.getJidFromUid(r.getUid()).then(function(r){r==c.Strophe.getBareJidFromJid(t.connection.jid)&&t.joinMuc(e.getActionFor()),a.isFalsy(n._eventListener.onMemberAddedToGroup)||n._eventListener.onMemberAddedToGroup(e,e.getActionOn(),e.getActionBy(),e.getActionFor())})})}}catch(n){a.Logger.error("XMPPHelper: publishActionEvents",n)}},t.prototype.publishCallEvents=function(t){try{var n=_.CallController.getInstance().getActiveCall();switch(t.getStatus()){case d.CallConstants.CALL_STATUS.INITIATED:t.getReceiverType()==d.CallConstants.RECEIVER_TYPE_GROUP?this.callHandlers.map(function(e){t.getCallInitiator().getUid().toLocaleLowerCase()!=l.CometChat.user.getUid().toLocaleLowerCase()&&(a.isFalsy(e._eventListener.onIncomingCallReceived)||e._eventListener.onIncomingCallReceived(t))}):this.callHandlers.map(function(e){a.isFalsy(e._eventListener.onIncomingCallReceived)||e._eventListener.onIncomingCallReceived(t)});break;case d.CallConstants.CALL_STATUS.ONGOING:t.getReceiverType()==d.CallConstants.RECEIVER_TYPE_GROUP?t.getCallInitiator().getUid().toLocaleLowerCase()==l.CometChat.user.getUid().toLocaleLowerCase()&&this.callHandlers.map(function(e){a.isFalsy(e._eventListener.onOutgoingCallAccepted)||e._eventListener.onOutgoingCallAccepted(t)}):this.callHandlers.map(function(e){a.isFalsy(e._eventListener.onOutgoingCallAccepted)||e._eventListener.onOutgoingCallAccepted(t)});break;case d.CallConstants.CALL_STATUS.UNANSWERED:if(t.getCallInitiator().getUid().toLocaleLowerCase()==l.CometChat.user.getUid().toLocaleLowerCase())this.callHandlers.map(function(e){a.isFalsy(e._eventListener.onOutgoingCallRejected)||e._eventListener.onOutgoingCallRejected(t)});else{if(null!==n&&n.getSessionId()===t.getSessionId())try{_.CallController.getInstance().endCall()}catch(e){a.Logger.error("CallError",e)}this.callHandlers.map(function(e){a.isFalsy(e._eventListener.onIncomingCallCancelled)||e._eventListener.onIncomingCallCancelled(t)})}break;case d.CallConstants.CALL_STATUS.REJECTED:if(t.getReceiverType()==d.CallConstants.RECEIVER_TYPE_GROUP)t.getCallInitiator().getUid().toLocaleLowerCase()==l.CometChat.user.getUid().toLocaleLowerCase()&&this.callHandlers.map(function(e){a.isFalsy(e._eventListener.onOutgoingCallRejected)||e._eventListener.onOutgoingCallRejected(t)});else{if(null!==n&&n.getSessionId()===t.getSessionId())try{_.CallController.getInstance().endCall()}catch(e){a.Logger.error("CallError",e)}this.callHandlers.map(function(e){a.isFalsy(e._eventListener.onOutgoingCallRejected)||e._eventListener.onOutgoingCallRejected(t)})}break;case d.CallConstants.CALL_STATUS.BUSY:t.getReceiverType()==d.CallConstants.RECEIVER_TYPE_GROUP?t.getCallInitiator().getUid().toLocaleLowerCase()==l.CometChat.user.getUid().toLocaleLowerCase()&&this.callHandlers.map(function(e){a.isFalsy(e._eventListener.onOutgoingCallRejected)||e._eventListener.onOutgoingCallRejected(t)}):this.callHandlers.map(function(e){if(null!==n&&n.getSessionId()===t.getSessionId())try{_.CallController.getInstance().endCall()}catch(e){a.Logger.error("CallError",e)}a.isFalsy(e._eventListener.onOutgoingCallRejected)||e._eventListener.onOutgoingCallRejected(t)});break;case d.CallConstants.CALL_STATUS.CANCELLED:if(this.callHandlers.map(function(e){a.isFalsy(e._eventListener.onIncomingCallCancelled)||e._eventListener.onIncomingCallCancelled(t)}),null!==n&&n.getSessionId()===t.getSessionId())try{_.CallController.getInstance().endCall()}catch(e){a.Logger.error("CallError",e)}break;case d.CallConstants.CALL_STATUS.ENDED:if(_.CallController.getInstance().getCallListner()&&_.CallController.getInstance().getCallListner()._eventListener.onCallEnded(t),null!==n&&n.getSessionId()===t.getSessionId())try{_.CallController.getInstance().endCall()}catch(e){a.Logger.error("CallError",e)}}}catch(e){a.Logger.error("XMPPHelper: publishCallEvents",e)}},t.prototype.publishTypinStatusNotification=function(e,t){try{switch(t){case d.TYPING_NOTIFICATION.ACTIONS.STARTED:this.messageHandlers.map(function(t){t._eventListener.onTypingStarted&&t._eventListener.onTypingStarted(e)}),y.TypingNotificationController.addIncomingTypingStarted(e);break;case d.TYPING_NOTIFICATION.ACTIONS.ENDED:this.messageHandlers.map(function(t){t._eventListener.onTypingEnded&&t._eventListener.onTypingEnded(e)}),y.TypingNotificationController.removeIncomingTypingStarted(e)}}catch(t){a.Logger.error("XMPPHelper: publishTypingStatusNotification",t)}},t.prototype.publishDeliveryReceipt=function(e){var t=this;try{h.MessageController.processDeliveryReceipt(e).then(function(e){t.messageHandlers.map(function(t){t._eventListener.onMessagesDelivered&&t._eventListener.onMessagesDelivered(e)})},function(e){a.Logger.error("Error in publish delivery",e)})}catch(e){a.Logger.error("XMPPHelper: publishDeliveryReceipt",e)}},t.prototype.publishReadReceipt=function(e){var t=this;try{h.MessageController.processReadReceipt(e).then(function(e){t.messageHandlers.map(function(t){t._eventListener.onMessagesRead&&t._eventListener.onMessagesRead(e)})},function(e){a.Logger.error("Error in publish read",e)})}catch(e){a.Logger.error("XMPPHelper: publishReadReceipt",e)}},t.prototype.markAsRead=function(t,n,r){var s=this;try{n==d.MessageConstatnts.RECEIVER_TYPE.USER?g.getJidFromUid(t).then(function(e){var o=c.$msg({to:e,from:s.connection.jid,id:s.connection.getUniqueId(),type:d.MessageConstatnts.XMPP_KEYS.TYPE_USER}),i=c.Strophe.xmlElement("read",{type:n,receiverId:t,xmlns:"urn:xmpp:receipts",id:"["+l.CometChat.getAppId()+"]"+r});o.tree().appendChild(i),s.connection.send(o)}):g.getGroupJidFromGUID(t).then(function(e){var o=c.$msg({to:e,from:s.connection.jid,id:s.connection.getUniqueId(),type:d.MessageConstatnts.XMPP_KEYS.TYPE_GROUP}),i=c.Strophe.xmlElement("read",{type:n,receiverId:t,xmlns:c.Strophe.NS.RECEIPTS,id:"["+l.CometChat.getAppId()+"]"+r});o.tree().appendChild(i),s.connection.send(o)})}catch(e){a.Logger.error("XMPPHelper: markAsRead",e)}},t.prototype.markAsDelivered=function(t,n,r){var s=this;try{n==d.MessageConstatnts.RECEIVER_TYPE.USER?g.getJidFromUid(t).then(function(e){var o=c.$msg({to:e,from:s.connection.jid,id:s.connection.getUniqueId(),type:d.MessageConstatnts.XMPP_KEYS.TYPE_USER}),i=c.Strophe.xmlElement("delivered",{type:n,receiverId:t,xmlns:"urn:xmpp:receipts",id:"["+l.CometChat.getAppId()+"]"+r});o.tree().appendChild(i),s.connection.send(o)}):g.getGroupJidFromGUID(t).then(function(e){var o=c.$msg({to:e,from:s.connection.jid,id:s.connection.getUniqueId(),type:d.MessageConstatnts.XMPP_KEYS.TYPE_GROUP}),i=c.Strophe.xmlElement("delivered",{type:n,receiverId:t,xmlns:c.Strophe.NS.RECEIPTS,id:"["+l.CometChat.getAppId()+"]"+r});o.tree().appendChild(i),s.connection.send(o)})}catch(e){a.Logger.error("XMPPHelper: markAsDelivered",e)}},t.prototype.subscribeToTopic=function(t){var n=this;try{C.LocalStorage.getInstance().get(d.APP_SETTINGS.APP_SETTINGS).then(function(e){a.isFalsy(e)?a.getAppSettings().then(function(e){n.connection.pubsub.subscribe(n.connection.jid,d.XMPP.PUBSUB_CHANNEL+"."+e[d.APP_SETTINGS.KEYS.CHAT_HOST],t,{},function(){a.Logger.info("XMPPHelper: subscribeToTopic","onEvent")},function(){a.Logger.info("XMPPHelper: subscribeToTopic","onsubscribe")})}):n.connection.pubsub.subscribe(n.connection.jid,d.XMPP.PUBSUB_CHANNEL+"."+e[d.APP_SETTINGS.KEYS.CHAT_HOST],t,{},function(){a.Logger.info("XMPPHelper: subscribeToTopic","onEvent")},function(){a.Logger.info("XMPPHelper: subscribeToTopic","onsubscribe")})})}catch(e){a.Logger.error("XMPPHelper: subscribeToTopic",e)}},t.prototype.getRooms=function(){var t=this;return new Promise(function(n,r){try{void 0!==t.connection?C.LocalStorage.getInstance().get(d.APP_SETTINGS.APP_SETTINGS).then(function(e){a.isFalsy(e)?a.getAppSettings().then(function(e){t.connection.muc.listRooms(l.CometChat.getAppId()+"."+e[d.APP_SETTINGS.KEYS.CHAT_HOST],function(e){var r=e.getElementsByTagName("item");r=Array.prototype.slice.call(r),t.joinedGroups=[],r.map(function(e){t.joinedGroups.push(g.getUidFromJid(e.getAttribute("jid")))}),n(t.joinedGroups)})}):t.connection.muc.listRooms(l.CometChat.getAppId()+"."+e[d.APP_SETTINGS.KEYS.CHAT_HOST],function(e){var r=e.getElementsByTagName("item");r=Array.prototype.slice.call(r),t.joinedGroups=[],r.map(function(e){t.joinedGroups.push(g.getUidFromJid(e.getAttribute("jid")))}),n(t.joinedGroups)})},function(e){r(new R.CometChatException(e))}):t.addXMPPConnectionEventListener("XMPPConnectionListener",new O({onConnected:function(e){e==c.Strophe.Status.CONNECTED&&t.getRooms().then(function(e){n(e),t.removeXMPPConnectionEventListener("XMPPConnectionListener")})}}))}catch(e){r(new R.CometChatException(e))}})},t.prototype.perfomAfterConnection=function(e,n,r,s){var u=this,E=l.CometChat.getInstance();this.connection.connect(a.format(d.XMPP.jid_string,l.CometChat.getAppId(),e,s,E.getAuthToken()),n,function(n){try{if(a.isFalsy(r)||r(n),n==c.Strophe.Status.CONNECTED){switch(u.connection.sendPresence(c.$pres().c("priority").t("1").up().c("status").t("online")),u.connection.muc.init(u.connection),u.connection.vcard.init(u.connection),u.connection.chatstates.init(u.connection),u.connection.receipts.init(u.connection),u.connection.pubsub.init(u.connection),u.XMPPConnectionHandlers.map(function(e){try{e._XMPPeventListener&&(a.isFalsy(e._XMPPeventListener.onConnected)||e._XMPPeventListener.onConnected(n))}catch(e){a.Logger.error("XMPPHelper: trigerMessageHandler",e)}}),C.LocalStorage.getInstance().get(d.APP_SETTINGS.APP_SETTINGS).then(function(e){a.isFalsy(e)?a.getAppSettings().then(function(e){u.connection.muc.listRooms(l.CometChat.getAppId()+"."+e[d.APP_SETTINGS.KEYS.CHAT_HOST],function(e){var t=e.getElementsByTagName("item");(t=Array.prototype.slice.call(t)).map(function(e){u.connection.muc.join(e.getAttribute("jid"),u.connection.jid)})})}):u.connection.muc.listRooms(l.CometChat.getAppId()+"."+e[d.APP_SETTINGS.KEYS.CHAT_HOST],function(e){var t=e.getElementsByTagName("item");(t=Array.prototype.slice.call(t)).map(function(e){u.connection.muc.join(e.getAttribute("jid"),u.connection.jid,null,null,null,null,0,null)})})}),l.CometChat.appSettings.getSubscriptionType()){case I.AppSettings.SUBSCRIPTION_TYPE_ALL_USERS:u.subscribeToTopic(a.format(d.XMPP.pubsub_global_string,l.CometChat.getAppId()));break;case I.AppSettings.SUBSCRIPTION_TYPE_FRIENDS:case I.AppSettings.SUBSCRIPTION_TYPE_NONE:break;case I.AppSettings.SUBSCRIPTION_TYPE_ROLES:l.CometChat.appSettings.getRoles().map(function(e){u.subscribeToTopic(a.format(d.XMPP.pubsub_role_string,l.CometChat.getAppId(),e))})}u.connection.send(c.$iq({from:c.Strophe.getBareJidFromJid(u.connection.jid),id:"enable1",type:"set"}).c("enable",{xmlns:"urn:xmpp:carbons:2"})),u.connection.addHandler(function(e){if(!(0<e.getElementsByTagName("x").length)){var t=p.PresenceController.transformPresence(e);u.getUsersVCard(t.getUid(),function(e){a.isFalsy(e.getUid())||l.CometChat.appSettings.getSubscriptionType()==I.AppSettings.SUBSCRIPTION_TYPE_FRIENDS&&u.userHandlers.map(function(n){if(n)switch(e.setLastActiveAt(t.getLastActiveAt()),t.getStatus()){case d.PresenceConstatnts.STATUS.ONLINE:e.setStatus(d.PresenceConstatnts.STATUS.ONLINE),a.isFalsy(n._eventListener.onUserOnline)||n._eventListener.onUserOnline(e);break;default:e.setStatus(d.PresenceConstatnts.STATUS.OFFLINE),a.isFalsy(n._eventListener.onUserOffline)||n._eventListener.onUserOffline(e)}})})}return!0},null,"presence"),u.connection.addHandler(function(e){0<e.getElementsByTagName("muc:join").length&&u.connection.muc.join(e.getAttribute(d.MessageConstatnts.XMPP_KEYS.FROM),u.connection.jid,null,null,null,null,0);var t=e.getElementsByTagName("presence");return 0<(t=Array.prototype.slice.call(t)).length&&u.iqHandlers.map(function(e){e._callback(p.PresenceController.transformPresences(t))}),!0},null,"iq"),C.LocalStorage.getInstance().get(d.APP_SETTINGS.APP_SETTINGS).then(function(e){a.isFalsy(e)?a.getAppSettings().then(function(e){u.connection.addHandler(function(e){var t=JSON.parse(unescape(g.parseHTML(e.getElementsByTagName("body")[0])).trim().toString()),n=A.UsersController.trasformJSONUser(t);return u.userHandlers.map(function(e){if(e)switch(n.getStatus()){case d.PresenceConstatnts.STATUS.OFFLINE:a.isFalsy(e._eventListener.onUserOffline)||e._eventListener.onUserOffline(n);break;default:a.isFalsy(e._eventListener.onUserOnline)||e._eventListener.onUserOnline(n)}}),!0},null,"message",null,null,d.XMPP.PUBSUB_CHANNEL+"."+e[d.APP_SETTINGS.KEYS.CHAT_HOST],null)}):u.connection.addHandler(function(e){var t=JSON.parse(unescape(g.parseHTML(e.getElementsByTagName("body")[0])).trim().toString()),n=A.UsersController.trasformJSONUser(t);return u.userHandlers.map(function(e){if(e)switch(n.getStatus()){case d.PresenceConstatnts.STATUS.OFFLINE:a.isFalsy(e._eventListener.onUserOffline)||e._eventListener.onUserOffline(n);break;default:a.isFalsy(e._eventListener.onUserOnline)||e._eventListener.onUserOnline(n)}}),!0},null,"message",null,null,d.XMPP.PUBSUB_CHANNEL+"."+e[d.APP_SETTINGS.KEYS.CHAT_HOST],null)}),u.connection.addHandler(function(e){var n;try{try{if(n=h.MessageController.trasformXMPPMessage(e),a.isFalsy(n))if(h.MessageController.isDeliveryReceipt(e))e.getAttribute(d.MessageConstatnts.XMPP_KEYS.TYPE)==d.MessageConstatnts.XMPP_KEYS.TYPE_GROUP&&g.getFullJidForGroup(e.getAttribute(d.MessageConstatnts.XMPP_KEYS.FROM))==t.getInstance().connection.jid||u.publishDeliveryReceipt(e);else{if(!h.MessageController.isReadRceipt(e))return!0;e.getAttribute(d.MessageConstatnts.XMPP_KEYS.TYPE)==d.MessageConstatnts.XMPP_KEYS.TYPE_GROUP&&g.getFullJidForGroup(e.getAttribute(d.MessageConstatnts.XMPP_KEYS.FROM))==t.getInstance().connection.jid||u.publishReadReceipt(e)}else e.getAttribute(d.MessageConstatnts.XMPP_KEYS.TYPE)==d.MessageConstatnts.XMPP_KEYS.TYPE_GROUP?g.getFullJidForGroup(e.getAttribute(d.MessageConstatnts.XMPP_KEYS.FROM))==t.getInstance().connection.jid||h.MessageController.checkIfCabon(e)||u.connection.receipts._processReceipt(e,n.getId()):h.MessageController.checkIfCabon(e)?u.trigerMessageHandler(e):u.connection.receipts._processReceipt(e,n.getId());h.MessageController.isReadRceipt(e)||h.MessageController.isDeliveryReceipt(e)?e=n:e.getAttribute(d.MessageConstatnts.XMPP_KEYS.TYPE)==d.MessageConstatnts.XMPP_KEYS.TYPE_GROUP&&g.getFullJidForGroup(e.getAttribute(d.MessageConstatnts.XMPP_KEYS.FROM))==t.getInstance().connection.jid||(e=n)}catch(n){return a.Logger.error("Error in processing incoming message",{e:n,message:e}),!0}if(!a.isFalsy(e)){try{T.MessageListnerMaping.getInstance().set("all",e.id)}catch(n){a.Logger.error("Error in storing  incoming message id",{e:n})}u.messageHandlers.map(function(t){return o(u,void 0,void 0,function(){var n,r,s;return i(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),t?e instanceof f.Action?[3,4]:[3,1]:[3,4];case 1:return e instanceof m.Call?[3,4]:[3,2];case 2:return r=h.MessageController.trasformJSONMessge(n=e),[4,v.ExtensionController.hookOnMessageReceived(r)];case 3:switch((n=o.sent()).getType()){case d.MessageConstatnts.TYPE.TEXT:a.isFalsy(t._eventListener.onTextMessageReceived)||t._eventListener.onTextMessageReceived(n);break;case d.MessageConstatnts.TYPE.CUSTOM:a.isFalsy(t._eventListener.onCustomMessageReceived)||t._eventListener.onCustomMessageReceived(n);break;default:n.getCategory()==d.MessageCategory.CUSTOM?a.isFalsy(t._eventListener.onCustomMessageReceived)||t._eventListener.onCustomMessageReceived(e):a.isFalsy(t._eventListener.onMediaMessageReceived)||t._eventListener.onMediaMessageReceived(e)}o.label=4;case 4:return[3,6];case 5:return s=o.sent(),a.Logger.error("Error in processing incoming message",{e:s}),[3,6];case 6:return[2]}})})}),e instanceof m.Call&&u.publishCallEvents(e),e instanceof f.Action&&u.publishActionEvents(e)}}catch(n){a.Logger.error("Error in message processing",{error:n})}return!0},null,"message"),u.connection.addHandler(function(e){try{if(0<e.getElementsByTagName("error").length)return!0;var n,r=e.getElementsByTagName("composing"),s=e.getElementsByTagName("paused"),o=e.getAttribute("from"),i=e.getAttribute("type");if(e.getElementsByTagName("body")[0]&&(n=unescape(g.parseHTML(e.getElementsByTagName("body")[0])).trim().toString()),0<r.length||0<s.length)switch(i){case d.XMPP.CONVERSATION.TYPE.CHAT:var c=new S.TypingIndicator(g.getUidFromJid(u.connection.jid),d.MessageConstatnts.RECEIVER_TYPE.USER);u.getUsersVCard(g.getUidFromJid(o),function(e){c.setSender(e),n&&c.setMetadata(n),0<r.length&&y.TypingNotificationController.addIncomingTypingStarted(c),0<s.length&&y.TypingNotificationController.removeIncomingTypingStarted(c),u.messageHandlers.map(function(e){0<r.length&&e._eventListener.onTypingStarted&&e._eventListener.onTypingStarted(c),0<s.length&&e._eventListener.onTypingEnded&&e._eventListener.onTypingEnded(c)})});break;case d.XMPP.CONVERSATION.TYPE.GROUP_CHAT:if(g.getFullJidForGroup(e.getAttribute(d.MessageConstatnts.XMPP_KEYS.FROM))==t.getInstance().connection.jid)return!0;c=new S.TypingIndicator(g.getGUIDFromJID(o),d.MessageConstatnts.RECEIVER_TYPE.GROUP),u.getUsersVCard(g.getUidFromJid(o),function(e){c.setSender(e),n&&c.setMetadata(n),0<r.length&&y.TypingNotificationController.addIncomingTypingStarted(c),0<s.length&&y.TypingNotificationController.removeIncomingTypingStarted(c),u.messageHandlers.map(function(e){0<r.length&&e._eventListener.onTypingStarted&&e._eventListener.onTypingStarted(c),0<s.length&&e._eventListener.onTypingEnded&&e._eventListener.onTypingEnded(c)})})}}catch(e){a.Logger.error("error in message processing",{error:e})}return!0},c.Strophe.NS.CHATSTATES,"message")}}catch(e){a.Logger.error("XMPPHelper: performAfterConnection",e)}})},t.XMPP_HOST=d.XMPP.host,t.XMPP_PORT=d.XMPP.port,t.xMPPConnectionHelper=new t,t.XMPP_BIND_URL="wss://"+t.XMPP_HOST+":"+t.XMPP_PORT+d.XMPP.ws_url,t.XMPP_BIND_URL_WS="wss://"+t.XMPP_HOST+":"+t.XMPP_PORT+d.XMPP.ws_url,t.XMPP_BIND_URL_HTTPS="https://"+t.XMPP_HOST+":"+t.XMPP_PORT+d.XMPP.bind_url,t}();t.XMPPConnectionHelper=N;var O=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.onConnected=void 0,a.isFalsy(e[0].onConnected)||(this.onConnected=e[0].onConnected)};t.XMPPConnectionEventListener=O;var w=function(e){function t(t,n,r,s){var o=e.call(this,t,s)||this;return o._XMPPeventListener=n,r&&(o._cursor=r),o}return s(t,e),t}(t.XMPPListener=function(e,t){this._name=e,this._callback=t});t.XMPPConnectionListener=w},function(e,t,n){"use strict";t.__esModule=!0,t.SERVER_ERRORS={AUTH_ERR:{code:"AUTH_ERR_AUTH_TOKEN_NOT_FOUND",message:"The auth token %s% does not exist. Please make sure you are logged in and have a valid auth token or try login again."}},t.ERRORS={PARAMETER_MISSING:{code:"MISSING_PARAMETERS",name:"MISSING/ INVALID PARAMETER"}},t.INIT_ERROR={NO_APP_ID:{code:t.ERRORS.PARAMETER_MISSING.code,name:t.ERRORS.PARAMETER_MISSING.name,message:"mandatory parameter appId missing",details:{}}},t.GROUP_CREATION_ERRORS={EMPTY_PASSWORD:{code:"ERR_EMPTY_GROUP_PASS",details:void 0,message:"The password is required to join a group.",name:void 0}},t.USERS_REQUEST_ERRORS={EMPTY_USERS_LIST:{code:"EMPTY_USERS_LIST",name:"EMPTY_USERS_LIST",message:"please provide atleat one uid",details:{}}},t.MESSAGES_REQUEST_ERRORS={REQUEST_IN_PROGRESS_ERROR:{code:"REQUEST_IN_PROGRESS",name:"REQUEST_IN_PROGRESS",message:"request already in progress",details:{}},NOT_ENOUGH_PARAMS:{code:"NOT_ENOUGH_PARAMETERS",name:"NOT_ENOUGH_PARAMETERS",message:"you need to set timstamp or message id to fetch next set of messages",details:{}}},t.MESSAGE_ERRORS={INVALID_CUSTOM_DATA:{code:"-1",name:"%s_CUSTOM_DATA",message:"",details:{}}},t.LOGIN_ERROR={NOT_INITIALIZED:{code:"-1",name:"COMETCHAT_INITIALIZATION_NOT_DONE",message:"please initialize the cometchat before using login method",details:{}},UNAUTHORISED:{code:401,name:"USER_NOT_AUTHORISED",message:"provided user is not authorised",details:{}},XMPP_CONNECTION_FAIL:{code:-1,name:"WS_CONNECTION_FAIL",message:"WS Connection failed. %s",details:{}},XMPP_CONNECTION_FAIL_PORT_ERROR:{code:-1,name:"WS_CONNECTION_FAIL",message:"WS Connection failed. Trying to connect with port: %s",details:{}},XMPP_CONNECTION_FALLBACK_FAIL_PORT_ERROR:{code:-1,name:"WS_CONNECTION_FALLBACK_FAIL",message:"WS Connection fallback failed. Trying to connect with port: %s",details:{}},XMPP_AUTH_FAIL:{code:-1,name:"WS_AUTH_FAIL",message:"WS username/password not correct",details:{}},NO_INTERNET:{code:-1,name:"NO_INTERNET_CONNECTION",message:"You do not have internet connection",details:{}}},t.TYPINGNOTIFICATION_CONSTANTS={TOO_MANY_REQUEST:{code:"TOO_MANY_REQUEST",name:"TOO MANY REQUEST",message:"too many request, wait for `%s` seconds before sending next request",details:{}}}},function(e,t,n){var r;window,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,(function(t){return e[t]}).bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/strophe.js")}({"./src/bosh.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core.js"),s=r.default.Strophe,o=r.default.$build;s.Request=function(e,t,n,r){this.id=++s._requestId,this.xmlData=e,this.data=s.serialize(e),this.origFunc=t,this.func=t,this.rid=n,this.date=NaN,this.sends=r||0,this.abort=!1,this.dead=null,this.age=function(){return this.date?(new Date-this.date)/1e3:0},this.timeDead=function(){return this.dead?(new Date-this.dead)/1e3:0},this.xhr=this._newXHR()},s.Request.prototype={getResponse:function(){var e=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if("parsererror"===(e=this.xhr.responseXML.documentElement).tagName)throw s.error("invalid response received"),s.error("responseText: "+this.xhr.responseText),s.error("responseXML: "+s.serialize(this.xhr.responseXML)),new Error("parsererror")}else if(this.xhr.responseText){if(s.debug("Got responseText but no responseXML; attempting to parse it with DOMParser..."),!(e=(new DOMParser).parseFromString(this.xhr.responseText,"application/xml").documentElement))throw new Error("Parsing produced null node");if(e.querySelector("parsererror")){s.error("invalid response received: "+e.querySelector("parsererror").textContent),s.error("responseText: "+this.xhr.responseText);var t=new Error;throw t.name=s.ErrorCondition.BAD_FORMAT,t}}return e},_newXHR:function(){var e=null;return window.XMLHttpRequest?(e=new XMLHttpRequest).overrideMimeType&&e.overrideMimeType("text/xml; charset=utf-8"):window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e.onreadystatechange=this.func.bind(null,this),e}},s.Bosh=function(e){this._conn=e,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this.inactivity=null,this.lastResponseHeaders=null,this._requests=[]},s.Bosh.prototype={strip:null,_buildBody:function(){var e=o("body",{rid:this.rid++,xmlns:s.NS.HTTPBIND});return null!==this.sid&&e.attrs({sid:this.sid}),this._conn.options.keepalive&&this._conn._sessionCachingSupported()&&this._cacheSession(),e},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_connect:function(e,t,n){this.wait=e||this.wait,this.hold=t||this.hold,this.errors=0;var r=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":s.NS.BOSH});n&&r.attrs({route:n});var o=this._conn._connect_cb;this._requests.push(new s.Request(r.tree(),this._onRequestStateChange.bind(this,o.bind(this._conn)),r.tree().getAttribute("rid"))),this._throttledRequestHandler()},_attach:function(e,t,n,r,o,i,a){this._conn.jid=e,this.sid=t,this.rid=n,this._conn.connect_callback=r,this._conn.domain=s.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=o||this.wait,this.hold=i||this.hold,this.window=a||this.window,this._conn._changeConnectStatus(s.Status.ATTACHED,null)},_restore:function(e,t,n,r,o){var i=JSON.parse(window.sessionStorage.getItem("strophe-bosh-session"));if(!(null!=i&&i.rid&&i.sid&&i.jid&&(null==e||s.getBareJidFromJid(i.jid)===s.getBareJidFromJid(e)||null===s.getNodeFromJid(e)&&s.getDomainFromJid(i.jid)===e))){var a=new Error("_restore: no restoreable session.");throw a.name="StropheSessionError",a}this._conn.restored=!0,this._attach(i.jid,i.sid,i.rid,t,n,r,o)},_cacheSession:function(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&window.sessionStorage.setItem("strophe-bosh-session",JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):window.sessionStorage.removeItem("strophe-bosh-session")},_connect_cb:function(e){var t=e.getAttribute("type");if(null!==t&&"terminate"===t){var n=e.getAttribute("condition");s.error("BOSH-Connection failed: "+n);var r=e.getElementsByTagName("conflict");return null!==n?("remote-stream-error"===n&&0<r.length&&(n="conflict"),this._conn._changeConnectStatus(s.Status.CONNFAIL,n)):this._conn._changeConnectStatus(s.Status.CONNFAIL,"unknown"),this._conn._doDisconnect(n),s.Status.CONNFAIL}this.sid||(this.sid=e.getAttribute("sid"));var o=e.getAttribute("requests");o&&(this.window=parseInt(o,10));var i=e.getAttribute("hold");i&&(this.hold=parseInt(i,10));var a=e.getAttribute("wait");a&&(this.wait=parseInt(a,10));var c=e.getAttribute("inactivity");c&&(this.inactivity=parseInt(c,10))},_disconnect:function(e){this._sendTerminate(e)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_emptyQueue:function(){return 0===this._requests.length},_callProtocolErrorHandlers:function(e){var t=this._getRequestStatus(e),n=this._conn.protocolErrorHandlers.HTTP[t];n&&n.call(this,t)},_hitError:function(e){this.errors++,s.warn("request errored, status: "+e+", number of errors: "+this.errors),4<this.errors&&this._conn._onDisconnectTimeout()},_no_auth_received:function(e){s.warn("Server did not yet offer a supported authentication mechanism. Sending a blank poll request."),e=e?e.bind(this._conn):this._conn._connect_cb.bind(this._conn);var t=this._buildBody();this._requests.push(new s.Request(t.tree(),this._onRequestStateChange.bind(this,e),t.tree().getAttribute("rid"))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){this._abortAllRequests()},_abortAllRequests:function(){for(;0<this._requests.length;){var e=this._requests.pop();e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){}}},_onIdle:function(){var e=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===e.length&&!this._conn.disconnecting&&(s.info("no requests during idle cycle, sending blank request"),e.push(null)),!this._conn.paused){if(this._requests.length<2&&0<e.length){for(var t=this._buildBody(),n=0;n<e.length;n++)null!==e[n]&&("restart"===e[n]?t.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":s.NS.BOSH}):t.cnode(e[n]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new s.Request(t.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),t.tree().getAttribute("rid"))),this._throttledRequestHandler()}if(0<this._requests.length){var r=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(s.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),r>Math.floor(s.TIMEOUT*this.wait)&&(s.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(s.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}}},_getRequestStatus:function(e,t){var n;if(4===e.xhr.readyState)try{n=e.xhr.status}catch(e){s.error("Caught an error while retrieving a request's status, reqStatus: "+n)}return void 0===n&&(n="number"==typeof t?t:0),n},_onRequestStateChange:function(e,t){if(s.debug("request id "+t.id+"."+t.sends+" state changed to "+t.xhr.readyState),t.abort)t.abort=!1;else if(4===t.xhr.readyState){var n=this._getRequestStatus(t);if(this.lastResponseHeaders=t.xhr.getAllResponseHeaders(),this.disconnecting&&400<=n)return this._hitError(n),void this._callProtocolErrorHandlers(t);var r=0<n&&n<500,o=t.sends>this._conn.maxRetries;(r||o)&&(this._removeRequest(t),s.debug("request id "+t.id+" should now be removed")),200===n?((this._requests[1]===t||this._requests[0]===t&&0<this._requests.length&&this._requests[0].age()>Math.floor(s.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),this._conn.nextValidRid(Number(t.rid)+1),s.debug("request id "+t.id+"."+t.sends+" got 200"),e(t),this.errors=0):0===n||400<=n&&n<600||12e3<=n?(s.error("request id "+t.id+"."+t.sends+" error "+n+" happened"),this._hitError(n),this._callProtocolErrorHandlers(t),400<=n&&n<500&&(this._conn._changeConnectStatus(s.Status.DISCONNECTING,null),this._conn._doDisconnect())):s.error("request id "+t.id+"."+t.sends+" error "+n+" happened"),r||o?o&&!this._conn.connected&&this._conn._changeConnectStatus(s.Status.CONNFAIL,"giving-up"):this._throttledRequestHandler()}},_processRequest:function(e){var t=this,n=this._requests[e],r=this._getRequestStatus(n,-1);if(n.sends>this._conn.maxRetries)this._conn._onDisconnectTimeout();else{var o=n.age(),i=!isNaN(o)&&o>Math.floor(s.TIMEOUT*this.wait),a=null!==n.dead&&n.timeDead()>Math.floor(s.SECONDARY_TIMEOUT*this.wait);if((i||a||4===n.xhr.readyState&&(r<1||500<=r))&&(a&&s.error("Request ".concat(this._requests[e].id," timed out (secondary), restarting")),n.abort=!0,n.xhr.abort(),n.xhr.onreadystatechange=function(){},this._requests[e]=new s.Request(n.xmlData,n.origFunc,n.rid,n.sends),n=this._requests[e]),0===n.xhr.readyState){s.debug("request id "+n.id+"."+n.sends+" posting");try{var c=this._conn.options.contentType||"text/xml; charset=utf-8";n.xhr.open("POST",this._conn.service,!this._conn.options.sync),void 0!==n.xhr.setRequestHeader&&n.xhr.setRequestHeader("Content-Type",c),this._conn.options.withCredentials&&(n.xhr.withCredentials=!0)}catch(e){return s.error("XHR open failed: "+e.toString()),this._conn.connected||this._conn._changeConnectStatus(s.Status.CONNFAIL,"bad-service"),void this._conn.disconnect()}var l=function(){if(n.date=new Date,t._conn.options.customHeaders){var e=t._conn.options.customHeaders;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.xhr.setRequestHeader(r,e[r])}n.xhr.send(n.data)};if(1<n.sends){var u=1e3*Math.min(Math.floor(s.TIMEOUT*this.wait),Math.pow(n.sends,3));setTimeout(function(){l()},u)}else l();n.sends++,this._conn.xmlOutput!==s.Connection.prototype.xmlOutput&&this._conn.xmlOutput(n.xmlData.nodeName===this.strip&&n.xmlData.childNodes.length?n.xmlData.childNodes[0]:n.xmlData),this._conn.rawOutput!==s.Connection.prototype.rawOutput&&this._conn.rawOutput(n.data)}else s.debug("_processRequest: "+(0===e?"first":"second")+" request has readyState of "+n.xhr.readyState)}},_removeRequest:function(e){s.debug("removing request");for(var t=this._requests.length-1;0<=t;t--)e===this._requests[t]&&this._requests.splice(t,1);e.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(e){var t=this._requests[e];null===t.dead&&(t.dead=new Date),this._processRequest(e)},_reqToData:function(e){try{return e.getResponse()}catch(e){if("parsererror"!==e.message)throw e;this._conn.disconnect("strophe-parsererror")}},_sendTerminate:function(e){s.info("_sendTerminate was called");var t=this._buildBody().attrs({type:"terminate"});e&&t.cnode(e.tree());var n=new s.Request(t.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),t.tree().getAttribute("rid"));this._requests.push(n),this._throttledRequestHandler()},_send:function(){var e=this;clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(function(){return e._conn._onIdle()},100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){s.debug(this._requests?"_throttledRequestHandler called with "+this._requests.length+" requests":"_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(0<this._requests.length&&this._processRequest(0),1<this._requests.length&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}}},"./src/core.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/md5.js"),s=n("./src/sha1.js"),o=n("./src/utils.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return new u.Builder(e,t)}function c(e){return new u.Builder("iq",e)}function l(e){return new u.Builder("presence",e)}var u={VERSION:"1.3.0",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},XHTML:{tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"],validTag:function(e){for(var t=0;t<u.XHTML.tags.length;t++)if(e===u.XHTML.tags[t])return!0;return!1},validAttribute:function(e,t){if(void 0!==u.XHTML.attributes[e]&&0<u.XHTML.attributes[e].length)for(var n=0;n<u.XHTML.attributes[e].length;n++)if(t===u.XHTML.attributes[e][n])return!0;return!1},validCSS:function(e){for(var t=0;t<u.XHTML.css.length;t++)if(e===u.XHTML.css[t])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9,CONNTIMEOUT:10},ErrorCondition:{BAD_FORMAT:"bad-format",CONFLICT:"conflict",MISSING_JID_NODE:"x-strophe-bad-non-anon-jid",NO_AUTH_MECH:"no-auth-mech",UNKNOWN_REASON:"unknown"},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,addNamespace:function(e,t){u.NS[e]=t},forEachChild:function(e,t,n){for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r];s.nodeType!==u.ElementType.NORMAL||t&&!this.isTagEqual(s,t)||n(s)}},isTagEqual:function(e,t){return e.tagName===t},_xmlGenerator:null,_makeGenerator:function(){var e;return void 0===document.implementation.createDocument||document.implementation.createDocument&&document.documentMode&&document.documentMode<10?(e=this._getIEXmlDom()).appendChild(e.createElement("strophe")):e=document.implementation.createDocument("jabber:client","strophe",null),e},xmlGenerator:function(){return u._xmlGenerator||(u._xmlGenerator=u._makeGenerator()),u._xmlGenerator},_getIEXmlDom:function(){for(var e=null,t=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],n=0;n<t.length&&null===e;n++)try{e=new ActiveXObject(t[n])}catch(t){e=null}return e},xmlElement:function(e){if(!e)return null;for(var t=u.xmlGenerator().createElement(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r)if("string"==typeof r||"number"==typeof r)t.appendChild(u.xmlTextNode(r));else if("object"===i(r)&&"function"==typeof r.sort)for(var s=0;s<r.length;s++){var o=r[s];"object"===i(o)&&"function"==typeof o.sort&&null!=o[1]&&t.setAttribute(o[0],o[1])}else if("object"===i(r))for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&null!=r[a]&&t.setAttribute(a,r[a])}return t},xmlescape:function(e){return(e=(e=(e=(e=e.replace(/\&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/'/g,"&apos;")).replace(/"/g,"&quot;")},xmlunescape:function(e){return(e=(e=(e=(e=e.replace(/\&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&apos;/g,"'")).replace(/&quot;/g,'"')},xmlTextNode:function(e){return u.xmlGenerator().createTextNode(e)},xmlHtmlNode:function(e){var t;return DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)),t},getText:function(e){if(!e)return null;var t="";0===e.childNodes.length&&e.nodeType===u.ElementType.TEXT&&(t+=e.nodeValue);for(var n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeType===u.ElementType.TEXT&&(t+=e.childNodes[n].nodeValue);return u.xmlescape(t)},copyElement:function(e){var t;if(e.nodeType===u.ElementType.NORMAL){t=u.xmlElement(e.tagName);for(var n=0;n<e.attributes.length;n++)t.setAttribute(e.attributes[n].nodeName,e.attributes[n].value);for(var r=0;r<e.childNodes.length;r++)t.appendChild(u.copyElement(e.childNodes[r]))}else e.nodeType===u.ElementType.TEXT&&(t=u.xmlGenerator().createTextNode(e.nodeValue));return t},createHtml:function(e){var t;if(e.nodeType===u.ElementType.NORMAL){var n=e.nodeName.toLowerCase();if(u.XHTML.validTag(n))try{t=u.xmlElement(n);for(var r=0;r<u.XHTML.attributes[n].length;r++){var s=u.XHTML.attributes[n][r],o=e.getAttribute(s);if(null!=o&&""!==o&&!1!==o&&0!==o)if("style"===s&&"object"===i(o)&&void 0!==o.cssText&&(o=o.cssText),"style"===s){for(var a=[],c=o.split(";"),l=0;l<c.length;l++){var h=c[l].split(":"),d=h[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase();if(u.XHTML.validCSS(d)){var p=h[1].replace(/^\s*/,"").replace(/\s*$/,"");a.push(d+": "+p)}}0<a.length&&(o=a.join("; "),t.setAttribute(s,o))}else t.setAttribute(s,o)}for(var f=0;f<e.childNodes.length;f++)t.appendChild(u.createHtml(e.childNodes[f]))}catch(e){t=u.xmlTextNode("")}else{t=u.xmlGenerator().createDocumentFragment();for(var g=0;g<e.childNodes.length;g++)t.appendChild(u.createHtml(e.childNodes[g]))}}else if(e.nodeType===u.ElementType.FRAGMENT){t=u.xmlGenerator().createDocumentFragment();for(var E=0;E<e.childNodes.length;E++)t.appendChild(u.createHtml(e.childNodes[E]))}else e.nodeType===u.ElementType.TEXT&&(t=u.xmlTextNode(e.nodeValue));return t},escapeNode:function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(e){return"string"!=typeof e?e:e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(e){return e.indexOf("@")<0?null:e.split("@")[0]},getDomainFromJid:function(e){var t=u.getBareJidFromJid(e);if(t.indexOf("@")<0)return t;var n=t.split("@");return n.splice(0,1),n.join("@")},getResourceFromJid:function(e){var t=e.split("/");return t.length<2?null:(t.splice(0,1),t.join("/"))},getBareJidFromJid:function(e){return e?e.split("/")[0]:null},_handleError:function(e){void 0!==e.stack&&u.fatal(e.stack),u.fatal(e.sourceURL?"error: "+this.handler+" "+e.sourceURL+":"+e.line+" - "+e.name+": "+e.message:e.fileName?"error: "+this.handler+" "+e.fileName+":"+e.lineNumber+" - "+e.name+": "+e.message:"error: "+e.message)},log:function(e,t){e===this.LogLevel.FATAL&&"object"===i(window.console)&&"function"==typeof window.console.error&&window.console.error(t)},debug:function(e){this.log(this.LogLevel.DEBUG,e)},info:function(e){this.log(this.LogLevel.INFO,e)},warn:function(e){this.log(this.LogLevel.WARN,e)},error:function(e){this.log(this.LogLevel.ERROR,e)},fatal:function(e){this.log(this.LogLevel.FATAL,e)},serialize:function(e){if(!e)return null;"function"==typeof e.tree&&(e=e.tree());var t=function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(Array(e.attributes.length).keys()).map(function(t){return e.attributes[t].nodeName});t.sort();var n=t.reduce(function(t,n){return"".concat(t," ").concat(n,'="').concat(u.xmlescape(e.attributes.getNamedItem(n).value),'"')},"<".concat(e.nodeName));if(0<e.childNodes.length){n+=">";for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r];switch(s.nodeType){case u.ElementType.NORMAL:n+=u.serialize(s);break;case u.ElementType.TEXT:n+=u.xmlescape(s.nodeValue);break;case u.ElementType.CDATA:n+="<![CDATA["+s.nodeValue+"]]>"}}n+="</"+e.nodeName+">"}else n+="/>";return n},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(e,t){u._connectionPlugins[e]=t},Builder:function(e,t){"presence"!==e&&"message"!==e&&"iq"!==e||(t&&!t.xmlns?t.xmlns=u.NS.CLIENT:t||(t={xmlns:u.NS.CLIENT})),this.nodeTree=u.xmlElement(e,t),this.node=this.nodeTree}};u.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return u.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},root:function(){return this.node=this.nodeTree,this},attrs:function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(void 0===e[t]?this.node.removeAttribute(t):this.node.setAttribute(t,e[t]));return this},c:function(e,t,n){var r=u.xmlElement(e,t,n);return this.node.appendChild(r),"string"!=typeof n&&"number"!=typeof n&&(this.node=r),this},cnode:function(e){var t,n=u.xmlGenerator();try{t=void 0!==n.importNode}catch(e){t=!1}var r=t?n.importNode(e,!0):u.copyElement(e);return this.node.appendChild(r),this.node=r,this},t:function(e){var t=u.xmlTextNode(e);return this.node.appendChild(t),this},h:function(e){var t=document.createElement("body");t.innerHTML=e;for(var n=u.createHtml(t);0<n.childNodes.length;)this.node.appendChild(n.childNodes[0]);return this}},u.Handler=function(e,t,n,r,s,o,i){this.handler=e,this.ns=t,this.name=n,this.type=r,this.id=s,this.options=i||{matchBareFromJid:!1,ignoreNamespaceFragment:!1},this.options.matchBare&&(u.warn('The "matchBare" option is deprecated, use "matchBareFromJid" instead.'),this.options.matchBareFromJid=this.options.matchBare,delete this.options.matchBare),this.from=this.options.matchBareFromJid?o?u.getBareJidFromJid(o):null:o,this.user=!0},u.Handler.prototype={getNamespace:function(e){var t=e.getAttribute("xmlns");return t&&this.options.ignoreNamespaceFragment&&(t=t.split("#")[0]),t},namespaceMatch:function(e){var t=this,n=!1;return!this.ns||(u.forEachChild(e,null,function(e){t.getNamespace(e)===t.ns&&(n=!0)}),n||this.getNamespace(e)===this.ns)},isMatch:function(e){var t=e.getAttribute("from");this.options.matchBareFromJid&&(t=u.getBareJidFromJid(t));var n=e.getAttribute("type");return!(!this.namespaceMatch(e)||this.name&&!u.isTagEqual(e,this.name)||this.type&&(Array.isArray(this.type)?-1===this.type.indexOf(n):n!==this.type)||this.id&&e.getAttribute("id")!==this.id||this.from&&t!==this.from)},run:function(e){var t=null;try{t=this.handler(e)}catch(e){throw u._handleError(e),e}return t},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},u.TimedHandler=function(e,t){this.period=e,this.handler=t,this.lastCalled=(new Date).getTime(),this.user=!0},u.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},u.Connection=function(e,t){var n=this;this.service=e,this.options=t||{};var r=this.options.protocol||"";for(var s in this._proto=0===e.indexOf("ws:")||0===e.indexOf("wss:")||0===r.indexOf("ws")?new u.Websocket(this):new u.Bosh(this),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.protocolErrorHandlers={HTTP:{},websocket:{}},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(function(){return n._onIdle()},100),o.default.addCookies(this.options.cookies),this.registerSASLMechanisms(this.options.mechanisms),u._connectionPlugins)if(Object.prototype.hasOwnProperty.call(u._connectionPlugins,s)){var i=function(){};i.prototype=u._connectionPlugins[s],this[s]=new i,this[s].init(this)}},u.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this._data=[],this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(e){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});return"string"==typeof e||"number"==typeof e?t+":"+e:t+""},addProtocolErrorHandler:function(e,t,n){this.protocolErrorHandlers[e][t]=n},connect:function(e,t,n,r,s,o,i){this.jid=e,this.authzid=u.getBareJidFromJid(this.jid),this.authcid=i||u.getNodeFromJid(this.jid),this.pass=t,this.servtype="xmpp",this.connect_callback=n,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.domain=u.getDomainFromJid(this.jid),this._changeConnectStatus(u.Status.CONNECTING,null),this._proto._connect(r,s,o)},attach:function(e,t,n,r,s,o,i){if(!(this._proto instanceof u.Bosh)){var a=new Error('The "attach" method can only be used with a BOSH connection.');throw a.name="StropheSessionError",a}this._proto._attach(e,t,n,r,s,o,i)},restore:function(e,t,n,r,s){if(!this._sessionCachingSupported()){var o=new Error('The "restore" method can only be used with a BOSH connection.');throw o.name="StropheSessionError",o}this._proto._restore(e,t,n,r,s)},_sessionCachingSupported:function(){if(this._proto instanceof u.Bosh){if(!JSON)return!1;try{sessionStorage.setItem("_strophe_","_strophe_"),sessionStorage.removeItem("_strophe_")}catch(e){return!1}return!0}return!1},xmlInput:function(e){},xmlOutput:function(e){},rawInput:function(e){},rawOutput:function(e){},nextValidRid:function(e){},send:function(e){if(null!==e){if("function"==typeof e.sort)for(var t=0;t<e.length;t++)this._queueData(e[t]);else this._queueData("function"==typeof e.tree?e.tree():e);this._proto._send()}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendPresence:function(e,t,n,r){var s=this,o=null;"function"==typeof e.tree&&(e=e.tree());var i=e.getAttribute("id");if(i||(i=this.getUniqueId("sendPresence"),e.setAttribute("id",i)),"function"==typeof t||"function"==typeof n){var a=this.addHandler(function(e){o&&s.deleteTimedHandler(o),"error"===e.getAttribute("type")?n&&n(e):t&&t(e)},null,"presence",null,i);r&&(o=this.addTimedHandler(r,function(){return s.deleteHandler(a),n&&n(null),!1}))}return this.send(e),i},sendIQ:function(e,t,n,r){var s=this,o=null;"function"==typeof e.tree&&(e=e.tree());var i=e.getAttribute("id");if(i||(i=this.getUniqueId("sendIQ"),e.setAttribute("id",i)),"function"==typeof t||"function"==typeof n){var a=this.addHandler(function(e){o&&s.deleteTimedHandler(o);var r=e.getAttribute("type");if("result"===r)t&&t(e);else{if("error"!==r){var i=new Error("Got bad IQ type of ".concat(r));throw i.name="StropheError",i}n&&n(e)}},null,"iq",["error","result"],i);r&&(o=this.addTimedHandler(r,function(){return s.deleteHandler(a),n&&n(null),!1}))}return this.send(e),i},_queueData:function(e){if(null===e||!e.tagName||!e.childNodes){var t=new Error("Cannot queue non-DOMElement.");throw t.name="StropheError",t}this._data.push(e)},_sendRestart:function(){var e=this;this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout(function(){return e._onIdle()},100)},addTimedHandler:function(e,t){var n=new u.TimedHandler(e,t);return this.addTimeds.push(n),n},deleteTimedHandler:function(e){this.removeTimeds.push(e)},addHandler:function(e,t,n,r,s,o,i){var a=new u.Handler(e,t,n,r,s,o,i);return this.addHandlers.push(a),a},deleteHandler:function(e){this.removeHandlers.push(e);var t=this.addHandlers.indexOf(e);0<=t&&this.addHandlers.splice(t,1)},registerSASLMechanisms:function(e){this.mechanisms={},(e=e||[u.SASLAnonymous,u.SASLExternal,u.SASLMD5,u.SASLOAuthBearer,u.SASLXOAuth2,u.SASLPlain,u.SASLSHA1]).forEach(this.registerSASLMechanism.bind(this))},registerSASLMechanism:function(e){this.mechanisms[e.prototype.name]=e},disconnect:function(e){if(this._changeConnectStatus(u.Status.DISCONNECTING,e),u.info("Disconnect was called because: "+e),this.connected){var t=!1;this.disconnecting=!0,this.authenticated&&(t=l({xmlns:u.NS.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(t)}else u.info("Disconnect was called before Strophe connected to the server"),this._proto._abortAllRequests(),this._doDisconnect()},_changeConnectStatus:function(e,t,n){for(var r in u._connectionPlugins)if(Object.prototype.hasOwnProperty.call(u._connectionPlugins,r)){var s=this[r];if(s.statusChanged)try{s.statusChanged(e,t)}catch(e){u.error("".concat(r," plugin caused an exception changing status: ").concat(e))}}if(this.connect_callback)try{this.connect_callback(e,t,n)}catch(e){u._handleError(e),u.error("User connection callback caused an exception: ".concat(e))}},_doDisconnect:function(e){"number"==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),u.info("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(u.Status.DISCONNECTED,e),this.connected=!1},_dataRecv:function(e,t){var n=this;u.info("_dataRecv called");var r=this._proto._reqToData(e);if(null!==r){for(this.xmlInput!==u.Connection.prototype.xmlInput&&this.xmlInput(r.nodeName===this._proto.strip&&r.childNodes.length?r.childNodes[0]:r),this.rawInput!==u.Connection.prototype.rawInput&&this.rawInput(t||u.serialize(r));0<this.removeHandlers.length;){var s=this.removeHandlers.pop(),o=this.handlers.indexOf(s);0<=o&&this.handlers.splice(o,1)}for(;0<this.addHandlers.length;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())this._doDisconnect();else{var i=r.getAttribute("type");if(null!==i&&"terminate"===i){if(this.disconnecting)return;var a=r.getAttribute("condition"),c=r.getElementsByTagName("conflict");return null!==a?("remote-stream-error"===a&&0<c.length&&(a="conflict"),this._changeConnectStatus(u.Status.CONNFAIL,a)):this._changeConnectStatus(u.Status.CONNFAIL,u.ErrorCondition.UNKOWN_REASON),void this._doDisconnect(a)}u.forEachChild(r,null,function(e){var t=n.handlers;n.handlers=[];for(var r=0;r<t.length;r++){var s=t[r];try{!s.isMatch(e)||!n.authenticated&&s.user?n.handlers.push(s):s.run(e)&&n.handlers.push(s)}catch(e){u.warn("Removing Strophe handlers due to uncaught exception: "+e.message)}}})}}},mechanisms:{},_connect_cb:function(e,t,n){var r;u.info("_connect_cb was called"),this.connected=!0;try{r=this._proto._reqToData(e)}catch(e){if(e.name!==u.ErrorCondition.BAD_FORMAT)throw e;this._changeConnectStatus(u.Status.CONNFAIL,u.ErrorCondition.BAD_FORMAT),this._doDisconnect(u.ErrorCondition.BAD_FORMAT)}if(r&&(this.xmlInput!==u.Connection.prototype.xmlInput&&this.xmlInput(r.nodeName===this._proto.strip&&r.childNodes.length?r.childNodes[0]:r),this.rawInput!==u.Connection.prototype.rawInput&&this.rawInput(n||u.serialize(r)),this._proto._connect_cb(r)!==u.Status.CONNFAIL))if(r.getElementsByTagNameNS?0<r.getElementsByTagNameNS(u.NS.STREAM,"features").length:0<r.getElementsByTagName("stream:features").length||0<r.getElementsByTagName("features").length){var s=[],o=r.getElementsByTagName("mechanism");if(0<o.length)for(var i=0;i<o.length;i++){var a=u.getText(o[i]);this.mechanisms[a]&&s.push(this.mechanisms[a])}0!==s.length||0!==r.getElementsByTagName("auth").length?!1!==this.do_authentication&&this.authenticate(s):this._proto._no_auth_received(t)}else this._proto._no_auth_received(t)},sortMechanismsByPriority:function(e){for(var t=0;t<e.length-1;++t){for(var n=t,r=t+1;r<e.length;++r)e[r].prototype.priority>e[n].prototype.priority&&(n=r);if(n!==t){var s=e[t];e[t]=e[n],e[n]=s}}return e},_attemptSASLAuth:function(e){e=this.sortMechanismsByPriority(e||[]);for(var t=!1,n=0;n<e.length;++n)if(e[n].prototype.test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new e[n],this._sasl_mechanism.onStart(this);var r=a("auth",{xmlns:u.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var s=this._sasl_mechanism.onChallenge(this,null);r.t(btoa(s))}this.send(r.tree()),t=!0;break}return t},_attemptLegacyAuth:function(){null===u.getNodeFromJid(this.jid)?(this._changeConnectStatus(u.Status.CONNFAIL,u.ErrorCondition.MISSING_JID_NODE),this.disconnect(u.ErrorCondition.MISSING_JID_NODE)):(this._changeConnectStatus(u.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(c({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:u.NS.AUTH}).c("username",{}).t(u.getNodeFromJid(this.jid)).tree()))},authenticate:function(e){this._attemptSASLAuth(e)||this._attemptLegacyAuth()},_sasl_challenge_cb:function(e){var t=atob(u.getText(e)),n=this._sasl_mechanism.onChallenge(this,t),r=a("response",{xmlns:u.NS.SASL});return""!==n&&r.t(btoa(n)),this.send(r.tree()),!0},_auth1_cb:function(e){var t=c({type:"set",id:"_auth_2"}).c("query",{xmlns:u.NS.AUTH}).c("username",{}).t(u.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return u.getResourceFromJid(this.jid)||(this.jid=u.getBareJidFromJid(this.jid)+"/strophe"),t.up().c("resource",{}).t(u.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(t.tree()),!1},_sasl_success_cb:function(e){var t=this;if(this._sasl_data["server-signature"]){var n,r=atob(u.getText(e)).match(/([a-z]+)=([^,]+)(,|$)/);if("v"===r[1]&&(n=r[2]),n!==this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}u.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);var s=[],o=function(e,n){for(;e.length;)t.deleteHandler(e.pop());return t._sasl_auth1_cb(n),!1};return s.push(this._addSysHandler(function(e){return o(s,e)},null,"stream:features",null,null)),s.push(this._addSysHandler(function(e){return o(s,e)},u.NS.STREAM,"features",null,null)),this._sendRestart(),!1},_sasl_auth1_cb:function(e){this.features=e;for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];"bind"===n.nodeName&&(this.do_bind=!0),"session"===n.nodeName&&(this.do_session=!0)}if(!this.do_bind)return this._changeConnectStatus(u.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var r=u.getResourceFromJid(this.jid);return this.send(r?c({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:u.NS.BIND}).c("resource",{}).t(r).tree():c({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:u.NS.BIND}).tree()),!1},_sasl_bind_cb:function(e){var t;if("error"===e.getAttribute("type"))return u.info("SASL binding failed."),0<e.getElementsByTagName("conflict").length&&(t=u.ErrorCondition.CONFLICT),this._changeConnectStatus(u.Status.AUTHFAIL,t,e),!1;var n=e.getElementsByTagName("bind");if(!(0<n.length))return u.info("SASL binding failed."),this._changeConnectStatus(u.Status.AUTHFAIL,null,e),!1;var r=n[0].getElementsByTagName("jid");0<r.length&&(this.jid=u.getText(r[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(c({type:"set",id:"_session_auth_2"}).c("session",{xmlns:u.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(u.Status.CONNECTED,null)))},_sasl_session_cb:function(e){if("result"===e.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(u.Status.CONNECTED,null);else if("error"===e.getAttribute("type"))return u.info("Session creation failed."),this._changeConnectStatus(u.Status.AUTHFAIL,null,e),!1;return!1},_sasl_failure_cb:function(e){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(u.Status.AUTHFAIL,null,e),!1},_auth2_cb:function(e){return"result"===e.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(u.Status.CONNECTED,null)):"error"===e.getAttribute("type")&&(this._changeConnectStatus(u.Status.AUTHFAIL,null,e),this.disconnect("authentication failed")),!1},_addSysTimedHandler:function(e,t){var n=new u.TimedHandler(e,t);return n.user=!1,this.addTimeds.push(n),n},_addSysHandler:function(e,t,n,r,s){var o=new u.Handler(e,t,n,r,s);return o.user=!1,this.addHandlers.push(o),o},_onDisconnectTimeout:function(){return u.info("_onDisconnectTimeout was called"),this._changeConnectStatus(u.Status.CONNTIMEOUT,null),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(){for(var e=this;0<this.addTimeds.length;)this.timedHandlers.push(this.addTimeds.pop());for(;0<this.removeTimeds.length;){var t=this.removeTimeds.pop(),n=this.timedHandlers.indexOf(t);0<=n&&this.timedHandlers.splice(n,1)}for(var r=(new Date).getTime(),s=[],o=0;o<this.timedHandlers.length;o++){var i=this.timedHandlers[o];!this.authenticated&&i.user||(i.lastCalled+i.period-r<=0?i.run()&&s.push(i):s.push(i))}this.timedHandlers=s,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout(function(){return e._onIdle()},100))}},u.SASLMechanism=function(e,t,n){this.name=e,this.isClientFirst=t,this.priority=n},u.SASLMechanism.prototype={test:function(e){return!0},onStart:function(e){this._connection=e},onChallenge:function(e,t){throw new Error("You should implement challenge handling!")},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},u.SASLAnonymous=function(){},u.SASLAnonymous.prototype=new u.SASLMechanism("ANONYMOUS",!1,20),u.SASLAnonymous.prototype.test=function(e){return null===e.authcid},u.SASLPlain=function(){},u.SASLPlain.prototype=new u.SASLMechanism("PLAIN",!0,50),u.SASLPlain.prototype.test=function(e){return null!==e.authcid},u.SASLPlain.prototype.onChallenge=function(e){var t=e.authzid;return t+="\0",t+=e.authcid,t+="\0",o.default.utf16to8(t+=e.pass)},u.SASLSHA1=function(){},u.SASLSHA1.prototype=new u.SASLMechanism("SCRAM-SHA-1",!0,70),u.SASLSHA1.prototype.test=function(e){return null!==e.authcid},u.SASLSHA1.prototype.onChallenge=function(e,t,n){var i=n||r.default.hexdigest(1234567890*Math.random()),a="n="+o.default.utf16to8(e.authcid);return a+=",r=",a+=i,e._sasl_data.cnonce=i,a="n,,"+(e._sasl_data["client-first-message-bare"]=a),this.onChallenge=function(e,t){for(var n,r,i,a,c,l,u,h,d="c=biws,",p="".concat(e._sasl_data["client-first-message-bare"],",").concat(t,","),f=e._sasl_data.cnonce,g=/([a-z]+)=([^,]+)(,|$)/;t.match(g);){var E=t.match(g);switch(t=t.replace(E[0],""),E[1]){case"r":n=E[2];break;case"s":r=E[2];break;case"i":i=E[2]}}if(n.substr(0,f.length)!==f)return e._sasl_data={},e._sasl_failure_cb();p+=d+="r="+n,r=atob(r),r+="\0\0\0\x01";var m=o.default.utf16to8(e.pass);for(a=l=s.default.core_hmac_sha1(m,r),u=1;u<i;u++){for(c=s.default.core_hmac_sha1(m,s.default.binb2str(l)),h=0;h<5;h++)a[h]^=c[h];l=c}a=s.default.binb2str(a);var _=s.default.core_hmac_sha1(a,"Client Key"),C=s.default.str_hmac_sha1(a,"Server Key"),S=s.default.core_hmac_sha1(s.default.str_sha1(s.default.binb2str(_)),p);for(e._sasl_data["server-signature"]=s.default.b64_hmac_sha1(C,p),h=0;h<5;h++)_[h]^=S[h];return d+",p="+btoa(s.default.binb2str(_))},a},u.SASLMD5=function(){},u.SASLMD5.prototype=new u.SASLMechanism("DIGEST-MD5",!1,60),u.SASLMD5.prototype.test=function(e){return null!==e.authcid},u.SASLMD5.prototype._quote=function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},u.SASLMD5.prototype.onChallenge=function(e,t,n){for(var s=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,i=n||r.default.hexdigest(""+1234567890*Math.random()),a="",c=null,l="";t.match(s);){var u=t.match(s);switch(t=t.replace(u[0],""),u[2]=u[2].replace(/^"(.+)"$/,"$1"),u[1]){case"realm":a=u[2];break;case"nonce":l=u[2];break;case"qop":break;case"host":c=u[2]}}var h=e.servtype+"/"+e.domain;null!==c&&(h=h+"/"+c);var d=o.default.utf16to8(e.authcid+":"+a+":"+this._connection.pass),p=r.default.hash(d)+":"+l+":"+i,f="AUTHENTICATE:"+h,g="";return g+="charset=utf-8,",g+="username="+this._quote(o.default.utf16to8(e.authcid))+",",g+="realm="+this._quote(a)+",",g+="nonce="+this._quote(l)+",",g+="nc=00000001,",g+="cnonce="+this._quote(i)+",",g+="digest-uri="+this._quote(h)+",",g+="response="+r.default.hexdigest(r.default.hexdigest(p)+":"+l+":00000001:"+i+":auth:"+r.default.hexdigest(f))+",",g+="qop=auth",this.onChallenge=function(){return""},g},u.SASLOAuthBearer=function(){},u.SASLOAuthBearer.prototype=new u.SASLMechanism("OAUTHBEARER",!0,40),u.SASLOAuthBearer.prototype.test=function(e){return null!==e.pass},u.SASLOAuthBearer.prototype.onChallenge=function(e){var t="n,";return null!==e.authcid&&(t=t+"a="+e.authzid),t+=",",t+="\x01",t+="auth=Bearer ",t+=e.pass,t+="\x01",o.default.utf16to8(t+="\x01")},u.SASLExternal=function(){},u.SASLExternal.prototype=new u.SASLMechanism("EXTERNAL",!0,10),u.SASLExternal.prototype.onChallenge=function(e){return e.authcid===e.authzid?"":e.authzid},u.SASLXOAuth2=function(){},u.SASLXOAuth2.prototype=new u.SASLMechanism("X-OAUTH2",!0,30),u.SASLXOAuth2.prototype.test=function(e){return null!==e.pass},u.SASLXOAuth2.prototype.onChallenge=function(e){var t="\0";return null!==e.authcid&&(t+=e.authzid),t+="\0",o.default.utf16to8(t+=e.pass)},t.default={Strophe:u,$build:a,$iq:c,$msg:function(e){return new u.Builder("message",e)},$pres:l,SHA1:s.default,MD5:r.default,b64_hmac_sha1:s.default.b64_hmac_sha1,b64_sha1:s.default.b64_sha1,str_hmac_sha1:s.default.str_hmac_sha1,str_sha1:s.default.str_sha1}},"./src/md5.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});var r=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},s=function(e){for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t},o=function(e,t,n,s,o,i){return r((a=r(r(t,e),r(s,i)))<<(c=o)|a>>>32-c,n);var a,c},i=function(e,t,n,r,s,i,a){return o(t&n|~t&r,e,t,s,i,a)},a=function(e,t,n,r,s,i,a){return o(t&r|n&~r,e,t,s,i,a)},c=function(e,t,n,r,s,i,a){return o(t^n^r,e,t,s,i,a)},l=function(e,t,n,r,s,i,a){return o(n^(t|~r),e,t,s,i,a)},u=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n,s,o,u,h=1732584193,d=-271733879,p=-1732584194,f=271733878,g=0;g<e.length;g+=16)h=i(n=h,s=d,o=p,u=f,e[g+0],7,-680876936),f=i(f,h,d,p,e[g+1],12,-389564586),p=i(p,f,h,d,e[g+2],17,606105819),d=i(d,p,f,h,e[g+3],22,-1044525330),h=i(h,d,p,f,e[g+4],7,-176418897),f=i(f,h,d,p,e[g+5],12,1200080426),p=i(p,f,h,d,e[g+6],17,-1473231341),d=i(d,p,f,h,e[g+7],22,-45705983),h=i(h,d,p,f,e[g+8],7,1770035416),f=i(f,h,d,p,e[g+9],12,-1958414417),p=i(p,f,h,d,e[g+10],17,-42063),d=i(d,p,f,h,e[g+11],22,-1990404162),h=i(h,d,p,f,e[g+12],7,1804603682),f=i(f,h,d,p,e[g+13],12,-40341101),p=i(p,f,h,d,e[g+14],17,-1502002290),d=i(d,p,f,h,e[g+15],22,1236535329),h=a(h,d,p,f,e[g+1],5,-165796510),f=a(f,h,d,p,e[g+6],9,-1069501632),p=a(p,f,h,d,e[g+11],14,643717713),d=a(d,p,f,h,e[g+0],20,-373897302),h=a(h,d,p,f,e[g+5],5,-701558691),f=a(f,h,d,p,e[g+10],9,38016083),p=a(p,f,h,d,e[g+15],14,-660478335),d=a(d,p,f,h,e[g+4],20,-405537848),h=a(h,d,p,f,e[g+9],5,568446438),f=a(f,h,d,p,e[g+14],9,-1019803690),p=a(p,f,h,d,e[g+3],14,-187363961),d=a(d,p,f,h,e[g+8],20,1163531501),h=a(h,d,p,f,e[g+13],5,-1444681467),f=a(f,h,d,p,e[g+2],9,-51403784),p=a(p,f,h,d,e[g+7],14,1735328473),d=a(d,p,f,h,e[g+12],20,-1926607734),h=c(h,d,p,f,e[g+5],4,-378558),f=c(f,h,d,p,e[g+8],11,-2022574463),p=c(p,f,h,d,e[g+11],16,1839030562),d=c(d,p,f,h,e[g+14],23,-35309556),h=c(h,d,p,f,e[g+1],4,-1530992060),f=c(f,h,d,p,e[g+4],11,1272893353),p=c(p,f,h,d,e[g+7],16,-155497632),d=c(d,p,f,h,e[g+10],23,-1094730640),h=c(h,d,p,f,e[g+13],4,681279174),f=c(f,h,d,p,e[g+0],11,-358537222),p=c(p,f,h,d,e[g+3],16,-722521979),d=c(d,p,f,h,e[g+6],23,76029189),h=c(h,d,p,f,e[g+9],4,-640364487),f=c(f,h,d,p,e[g+12],11,-421815835),p=c(p,f,h,d,e[g+15],16,530742520),d=c(d,p,f,h,e[g+2],23,-995338651),h=l(h,d,p,f,e[g+0],6,-198630844),f=l(f,h,d,p,e[g+7],10,1126891415),p=l(p,f,h,d,e[g+14],15,-1416354905),d=l(d,p,f,h,e[g+5],21,-57434055),h=l(h,d,p,f,e[g+12],6,1700485571),f=l(f,h,d,p,e[g+3],10,-1894986606),p=l(p,f,h,d,e[g+10],15,-1051523),d=l(d,p,f,h,e[g+1],21,-2054922799),h=l(h,d,p,f,e[g+8],6,1873313359),f=l(f,h,d,p,e[g+15],10,-30611744),p=l(p,f,h,d,e[g+6],15,-1560198380),d=l(d,p,f,h,e[g+13],21,1309151649),h=l(h,d,p,f,e[g+4],6,-145523070),f=l(f,h,d,p,e[g+11],10,-1120210379),p=l(p,f,h,d,e[g+2],15,718787259),d=l(d,p,f,h,e[g+9],21,-343485551),h=r(h,n),d=r(d,s),p=r(p,o),f=r(f,u);return[h,d,p,f]},h={hexdigest:function(e){return function(e){for(var t="0123456789abcdef",n="",r=0;r<4*e.length;r++)n+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return n}(u(s(e),8*e.length))},hash:function(e){return function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}(u(s(e),8*e.length))}}},"./src/sha1.js":function(e,t,n){"use strict";function r(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;var n,r,o,c,l,u,h,d,p,f=new Array(80),g=1732584193,E=-271733879,m=-1732584194,_=271733878,C=-1009589776;for(n=0;n<e.length;n+=16){for(c=g,l=E,u=m,h=_,d=C,r=0;r<80;r++)f[r]=r<16?e[n+r]:a(f[r-3]^f[r-8]^f[r-14]^f[r-16],1),o=i(i(a(g,5),s(r,E,m,_)),i(i(C,f[r]),(p=r)<20?1518500249:p<40?1859775393:p<60?-1894007588:-899497514)),C=_,_=m,m=a(E,30),E=g,g=o;g=i(g,c),E=i(E,l),m=i(m,u),_=i(_,h),C=i(C,d)}return[g,E,m,_,C]}function s(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function o(e,t){var n=c(e);16<n.length&&(n=r(n,8*e.length));for(var s=new Array(16),o=new Array(16),i=0;i<16;i++)s[i]=909522486^n[i],o[i]=1549556828^n[i];var a=r(s.concat(c(t)),512+8*t.length);return r(o.concat(a),672)}function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e,t){return e<<t|e>>>32-t}function c(e){for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}function l(e){for(var t,n,r="",s=0;s<4*e.length;s+=3)for(t=(e[s>>2]>>8*(3-s%4)&255)<<16|(e[s+1>>2]>>8*(3-(s+1)%4)&255)<<8|e[s+2>>2]>>8*(3-(s+2)%4)&255,n=0;n<4;n++)r+=8*s+6*n>32*e.length?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>6*(3-n)&63);return r}function u(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}n.r(t),n.d(t,"default",function(){return h});var h={b64_hmac_sha1:function(e,t){return l(o(e,t))},b64_sha1:function(e){return l(r(c(e),8*e.length))},binb2str:u,core_hmac_sha1:o,str_hmac_sha1:function(e,t){return u(o(e,t))},str_sha1:function(e){return u(r(c(e),8*e.length))}}},"./src/strophe.js":function(e,t,n){"use strict";n.r(t),n("./src/bosh.js"),n("./src/websocket.js");var r=n("./src/core.js");n.d(t,"default",function(){return r.default})},"./src/utils.js":function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"default",function(){return s});var s={utf16to8:function(e){var t,n,r="",s=e.length;for(t=0;t<s;t++)0<=(n=e.charCodeAt(t))&&n<=127?r+=e.charAt(t):(2047<n?(r+=String.fromCharCode(224|n>>12&15),r+=String.fromCharCode(128|n>>6&63)):r+=String.fromCharCode(192|n>>6&31),r+=String.fromCharCode(128|n>>0&63));return r},addCookies:function(e){for(var t in e=e||{})if(Object.prototype.hasOwnProperty.call(e,t)){var n="",s="",o="",i=e[t],a="object"===r(i),c=escape(unescape(a?i.value:i));a&&(n=i.expires?";expires="+i.expires:"",s=i.domain?";domain="+i.domain:"",o=i.path?";path="+i.path:""),document.cookie=t+"="+c+n+s+o}}}},"./src/websocket.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core.js"),s=r.default.Strophe,o=r.default.$build;s.Websocket=function(e){this._conn=e,this.strip="wrapper";var t=e.service;if(0!==t.indexOf("ws:")&&0!==t.indexOf("wss:")){var n="";"ws"===e.options.protocol&&"https:"!==window.location.protocol?n+="ws":n+="wss",n+="://"+window.location.host,0!==t.indexOf("/")?n+=window.location.pathname+t:n+=t,e.service=n}},s.Websocket.prototype={_buildStream:function(){return o("open",{xmlns:s.NS.FRAMING,to:this._conn.domain,version:"1.0"})},_check_streamerror:function(e,t){var n;if(0===(n=e.getElementsByTagNameNS?e.getElementsByTagNameNS(s.NS.STREAM,"error"):e.getElementsByTagName("stream:error")).length)return!1;for(var r=n[0],o="",i="",a=0;a<r.childNodes.length;a++){var c=r.childNodes[a];if("urn:ietf:params:xml:ns:xmpp-streams"!==c.getAttribute("xmlns"))break;"text"===c.nodeName?i=c.textContent:o=c.nodeName}var l="WebSocket stream error: ";return l+=o||"unknown",i&&(l+=" - "+i),s.error(l),this._conn._changeConnectStatus(t,o),this._conn._doDisconnect(),!0},_reset:function(){},_connect:function(){this._closeSocket(),this.socket=new WebSocket(this._conn.service,"xmpp"),this.socket.onopen=this._onOpen.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onmessage=this._connect_cb_wrapper.bind(this)},_connect_cb:function(e){if(this._check_streamerror(e,s.Status.CONNFAIL))return s.Status.CONNFAIL},_handleStreamStart:function(e){var t=!1,n=e.getAttribute("xmlns");"string"!=typeof n?t="Missing xmlns in <open />":n!==s.NS.FRAMING&&(t="Wrong xmlns in <open />: "+n);var r=e.getAttribute("version");return"string"!=typeof r?t="Missing version in <open />":"1.0"!==r&&(t="Wrong version in <open />: "+r),!t||(this._conn._changeConnectStatus(s.Status.CONNFAIL,t),this._conn._doDisconnect(),!1)},_connect_cb_wrapper:function(e){if(0===e.data.indexOf("<open ")||0===e.data.indexOf("<?xml")){var t=e.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===t)return;var n=(new DOMParser).parseFromString(t,"text/xml").documentElement;this._conn.xmlInput(n),this._conn.rawInput(e.data),this._handleStreamStart(n)&&this._connect_cb(n)}else if(0===e.data.indexOf("<close ")){var r=(new DOMParser).parseFromString(e.data,"text/xml").documentElement;this._conn.xmlInput(r),this._conn.rawInput(e.data);var o=r.getAttribute("see-other-uri");if(o){var i=this._conn.service;(0<=i.indexOf("wss:")&&0<=o.indexOf("wss:")||0<=i.indexOf("ws:"))&&(this._conn._changeConnectStatus(s.Status.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=o,this._connect())}else this._conn._changeConnectStatus(s.Status.CONNFAIL,"Received closing stream"),this._conn._doDisconnect()}else{var a=this._streamWrap(e.data),c=(new DOMParser).parseFromString(a,"text/xml").documentElement;this.socket.onmessage=this._onMessage.bind(this),this._conn._connect_cb(c,null,e.data)}},_disconnect:function(e){if(this.socket&&this.socket.readyState!==WebSocket.CLOSED){e&&this._conn.send(e);var t=o("close",{xmlns:s.NS.FRAMING});this._conn.xmlOutput(t.tree());var n=s.serialize(t);this._conn.rawOutput(n);try{this.socket.send(n)}catch(e){s.info("Couldn't send <close /> tag.")}}this._conn._doDisconnect()},_doDisconnect:function(){s.info("WebSockets _doDisconnect was called"),this._closeSocket()},_streamWrap:function(e){return"<wrapper>"+e+"</wrapper>"},_closeSocket:function(){if(this.socket)try{this.socket.onerror=null,this.socket.close()}catch(e){s.debug(e.message)}this.socket=null},_emptyQueue:function(){return!0},_onClose:function(e){this._conn.connected&&!this._conn.disconnecting?(s.error("Websocket closed unexpectedly"),this._conn._doDisconnect()):e&&1006===e.code&&!this._conn.connected&&this.socket?(s.error("Websocket closed unexcectedly"),this._conn._changeConnectStatus(s.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._conn._doDisconnect()):s.info("Websocket closed")},_no_auth_received:function(e){s.error("Server did not offer a supported authentication mechanism"),this._changeConnectStatus(s.Status.CONNFAIL,s.ErrorCondition.NO_AUTH_MECH),e&&e.call(this._conn),this._conn._doDisconnect()},_onDisconnectTimeout:function(){},_abortAllRequests:function(){},_onError:function(e){s.error("Websocket error "+e),this._conn._changeConnectStatus(s.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._disconnect()},_onIdle:function(){var e=this._conn._data;if(0<e.length&&!this._conn.paused){for(var t=0;t<e.length;t++)if(null!==e[t]){var n;n="restart"===e[t]?this._buildStream().tree():e[t];var r=s.serialize(n);this._conn.xmlOutput(n),this._conn.rawOutput(r),this.socket.send(r)}this._conn._data=[]}},_onMessage:function(e){var t,n='<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" />';if(e.data===n)return this._conn.rawInput(n),this._conn.xmlInput(e),void(this._conn.disconnecting||this._conn._doDisconnect());if(0===e.data.search("<open ")){if(t=(new DOMParser).parseFromString(e.data,"text/xml").documentElement,!this._handleStreamStart(t))return}else{var r=this._streamWrap(e.data);t=(new DOMParser).parseFromString(r,"text/xml").documentElement}return this._check_streamerror(t,s.Status.ERROR)?void 0:this._conn.disconnecting&&"presence"===t.firstChild.nodeName&&"unavailable"===t.firstChild.getAttribute("type")?(this._conn.xmlInput(t),void this._conn.rawInput(s.serialize(t))):void this._conn._dataRecv(t,e.data)},_onOpen:function(){s.info("Websocket open");var e=this._buildStream();this._conn.xmlOutput(e.tree());var t=s.serialize(e);this._conn.rawOutput(t),this.socket.send(t)},_reqToData:function(e){return e},_send:function(){this._conn.flush()},_sendRestart:function(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}}}}).default},e.exports=r()},function(e,t,n){"use strict";t.__esModule=!0;var r=n(6),s=n(0),o=n(1),i=function(){function e(){}return e.trasformJSONGroup=function(e){var t;try{t=new r.Group(e[s.GroupConstants.KEYS.GUID],e[s.GroupConstants.KEYS.NAME],e[s.GroupConstants.KEYS.NAME]),Object.assign(t,e),e=t}catch(e){o.Logger.error("GroupsController:transformJSONGroup",e)}return e},e}();t.GroupsController=i},function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};t.__esModule=!0;var i=n(12),a=n(0),c=n(5),l=n(6),u=n(1),h=function(e){function t(t,n,r){var s=e.call(this,t,"text",r,a.MessageCategory.MESSAGE)||this;return s.type="text",s.data={text:n},s.text=n,s}return s(t,e),t.prototype.getSender=function(){try{return this.getSenderFromData()}catch(t){return this.sender}},t.prototype.getReceiver=function(){try{return this.getReceiverFromData()}catch(t){return this.receiver}},t.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},t.prototype.setMetadata=function(e){this.metadata=e,this.data=o({},this.data,{metadata:e})},t.prototype.getData=function(){return this.data},t.prototype.setData=function(e){this.data=e},t.prototype.getText=function(){return this.text},t.prototype.setText=function(e){this.text=e,this.data.text=e},t.prototype.setProcessedText=function(e){this.processedText=e},t.prototype.getProcessedText=function(){return this.processedText},t.prototype.getSenderFromData=function(){try{var e=this.getData();if(e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])return new c.User(e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])}catch(e){u.Logger.error("TextMessageModel: getSenderFromData",e)}},t.prototype.getReceiverFromData=function(){try{var e=this.getData(),t=e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY];if(e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITYTYPE]==[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITY_TYPE.USER])return new c.User(t);var n=new l.Group(t[a.GroupConstants.KEYS.GUID],t[a.GroupConstants.KEYS.NAME],t[a.MessageConstatnts.KEYS.TYPE]);return Object.assign(n,t)}catch(e){u.Logger.error("TextMessageModel: getReceiverFromData",e)}},t.TYPE=a.MessageConstatnts.TYPE.TEXT,t.RECEIVER_TYPE=a.MessageConstatnts.RECEIVER_TYPE,t.CATEGORY=a.MessageConstatnts.CATEGORY.MESSAGE,t}(i.BaseMessage);t.TextMessage=h},function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};t.__esModule=!0;var i=n(12),a=n(0),c=n(5),l=n(6),u=n(1),h=function(e){function t(t,n,r,s){var o=e.call(this,t,r,s,a.MessageCategory.MESSAGE)||this;return o.data={url:"object"!=typeof n?n:void 0},o.file=n,o}return s(t,e),t.prototype.setCaption=function(e){this.caption=e,this.data[a.MessageConstatnts.KEYS.TEXT]=e},t.prototype.getCaption=function(){return this.data[a.MessageConstatnts.KEYS.TEXT]},t.prototype.getSender=function(){try{return this.getSenderFromData()}catch(t){return this.sender}},t.prototype.getReceiver=function(){try{return this.getReceiverFromData()}catch(t){return this.receiver}},t.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},t.prototype.setMetadata=function(e){this.metadata=e,this.data=o({},this.data,{metadata:e})},t.prototype.getData=function(){return this.data},t.prototype.setData=function(e){this.data=e},t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(e){this.attachment=e},t.prototype.getURL=function(){try{var e=this.getData();if(e[a.MessageConstatnts.KEYS.URL])return e[a.MessageConstatnts.KEYS.URL]}catch(e){u.Logger.error("MediaMessageModel: getURL",e)}},t.prototype.getSenderFromData=function(){try{var e=this.getData();if(e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])return new c.User(e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])}catch(e){u.Logger.error("MediaMessageModel: getSenderFromData",e)}},t.prototype.getReceiverFromData=function(){try{var e=this.getData(),t=e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY];if(e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITYTYPE]==[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITY_TYPE.USER])return new c.User(t);var n=new l.Group(t[a.GroupConstants.KEYS.GUID],t[a.GroupConstants.KEYS.NAME],t[a.MessageConstatnts.KEYS.TYPE]);return Object.assign(n,t)}catch(e){u.Logger.error("MediaMessageModel: getReceiverFromData",e)}},t.TYPE=a.MessageConstatnts.TYPE,t.RECEIVER_TYPE=a.MessageConstatnts.RECEIVER_TYPE,t.CATEGORY=a.MessageConstatnts.CATEGORY,t}(i.BaseMessage);t.MediaMessage=h},function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};t.__esModule=!0;var i=n(12),a=n(0),c=n(5),l=n(1),u=n(6),h=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this;if(3==t.length){var s=t[0],o=t[1],i=t[2];r=e.call(this,s,a.MessageConstatnts.TYPE.CUSTOM,o,a.MessageCategory.MESSAGE)||this,("object"!=typeof i||Array.isArray(i))&&(i={}),r.customData=i,l.isFalsy(r.data)&&(r.data={}),r.data[a.MessageConstatnts.KEYS.CUSTOM_DATA]=i}return 4==t.length&&(i=t[3],r=e.call(this,s=t[0],t[2],o=t[1],a.MessageCategory.CUSTOM)||this,("object"!=typeof i||Array.isArray(i))&&(i={}),r.customData=i,l.isFalsy(r.data)&&(r.data={}),r.data[a.MessageConstatnts.KEYS.CUSTOM_DATA]=i),r}return s(t,e),t.prototype.getCustomData=function(){return this.customData},t.prototype.setCustomData=function(e){this.customData=e,this.data[a.MessageConstatnts.KEYS.CUSTOM_DATA]=e},t.prototype.getSender=function(){try{return this.getSenderFromData()}catch(t){return this.sender}},t.prototype.getReceiver=function(){try{return this.getReceiverFromData()}catch(t){return this.receiver}},t.prototype.getSubType=function(){return this.subType},t.prototype.setSubType=function(e){this.subType=e,this.data=o({},this.data,{subType:e})},t.prototype.getMetadata=function(){return this.metadata},t.prototype.setMetadata=function(e){this.metadata=e,this.data=o({},this.data,{metadata:e})},t.prototype.getData=function(){return this.data},t.prototype.getSenderFromData=function(){try{var e=this.getData();if(e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])return new c.User(e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])}catch(e){l.Logger.error("CustomMessageModel: getSenderFromData",e)}},t.prototype.getReceiverFromData=function(){try{var e=this.getData(),t=e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY];if(e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITYTYPE]==[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITY_TYPE.USER])return new c.User(t);var n=new u.Group(t[a.GroupConstants.KEYS.GUID],t[a.GroupConstants.KEYS.NAME],t[a.MessageConstatnts.KEYS.TYPE]);return Object.assign(n,t)}catch(e){l.Logger.error("CustomMessageModel: getReceiverFromData",e)}},t}(i.BaseMessage);t.CustomMessage=h},function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var o=n(1);t.MessageEventListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.onAction=void 0,this.onTextMessageReceived=void 0,this.onMediaMessageReceived=void 0,this.onCustomMessageReceived=void 0,this.onCall=void 0,this.onTypingStarted=void 0,this.onTypingEnded=void 0,this.onMessagesDelivered=void 0,this.onMessagesRead=void 0,this.onMessageEdited=void 0,this.onMessageDeleted=void 0,o.isFalsy(e[0].onAction)||(this.onAction=e[0].onAction),o.isFalsy(e[0].onTextMessageReceived)||(this.onTextMessageReceived=e[0].onTextMessageReceived),o.isFalsy(e[0].onMediaMessageReceived)||(this.onMediaMessageReceived=e[0].onMediaMessageReceived),o.isFalsy(e[0].onCall)||(this.onCall=e[0].onCall),o.isFalsy(e[0].onTypingStarted)||(this.onTypingStarted=e[0].onTypingStarted),o.isFalsy(e[0].onTypingEnded)||(this.onTypingEnded=e[0].onTypingEnded),o.isFalsy(e[0].onMessagesDelivered)||(this.onMessagesDelivered=e[0].onMessagesDelivered),o.isFalsy(e[0].onMessagesRead)||(this.onMessagesRead=e[0].onMessagesRead),o.isFalsy(e[0].onCustomMessageReceived)||(this.onCustomMessageReceived=e[0].onCustomMessageReceived),o.isFalsy(e[0].onMessageEdited)||(this.onMessageEdited=e[0].onMessageEdited),o.isFalsy(e[0].onMessageDeleted)||(this.onMessageDeleted=e[0].onMessageDeleted)},t.CallEventListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.onIncomingCallReceived=void 0,this.onOutgoingCallAccepted=void 0,this.onOutgoingCallRejected=void 0,this.onIncomingCallCancelled=void 0,o.isFalsy(e[0].onIncomingCallReceived)||(this.onIncomingCallReceived=e[0].onIncomingCallReceived),o.isFalsy(e[0].onOutgoingCallAccepted)||(this.onOutgoingCallAccepted=e[0].onOutgoingCallAccepted),o.isFalsy(e[0].onOutgoingCallRejected)||(this.onOutgoingCallRejected=e[0].onOutgoingCallRejected),o.isFalsy(e[0].onIncomingCallCancelled)||(this.onIncomingCallCancelled=e[0].onIncomingCallCancelled)},t.UserEventListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.isFalsy(e[0].onUserOnline)||(this.onUserOnline=e[0].onUserOnline),o.isFalsy(e[0].onUserOffline)||(this.onUserOffline=e[0].onUserOffline)},t.GroupEventListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.isFalsy(e[0].onGroupMemberJoined)||(this.onUserJoined=e[0].onGroupMemberJoined),o.isFalsy(e[0].onGroupMemberLeft)||(this.onUserLeft=e[0].onGroupMemberLeft),o.isFalsy(e[0].onGroupMemberKicked)||(this.onUserKicked=e[0].onGroupMemberKicked),o.isFalsy(e[0].onGroupMemberBanned)||(this.onUserBanned=e[0].onGroupMemberBanned),o.isFalsy(e[0].onGroupMemberUnbanned)||(this.onUserUnbanned=e[0].onGroupMemberUnbanned),o.isFalsy(e[0].onGroupMemberScopeChanged)||(this.onMemberScopeChanged=e[0].onGroupMemberScopeChanged),o.isFalsy(e[0].onMemberAddedToGroup)||(this.onMemberAddedToGroup=e[0].onMemberAddedToGroup)},t.UserCallEventListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.isFalsy(e[0].onYouLeft)||(this.onYouLeft=e[0].onYouLeft),o.isFalsy(e[0].onYouJoined)||(this.onYouJoined=e[0].onYouJoined),o.isFalsy(e[0].onUserJoined)||(this.onUserJoined=e[0].onUserJoined),o.isFalsy(e[0].onUserLeft)||(this.onUserLeft=e[0].onUserLeft),o.isFalsy(e[0].onCallEnded)||(this.onCallEnded=e[0].onCallEnded),o.isFalsy(e[0].onError)||(this.onError=e[0].onError)};var i=function(e,t){this._name=e,this._callback=t},a=function(e){function t(t,n,r,s){var o=e.call(this,t,s)||this;return o._eventListener=n,r&&(o._cursor=r),o}return s(t,e),t}(t.Listener=i);t.MessageListener=a;var c=function(e){function t(t,n,r,s){var o=e.call(this,t,s)||this;return o._eventListener=n,r&&(o._cursor=r),o}return s(t,e),t}(i);t.UserListener=c;var l=function(e){function t(t,n,r,s){var o=e.call(this,t,s)||this;return o._eventListener=n,r&&(o._cursor=r),o}return s(t,e),t}(i);t.GroupListener=l;var u=function(e){function t(t,n,r){var s=e.call(this,"callListner",r)||this;return s._eventListener=t,s}return s(t,e),t}(i);t.UserCallListener=u;var h=function(e){function t(t,n,r,s){var o=e.call(this,t,s)||this;return o._eventListener=n,o}return s(t,e),t}(i);t.CallListener=h},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};t.__esModule=!0;var s=n(3),o=n(1),i=n(0),a=n(11),c=function(){function e(e){this.store=i.constants.DEFAULT_STORE,o.isFalsy(e)||(this.store=e),this.messagesStore=a.createInstance({name:o.format(i.LOCAL_STORE.STORE_STRING,s.CometChat.getAppId(),i.LOCAL_STORE.MESSAGES_STORE)}),this.messagesStore.setDriver([a.LOCALSTORAGE,a.INDEXEDDB,a.WEBSQL])}return e.getInstance=function(){return null==e.MessagesStore&&(e.MessagesStore=new e),e.MessagesStore},e.prototype.set=function(e,t){return this.messagesStore.setItem(e,t)},e.prototype.remove=function(e){this.messagesStore.removeItem(e)},e.prototype.get=function(e){return this.messagesStore.getItem(e)},e.prototype.clearStore=function(){return this.messagesStore.clear()},e.prototype.getAllMessages=function(){var e=this,t={};return new Promise(function(n,s){e.messagesStore.iterate(function(e,n,s){n!=i.constants.MSG_VER_POST&&n!=i.constants.MSG_VER_POST&&(t=r({},t,e))}).then(function(){n(t)})})},e.prototype.clear=function(e){},e.prototype.selectStore=function(e){this.store=e},e.prototype.storeMessages=function(e){var t=this;if(s.CometChat.user.getUid()){var n=s.CometChat.user.getUid(),a={},c=0;return this.get(i.constants.MSG_VER_POST).then(function(s){e.map(function(e){var t;if(!o.isFalsy(e)){0==c&&(c=parseInt(e.getId().toString())),c>e.getId()&&(c=parseInt(e.getId().toString())),s<e.getId()&&(s=parseInt(e.getId().toString()));var l=void 0;l=e.getSender()instanceof Object?e.getSender().getUid():e.getSender(),e.getReceiverType()==i.MessageConstatnts.RECEIVER_TYPE.GROUP&&(l=e.getReceiver()),e.getSender()instanceof Object?e.getSender().getUid()==n&&(l=e.getReceiver()):e.getSender()==n&&(l=e.getReceiver()),a[l]||(a[l]={}),a[l]=r({},a[l],((t={})[e.getId()]=e,t))}}),t.get(i.constants.MSG_VER_PRE).then(function(e){(0<c&&c<e||null==e)&&t.set(i.constants.MSG_VER_PRE,c)})&&0<s&&t.set(i.constants.MSG_VER_POST,s),Object.keys(a).map(function(e){t.get(e).then(function(n){null==n&&(n={}),t.set(e,r({},a[e],n))})})}),!0}},e}();t.MessagesStore=c},function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};t.__esModule=!0;var i=n(12),a=n(6),c=n(5),l=n(0),u=n(1),h=n(7),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.actionFromJSON=function(e){var t=new this(e[l.MessageConstatnts.KEYS.RECEIVER],e[l.MessageConstatnts.KEYS.TYPE],e[l.MessageConstatnts.KEYS.RECEIVER_TYPE],l.MessageCategory.ACTION),n=e[l.MessageConstatnts.KEYS.DATA];if(t.data=n,t.setAction(n[l.MessageConstatnts.KEYS.ACTION]),n[l.ActionConstatnts.ACTION_KEYS.EXTRAS]){var r=n[l.ActionConstatnts.ACTION_KEYS.EXTRAS];if(r[l.ActionConstatnts.ACTION_KEYS.SCOPE]){var s=r[l.ActionConstatnts.ACTION_KEYS.SCOPE];s[l.ActionConstatnts.ACTION_KEYS.NEW]&&s[l.ActionConstatnts.ACTION_KEYS.OLD]&&(t.setOldScope(s[l.ActionConstatnts.ACTION_KEYS.OLD]),t.setNewScope(s[l.ActionConstatnts.ACTION_KEYS.NEW]))}}n[l.MessageConstatnts.KEYS.METADATA]&&t.setMetadata(n[l.MessageConstatnts.KEYS.METADATA]);var o=n[l.ActionConstatnts.ACTION_KEYS.ENTITIES];if(o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY])if(o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][l.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==l.ActionConstatnts.ACTION_ENTITY_TYPE.USER){var i=new c.User(o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][l.ActionConstatnts.ACTION_KEYS.ENTITY]);Object.assign(i,o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][l.ActionConstatnts.ACTION_KEYS.ENTITY]),t.actionBy=i,t.setSender(i)}else{var u=new a.Group("","","");Object.assign(u,o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][l.ActionConstatnts.ACTION_KEYS.ENTITY]),t.actionBy=u}if(o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR]&&(o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][l.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==l.ActionConstatnts.ACTION_ENTITY_TYPE.USER?(i=new c.User(o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][l.ActionConstatnts.ACTION_KEYS.ENTITY]),Object.assign(i,o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][l.ActionConstatnts.ACTION_KEYS.ENTITY]),t.actionFor=i):(u=new a.Group("","",""),Object.assign(u,o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][l.ActionConstatnts.ACTION_KEYS.ENTITY]),t.actionFor=u)),o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON])if(o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][l.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==l.ActionConstatnts.ACTION_ENTITY_TYPE.USER)i=new c.User(o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][l.ActionConstatnts.ACTION_KEYS.ENTITY]),Object.assign(i,o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][l.ActionConstatnts.ACTION_KEYS.ENTITY]),t.actionOn=i;else if(o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][l.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==l.ActionConstatnts.ACTION_ENTITY_TYPE.GROUP)u=new a.Group("","",""),Object.assign(u,o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][l.ActionConstatnts.ACTION_KEYS.ENTITY]),t.actionOn=u;else if(o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][l.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==l.ActionConstatnts.ACTION_ENTITY_TYPE.MESSAGE){var d=h.MessageController.trasformJSONMessge(o[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][l.ActionConstatnts.ACTION_KEYS.ENTITY]);t.actionOn=d}return t.setMessage(t.getActionMessage(t)),t},t.prototype.getOldScope=function(){return this.oldScope},t.prototype.getNewScope=function(){return this.newScope},t.prototype.setNewScope=function(e){this.newScope=e},t.prototype.setOldScope=function(e){this.oldScope=e},t.prototype.setRawData=function(e){this.rawData=e},t.prototype.getRawData=function(){return this.rawData},t.prototype.setMessage=function(e){this.message=e},t.prototype.getMessage=function(){return this.message},t.prototype.setAction=function(e){this.action=e},t.prototype.getAction=function(){return this.action},t.prototype.getSender=function(){try{return this.getSenderFromData()}catch(e){return this.sender}},t.prototype.setActionBy=function(e){this.actionBy=e},t.prototype.getActionBy=function(){return this.actionBy},t.prototype.setActionOn=function(e){this.actionOn=e},t.prototype.getActionOn=function(){return this.actionOn},t.prototype.setActionFor=function(e){this.actionFor=e},t.prototype.getActionFor=function(){return this.actionFor},t.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},t.prototype.setMetadata=function(e){this.metadata=e,this.data=o({},this.data,{metadata:e})},t.prototype.getActionMessage=function(e){var t="";switch(e.getType()){case l.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_USER:case l.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_GROUP:e.getAction();break;case l.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_GROUP_MEMBER:switch(e.getAction()){case l.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_JOINED:var n=e.getActionBy();t=u.format(l.ActionConstatnts.ActionMessages.ACTION_GROUP_JOINED_MESSAGE,n.getName());break;case l.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_LEFT:n=e.getActionBy(),t=u.format(l.ActionConstatnts.ActionMessages.ACTION_GROUP_LEFT_MESSAGE,n.getName());break;case l.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_KICKED:n=e.getActionBy();var r=e.getActionOn();t=u.format(l.ActionConstatnts.ActionMessages.ACTION_MEMBER_KICKED_MESSAGE,n.getName(),r.getName());break;case l.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_BANNED:n=e.getActionBy(),r=e.getActionOn(),t=u.format(l.ActionConstatnts.ActionMessages.ACTION_MEMBER_BANNED_MESSAGE,n.getName(),r.getName());break;case l.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_UNBANNED:n=e.getActionBy(),r=e.getActionOn(),t=u.format(l.ActionConstatnts.ActionMessages.ACTION_MEMBER_UNBANNED_MESSAGE,n.getName(),r.getName());break;case l.ActionConstatnts.ACTION_KEYS.ACTION_SCOPE_CHANGED:n=e.getActionBy(),r=e.getActionOn();var s=e.getNewScope();t=u.format(l.ActionConstatnts.ActionMessages.ACTION_MEMBER_SCOPE_CHANGED,n.getName(),r.getName(),s);break;case l.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_ADDED:n=e.getActionBy(),r=e.getActionOn(),t=u.format(l.ActionConstatnts.ActionMessages.ACTION_MEMBER_ADDED_TO_GROUP,n.getName(),r.getName());break;case l.ActionConstatnts.ACTION_KEYS.TYPE_MESSAGE_EDITED:t=u.format(l.ActionConstatnts.ActionMessages.ACTION_MESSAGE_EDITED_MESSAGE,"");break;case l.ActionConstatnts.ACTION_KEYS.TYPE_MESSAGE_DELETED:t=u.format(l.ActionConstatnts.ActionMessages.ACTION_MESSAGE_DELETED_MESSAGE,"")}}return t},t.prototype.getSenderFromData=function(){var e=this.data[l.ActionConstatnts.ACTION_KEYS.ENTITIES];if(e[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY]&&e[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][l.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==l.ActionConstatnts.ACTION_ENTITY_TYPE.USER){var t=new c.User(e[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][l.ActionConstatnts.ACTION_KEYS.ENTITY]);return Object.assign(t,e[l.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][l.ActionConstatnts.ACTION_KEYS.ENTITY]),t}},t.TYPE=l.MessageConstatnts.TYPE,t.RECEIVER_TYPE=l.MessageConstatnts.RECEIVER_TYPE,t.CATEGORY=l.MessageConstatnts.CATEGORY,t.ACTION_TYPE=l.ActionConstatnts.ACTION_TYPE,t}(i.BaseMessage);t.Action=d},function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};t.__esModule=!0;var i=n(12),a=n(6),c=n(0),l=n(1),u=n(5),h=function(e){function t(t,n,r,s){return l.isFalsy(s)?e.call(this,t,n,r,c.MessageCategory.CALL)||this:e.call(this,t,n,r,s)||this}return s(t,e),t.prototype.getCallInitiator=function(){return this.getCallInitiatedByFromData()},t.prototype.getCallReceiver=function(){return this.getCallReceivedByFromData()},t.prototype.setCallInitiator=function(e){this.callInitiator=e},t.prototype.setCallReceiver=function(e){this.callReceiver=e},t.prototype.getData=function(){return this.data},t.prototype.setData=function(e){this.data=e},t.prototype.getSessionId=function(){return this.sessionId},t.prototype.setSessionId=function(e){this.sessionId=e},t.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},t.prototype.getSender=function(){try{return this.getSenderFromData()}catch(t){return this.sender}},t.prototype.setMetadata=function(e){this.metadata=e,this.data=o({},this.data,{metadata:e})},t.prototype.getAction=function(){return this.action},t.prototype.setAction=function(e){this.action=e},t.prototype.getInitiatedAt=function(){return this.initiatedAt},t.prototype.setInitiatedAt=function(e){this.initiatedAt=e},t.prototype.getJoinedAt=function(){return this.joinedAt},t.prototype.setJoinedAt=function(e){this.joinedAt=e},t.prototype.setRawData=function(e){this.rawData=e},t.prototype.getRawData=function(){return this.rawData},t.prototype.setSender=function(e){this.sender=e},t.prototype.setReceiver=function(e){this.receiver=e},t.callFromJSON=function(e){try{var t=new this(e[c.MessageConstatnts.KEYS.RECEIVER],e[c.MessageConstatnts.KEYS.TYPE],e[c.MessageConstatnts.KEYS.RECEIVER_TYPE],c.MessageCategory.CALL),n=e[c.MessageConstatnts.KEYS.DATA];t.setAction(n[c.MessageConstatnts.KEYS.ACTION]),n[c.MessageConstatnts.KEYS.METADATA]&&t.setMetadata(n[c.MessageConstatnts.KEYS.METADATA]);var r=n[c.ActionConstatnts.ACTION_KEYS.ENTITIES];if(r[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON]){var s=r[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON];if(s[c.CallConstants.CALL_KEYS.CALL_ENTITY]){var o=s[c.CallConstants.CALL_KEYS.CALL_ENTITY];if(o[c.CallConstants.CALL_KEYS.CALL_SESSION_ID]&&(t.sessionId=o[c.CallConstants.CALL_KEYS.CALL_SESSION_ID]),o[c.CallConstants.CALL_KEYS.CALL_STATUS]&&(t.status=o[c.CallConstants.CALL_KEYS.CALL_STATUS]),o[c.CallConstants.CALL_KEYS.CALL_DATA]){var i=o[c.CallConstants.CALL_KEYS.CALL_DATA];i[c.CallConstants.CALL_KEYS.CALL_METADATA]&&(t.metadata=i[c.CallConstants.CALL_KEYS.CALL_METADATA])}o[c.CallConstants.CALL_KEYS.CALL_INITIATED_AT]&&(t.initiatedAt=o[c.CallConstants.CALL_KEYS.CALL_INITIATED_AT]),o[c.CallConstants.CALL_KEYS.CALL_JOINED_AT]&&(t.joinedAt=o[c.CallConstants.CALL_KEYS.CALL_JOINED_AT]),o[c.CallConstants.CALL_KEYS.CALL_LEFT_AT]&&(t.joinedAt=o[c.CallConstants.CALL_KEYS.CALL_LEFT_AT])}}return t}catch(e){l.Logger.error("CallModel: callFromJSON",e)}},t.prototype.getSenderFromData=function(){try{var e=this.getData();if((e=e[c.ActionConstatnts.ACTION_KEYS.ENTITIES])[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][c.CallConstants.CALL_KEYS.CALL_ENTITY])return new u.User(e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][c.CallConstants.CALL_KEYS.CALL_ENTITY])}catch(e){l.Logger.error("CallModel:getSenderFromData",e)}},t.prototype.getCallInitiatedByFromData=function(){try{var e=this.getData();if((e=e[c.ActionConstatnts.ACTION_KEYS.ENTITIES])[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.CallConstants.CALL_KEYS.CALL_DATA][c.ActionConstatnts.ACTION_KEYS.ENTITIES][c.CallConstants.CALL_KEYS.CALL_SENDER])return new u.User(e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.CallConstants.CALL_KEYS.CALL_DATA][c.ActionConstatnts.ACTION_KEYS.ENTITIES][c.CallConstants.CALL_KEYS.CALL_SENDER][c.CallConstants.CALL_KEYS.CALL_ENTITY])}catch(e){l.Logger.error("CallModel:getCallInitiatedByFromData",e)}},t.prototype.getCallReceivedByFromData=function(){try{var e=this.getData();if((e=e[c.ActionConstatnts.ACTION_KEYS.ENTITIES])[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY]){if(e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY_TYPE]==c.CallConstants.CALL_KEYS.CALL_ENTITY_USER)return new u.User(e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY]);var t=new a.Group(e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.GroupConstants.KEYS.GUID],e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.GroupConstants.KEYS.NAME],e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.GroupConstants.KEYS.TYPE]);return Object.assign(t,e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY])}}catch(e){l.Logger.error("CallModel:getCallReceivedByFromData",e)}},t.TYPE=c.MessageConstatnts.TYPE,t.RECEIVER_TYPE=c.MessageConstatnts.RECEIVER_TYPE,t.CATEGORY=c.MessageConstatnts.CATEGORY,t.ACTION_TYPE=c.ActionConstatnts.ACTION_TYPE,t}(i.BaseMessage);t.Call=h},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),s=n(0),o=n(11),i=n(3),a=function(){function e(e){this.store=s.constants.DEFAULT_STORE,r.isFalsy(e)||(this.store=e),this.settingsStore=o.createInstance({name:r.format(s.LOCAL_STORE.STORE_STRING,i.CometChat.getAppId(),s.LOCAL_STORE.MESSAGE_LISTENERS_LIST)}),this.settingsStore.setDriver([o.LOCALSTORAGE,o.INDEXEDDB,o.WEBSQL])}return e.getInstance=function(){return null==e.settingsStore&&(e.settingsStore=new e),e.settingsStore},e.prototype.set=function(e,t){return this.settingsStore.setItem(e,t)},e.prototype.remove=function(e){this.settingsStore.removeItem(e)},e.prototype.get=function(e){return this.settingsStore.getItem(e)},e.prototype.clearStore=function(){return this.settingsStore.clear()},e.prototype.clear=function(e){},e.prototype.selectStore=function(e){this.store=e},e.settingsStore=null,e}();t.MessageListnerMaping=a},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(i,a)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=0<(s=i.trys).length&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(a){o=[6,a],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};t.__esModule=!0;var o=n(32),i=n(1),a=n(7),c=n(0),l=function(){function e(){}return e.executeInSync=function(e,t){var n=this;return new Promise(function(o,i){return r(n,void 0,void 0,function(){var n,r;return s(this,function(s){switch(s.label){case 0:return n=e,t?(r=setTimeout(function(){o(e)},this.SMALL_TIMEOUT),[4,t(e)]):[3,2];case 1:n=s.sent(),s.label=2;case 2:return clearTimeout(r),o(n),[2]}})})})},e.hookBeforeMessageSent=function(e){return r(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:t=0,r.label=1;case 1:return t<o.ExtensionManager.cometChatExtensionList.length?[4,this.getExtensionList()]:[3,7];case 2:if(!r.sent()[o.ExtensionManager.cometChatExtensionList[t].getExtensionId()])return[3,6];if(!o.ExtensionManager.cometChatExtensionList[t].beforeMessageSent)return[3,6];r.label=3;case 3:return r.trys.push([3,5,,6]),[4,this.executeInSync(e,o.ExtensionManager.cometChatExtensionList[t].beforeMessageSent)];case 4:return e=r.sent(),[3,6];case 5:return n=r.sent(),i.Logger.error("Logging error",n),[3,6];case 6:return t++,[3,1];case 7:return[2,e]}})})},e.hookAfterMessageSent=function(e){return r(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:t=0,r.label=1;case 1:return t<o.ExtensionManager.cometChatExtensionList.length?[4,this.getExtensionList()]:[3,7];case 2:if(!r.sent()[o.ExtensionManager.cometChatExtensionList[t].getExtensionId()])return[3,6];if(!o.ExtensionManager.cometChatExtensionList[t].afterMessageSent)return[3,6];r.label=3;case 3:return r.trys.push([3,5,,6]),[4,this.executeInSync(e,o.ExtensionManager.cometChatExtensionList[t].afterMessageSent)];case 4:return e=r.sent(),[3,6];case 5:return n=r.sent(),i.Logger.error("Logging error",n),[3,6];case 6:return t++,[3,1];case 7:return[2,e]}})})},e.hookOnInit=function(e,t){return r(this,void 0,void 0,function(){var n=this;return s(this,function(i){return o.ExtensionManager.cometChatExtensionList.map(function(o){return r(n,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,this.getExtensionList()];case 1:return n.sent()[o.getExtensionId()]?e&&t&&o.onInit?[4,o.onInit(e,t)]:[3,3]:[3,5];case 2:return n.sent(),[3,5];case 3:return e&&o.onInit?[4,o.onInit(e)]:[3,5];case 4:n.sent(),n.label=5;case 5:return[2]}})})}),[2]})})},e.hookOnMessageReceived=function(e){return r(this,void 0,void 0,function(){var t,n,r;return s(this,function(s){switch(s.label){case 0:t=a.MessageController.trasformJSONMessge(e),n=0,s.label=1;case 1:return n<o.ExtensionManager.cometChatExtensionList.length?[4,this.getExtensionList()]:[3,7];case 2:if(!s.sent()[o.ExtensionManager.cometChatExtensionList[n].getExtensionId()])return[3,6];if(!o.ExtensionManager.cometChatExtensionList[n].onMessageReceived)return[3,6];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,this.executeInSync(t,o.ExtensionManager.cometChatExtensionList[n].onMessageReceived)];case 4:return e=s.sent(),[3,6];case 5:return r=s.sent(),i.Logger.error("Logging error",r),[3,6];case 6:return n++,[3,1];case 7:return[2,e]}})})},e.hookOnLogin=function(e){return r(this,void 0,void 0,function(){var t=this;return s(this,function(n){return o.ExtensionManager.cometChatExtensionList.map(function(n){return r(t,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.getExtensionList()];case 1:return t.sent()[n.getExtensionId()]&&e&&n.onLogin?[4,n.onLogin(e)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}),[2]})})},e.executeInSyncBulk=function(e,t){var n=this;return new Promise(function(o,i){return r(n,void 0,void 0,function(){var n,r;return s(this,function(s){switch(s.label){case 0:return n=e,t?(r=setTimeout(function(){o(e)},this.BIG_TIMEOUT),[4,t(e)]):[3,2];case 1:n=s.sent(),s.label=2;case 2:return clearTimeout(r),o(n),[2]}})})})},e.hookOnMessageListIsFetched=function(e){return r(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:t=0,r.label=1;case 1:return t<o.ExtensionManager.cometChatExtensionList.length?[4,this.getExtensionList()]:[3,7];case 2:if(!r.sent()[o.ExtensionManager.cometChatExtensionList[t].getExtensionId()])return[3,6];if(!o.ExtensionManager.cometChatExtensionList[t].onMessageListFetched)return[3,6];r.label=3;case 3:return r.trys.push([3,5,,6]),[4,this.executeInSyncBulk(e,o.ExtensionManager.cometChatExtensionList[t].onMessageListFetched)];case 4:return e=r.sent(),[3,6];case 5:return n=r.sent(),i.Logger.error("Logging error",n),[3,6];case 6:return t++,[3,1];case 7:return[2,e]}})})},e.getExtensionList=function(){return r(this,void 0,void 0,function(){var e=this;return s(this,function(t){switch(t.label){case 0:return i.isFalsy(this.extentionList)?[4,i.getAppSettings()]:[3,2];case 1:t.sent()[c.APP_SETTINGS.KEYS.EXTENSION_LIST].map(function(t){e.extentionList[t.id]=t}),t.label=2;case 2:return[2,this.extentionList]}})})},e.SMALL_TIMEOUT=5e3,e.BIG_TIMEOUT=2e4,e.extentionList={},e}();t.ExtensionController=l},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),s=n(0),o=n(9),i=n(3),a=n(2),c=function(){function t(){this.baseUrl="https://apiclient-%s.cometchat.io/",this.apiVersion="v2.0",this.apiBaseUrl=this.baseUrl+this.apiVersion+"/",this.adminApiUrl="https://api-%s.cometchat.io/",this.adminApiVersion="v2.0",this.uriEndpoints={authToken:{endpoint:"users/{{uid}}/auth_tokens",method:"POST",data:{uid:"string|max:100"},isAdminApi:!0},appSettings:{endpoint:"settings",method:"GET"},login:{endpoint:"admin/users/auth",method:"POST",data:{uid:"string|max:100"}},logout:{endpoint:"admin/users/auth/{{authToken}}",method:"DELETE"},getMyDetails:{endpoint:"me",method:"GET"},updateMyDetails:{endpoint:"me",method:"PUT"},users:{endpoint:"users",method:"GET"},user:{endpoint:"users/{{uid}}",method:"GET"},blockUsers:{endpoint:"blockedusers",method:"POST"},blockedUsersList:{endpoint:"blockedusers",method:"GET"},unblockUsers:{endpoint:"blockedusers",method:"DELETE"},userLogout:{endpoint:"me",method:"DELETE"},createUser:{endpoint:"users",method:"POST",isAdminApi:!0},updateUser:{endpoint:"users/{{uid}}",method:"PUT",isAdminApi:!0},sendFriendRequests:{endpoint:"user/friends",method:"POST",data:{uids:"array<string|max:100>"}},getFriends:{endpoint:"user/friends",method:"GET"},unfriend:{endpoint:"user/friends/{{uid}}/{{gid}}",method:"DELETE",data:{uids:"array<string|max:100>"}},acceptFriendRequest:{endpoint:"user/friends/{{uid}}/accept",method:"PUT",data:{uids:"array<string|max:100>"}},rejectFriendRequest:{endpoint:"user/friends/{{uid}}/reject",method:"DELETE",data:{uids:"array<string|max:100>"}},createGroup:{endpoint:"groups",method:"POST",data:{guid:"required|string|max:100",name:"required|string|max:100",type:"enum|public,protected,password",password:"filled|string|max:100"}},getGroups:{endpoint:"groups",method:"GET"},getGroup:{endpoint:"groups/{{guid}}",method:"GET"},updateGroup:{endpoint:"groups/{{guid}}",method:"PUT"},deleteGroup:{endpoint:"groups/{{guid}}",method:"DELETE"},addGroupMembers:{endpoint:"groups/{{guid}}/members",method:"POST",data:{uids:"array<string|max:100>"}},getGroupMembers:{endpoint:"groups/{{guid}}/members",method:"GET"},joinGroup:{endpoint:"groups/{{guid}}/members",method:"POST"},leaveGroup:{endpoint:"groups/{{guid}}/members",method:"DELETE"},kickGroupMembers:{endpoint:"groups/{{guid}}/members/{{uid}}",method:"DELETE",data:{uids:"array<string|max:100>"}},changeScopeOfMember:{endpoint:"groups/{{guid}}/members/{{uid}}",method:"PUT",data:{uids:"array<string|max:100>"}},banGroupMember:{endpoint:"groups/{{guid}}/bannedusers/{{uid}}",method:"POST",data:{uids:"array<string|max:100>"}},unbanGroupMember:{endpoint:"groups/{{guid}}/bannedusers/{{uid}}",method:"DELETE",data:{uids:"array<string|max:100>"}},addMemebersToGroup:{endpoint:"groups/{{guid}}/members",method:"PUT"},getBannedGroupMembers:{endpoint:"groups/{{guid}}/bannedusers",method:"GET"},promotemoteGroupMember:{endpoint:"groups/{{guid}}/promote",method:"PUT",data:{uids:"array<string|max:100>"}},demoteGroupMember:{endpoint:"groups/{{guid}}/demote",method:"DELETE",data:{uids:"array<string|max:100>"}},sendMessage:{endpoint:"messages",method:"POST",data:{sender:"array:string:max:100>",isGroupMember:"filled|boolean|bail",data:"required|json"}},getMessages:{endpoint:"messages",method:"GET"},getMessageDetails:{endpoint:"messages/{{messageId}}",method:"GET"},getUserMessages:{endpoint:"users/{{listId}}/messages",method:"GET"},getGroupMessages:{endpoint:"groups/{{listId}}/messages",method:"GET"},getMessage:{endpoint:"user/messages/{{muid}}",method:"GET"},updateMessage:{endpoint:"messages/{{messageId}}",method:"PUT"},deleteMessage:{endpoint:"messages/{{messageId}}",method:"DELETE"},createCallSession:{endpoint:"calls",method:"POST",data:{}},updateCallSession:{endpoint:"calls/{{sessionid}}",method:"put",data:{}},getConversations:{endpoint:"conversations",method:"GET"}}}return t.prototype.getEndpointData=function(n){return new Promise(function(c,l){try{o.LocalStorage.getInstance().get(s.APP_SETTINGS.APP_SETTINGS).then(function(e){if(r.isFalsy(e)){var o={};if((new t).uriEndpoints.hasOwnProperty(n))if((o=(new t).uriEndpoints[n]).hasOwnProperty("isAdminApi")){var a=r.format((new t).adminApiUrl,i.CometChat.appSettings.getRegion())+(new t).adminApiVersion+"/"+o.endpoint;o.endpoint=a}else a=r.format((new t).baseUrl,i.CometChat.appSettings.getRegion())+(new t).apiVersion+"/"+o.endpoint,o.endpoint=a;c(o)}else o={},(new t).uriEndpoints.hasOwnProperty(n)&&((o=(new t).uriEndpoints[n]).hasOwnProperty("isAdminApi")?o.endpoint="https://"+e[s.APP_SETTINGS.KEYS.ADMIN_API_HOST]+"/"+(new t).adminApiVersion+"/"+o.endpoint:(a="https://"+e[s.APP_SETTINGS.KEYS.CLIENT_API_HOST]+"/"+(new t).apiVersion+"/"+o.endpoint,o.endpoint=a)),c(o)},function(e){var s;(new t).uriEndpoints.hasOwnProperty(n)&&(s.endpoint=(s=(new t).uriEndpoints[n]).hasOwnProperty(["isAdminApi"])?r.format((new t).adminApiUrl,i.CometChat.appSettings.getRegion())+(new t).adminApiVersion+"/"+s.endpoint:r.format((new t).baseUrl,i.CometChat.appSettings.getRegion())+(new t).apiVersion+"/"+s.endpoint),c(s)})}catch(e){l(new a.CometChatException(e))}})},t}();t.EndpointFactory=c},function(e,t,n){"use strict";t.__esModule=!0;var r=n(44),s=n(0),o=n(1),i=function(){function e(){}return e.transformPresence=function(e){return e.getAttribute("type")?new r.UserPresence(e.getAttribute(s.PresenceConstatnts.XMPP_KEYS.FROM),s.PresenceConstatnts.STATUS.OFFLINE,(new Date).getTime()):new r.UserPresence(e.getAttribute(s.PresenceConstatnts.XMPP_KEYS.FROM),s.PresenceConstatnts.STATUS.ONLINE,(new Date).getTime())},e.transformPresences=function(e){var t=[];return e.map(function(e){try{t.push(new r.UserPresence(e.getAttribute(s.PresenceConstatnts.XMPP_KEYS.FROM),e.getAttribute(s.PresenceConstatnts.XMPP_KEYS.STATUS),e.getAttribute(s.PresenceConstatnts.XMPP_KEYS.LAST_ACTIVE_AT)))}catch(e){o.Logger.error("PresenceController:transformPresences",e)}}),t},e.transformMUCUserPresence=function(e){return e.getAttribute("type")?new r.UserPresence(e.getAttribute(s.PresenceConstatnts.XMPP_KEYS.FROM),s.PresenceConstatnts.STATUS.LEFT,(new Date).getTime()):new r.UserPresence(e.getAttribute(s.PresenceConstatnts.XMPP_KEYS.FROM),s.PresenceConstatnts.STATUS.JOINED,(new Date).getTime())},e.trandformMUCPresence=function(e){0<e.getElementsByTagName("x").length&&this.transformMUCUserPresence(e)},e}();t.PresenceController=i},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),s=n(13),o=n(1),i=n(3),a=n(28),c=n(2),l=n(20),u=n(9),h=function(){function t(){this.TAG="calling Log",this.callListner=void 0,this.CALL_NO_ANSWER_INTERVAL=45e3,this.view=void 0,this.scrollHight=0,this.scrollHight=0}return t.prototype.getCallListner=function(){return this.callListner},t.prototype.setCallListner=function(e){this.callListner=new l.UserCallListener(e)},t.getInstance=function(){try{return null!=this.callController&&null!=this.callController||(this.callController=new t),this.callController}catch(e){o.Logger.error("CallController: getInstance",e)}},t.prototype.getActiveCall=function(){try{return o.isFalsy(this.call)?null:this.call}catch(e){o.Logger.error("CallController: getActiveCall",e)}},t.prototype.initiateCall=function(e){var t=this;return new Promise(function(n,s){try{o.isFalsy(t.call)?null!=e&&null!=e?(t.call=e,t.joinCallMuc(e.getSessionId()),t.startCallTimer(),n(e)):s(new c.CometChatException(r.CALL_ERROR.ERROR_IN_CALLING)):s(new c.CometChatException(r.CALL_ERROR.CALL_ALREADY_INITIATED))}catch(n){s(new c.CometChatException(n))}})},t.prototype.onCallInitialized=function(){},t.prototype.joinCall=function(e){o.Logger.log(this.TAG,e)},t.prototype.cancelCall=function(){o.Logger.log(this.TAG,"calceling the call"),this.stopCallTimer()},t.prototype.rejectCall=function(){o.Logger.log(this.TAG,"rejectCall")},t.prototype.sendBusyResponse=function(){o.Logger.log(this.TAG,"sendBusyResponse")},t.prototype.endCall=function(e){var t=this;try{i.CometChat.isNative||document.getElementsByName("frame").forEach(function(e){t.view.removeChild(e),t.view=void 0}),this.endCallSession()}catch(e){o.Logger.error("CallController: endCall",e)}},t.prototype.onCallEnded=function(){var t=this;try{o.isFalsy(this.call)||(this.call.getReceiverType()==r.CallConstants.RECEIVER_TYPE_GROUP?o.Logger.info(this.TAG,JSON.stringify(this.call)+"This call ended"):(document.getElementsByName("frame").forEach(function(e){t.view.removeChild(e),t.view=void 0}),this.endCallSession()))}catch(e){o.Logger.error("CallController:onCallEnded",e)}},t.prototype.unAnswerCall=function(){o.Logger.log(this.TAG,"unAnswerCall")},t.prototype.onCallStarted=function(e){var t=this;return new Promise(function(n,s){try{o.isFalsy(t.call)?null!=e&&null!=e?(t.call=e,t.joinCallMuc(e.getSessionId()),n(e)):s(new c.CometChatException(r.CALL_ERROR.ERROR_IN_CALLING)):s(new c.CometChatException(r.CALL_ERROR.CALL_ALREADY_INITIATED))}catch(n){s(new c.CometChatException(n))}})},t.prototype.endCallSession=function(){try{this.leaveCallMuc(this.call.getSessionId()),this.call=void 0,t.callController=void 0,this.timer&&this.stopCallTimer(),this.view=void 0}catch(e){o.Logger.error("CallController:EndCallSession",{e})}},t.prototype.joinCallMuc=function(e){var t=this;o.getAppSettings().then(function(n){s.XMPPConnectionHelper.getInstance().connection.muc.join(o.format(r.XMPP.muc_jid_string,i.CometChat.getAppId(),e,i.CometChat.getAppId(),"call."+n[r.APP_SETTINGS.KEYS.CHAT_HOST]),s.XMPPConnectionHelper.getInstance().connection.jid,null,function(e){try{var c=a.PresenceController.transformPresence(e);s.XMPPConnectionHelper.getInstance().getUsersVCard(c.getUid(),function(n){if(!o.isFalsy(n.getUid()))switch(n.setLastActiveAt(c.getLastActiveAt()),c.getStatus()){case r.PresenceConstatnts.STATUS.ONLINE:n.setStatus(r.PresenceConstatnts.STATUS.ONLINE);break;default:n.setStatus(r.PresenceConstatnts.STATUS.OFFLINE)}switch(a.PresenceController.transformMUCUserPresence(e).getStatus()){case r.PresenceConstatnts.STATUS.JOINED:i.CometChat.user.getUid().toLocaleLowerCase()!=n.getUid().toLocaleLowerCase()&&t.callListner&&(o.isFalsy(t.callListner._eventListener.onUserJoined)||t.callListner._eventListener.onUserJoined(n));break;case r.PresenceConstatnts.STATUS.LEFT:i.CometChat.user.getUid().toLocaleLowerCase()!=n.getUid().toLocaleLowerCase()&&t.callListner&&(o.isFalsy(t.callListner._eventListener.onUserLeft)||t.callListner._eventListener.onUserLeft(n))}})}catch(n){o.Logger.error("CallController: joinCallMuc",n)}return!0})})},t.prototype.leaveCallMuc=function(t){try{o.getAppSettings().then(function(e){s.XMPPConnectionHelper.getInstance().connection.muc.leave(o.format(r.XMPP.muc_jid_string,i.CometChat.getAppId(),t,i.CometChat.getAppId(),"call."+e[r.APP_SETTINGS.KEYS.CHAT_HOST]),s.XMPPConnectionHelper.getInstance().connection.jid)})}catch(e){o.Logger.error("CallController: leaveCallMuc",e)}},t.prototype.startCallTimer=function(){var t=this;try{this.timer=setTimeout(function(){i.CometChat.sendUnansweredResponse(t.call.getSessionId()).then(function(e){t.endCallSession()})},this.CALL_NO_ANSWER_INTERVAL)}catch(e){o.Logger.error("CallController: startCallTimer",e)}},t.prototype.stopCallTimer=function(){try{clearTimeout(this.timer)}catch(e){o.Logger.error("CallController: stopCallTimer",e)}},t.prototype.startCall=function(e,n,r){var s=this;try{if(null==this.view){this.timer&&this.stopCallTimer(),o.isFalsy(n)||this.setCallListner(n);var a=document.createElement("iframe");this.getCallUrl(this.call.getType()).then(function(n){a.src=n+"",a.name="frame",a.setAttribute("allow","camera,microphone"),a.setAttribute("width","100%"),a.setAttribute("height","100%"),t.callScreen=a,e&&(s.view=e),e.appendChild(a),window.addEventListener("message",function(e){var t;try{t=JSON.parse(e.data)}catch(e){t=void 0}void 0!==t&&"hangup"==t.type&&s.call&&(o.Logger.info(s.TAG,s.callListner),i.CometChat.endCall(s.call.getSessionId()).then(function(e){s.callListner&&s.callListner._eventListener.onCallEnded(e),s.endCall(),o.Logger.info(s.TAG,{call:e})}).catch(function(e){o.Logger.info(s.TAG,"The Call Was Already Ended")}))})})}}catch(n){o.Logger.error("CallController: startCall",n)}},t.prototype.getCallUrl=function(t){var n=this,s=void 0;return new Promise(function(i,a){try{u.LocalStorage.getInstance().get(r.APP_SETTINGS.APP_SETTINGS).then(function(e){o.isFalsy(e)?o.getAppSettings().then(function(e){s="https://"+e[r.APP_SETTINGS.KEYS.WEBRTC_HOST],s=t==r.CallConstants.CALL_TYPE_AUDIO?s+"/"+n.call.getSessionId()+"#config.startWithVideoMuted=true&config.startWithAudioMuted=false":s+"/"+n.call.getSessionId()+"#config.startWithAudioMuted=false&config.startWithAudioMuted=false",i(s)}):(s="https://"+e[r.APP_SETTINGS.KEYS.WEBRTC_HOST],s=t==r.CallConstants.CALL_TYPE_AUDIO?s+"/"+n.call.getSessionId()+"#config.startWithVideoMuted=true&config.startWithAudioMuted=false":s+"/"+n.call.getSessionId()+"#config.startWithAudioMuted=false&config.startWithAudioMuted=false",i(s))})}catch(e){a(new c.CometChatException(e))}})},t.toggleAudio=function(){try{this.callScreen&&this.callScreen.contentWindow.postMessage({action:"audio"},"*")}catch(e){o.Logger.error("CallController: toggleAudio",e)}},t.toggleVideo=function(){try{this.callScreen&&this.callScreen.contentWindow.postMessage({action:"video"},"*")}catch(e){o.Logger.error("CallController: toggleVideo",e)}},t.leave=function(){try{this.callScreen&&this.callScreen.contentWindow.postMessage({action:"leave"},"*")}catch(e){o.Logger.error("CallController: leave",e)}},t.prototype.destroy=function(){try{o.isFalsy(this.call)||(this.call=void 0),o.isFalsy(this.timer)||(this.timer=void 0),o.isFalsy(this.view)||(this.view=void 0)}catch(e){o.Logger.error("CallController: destroy",e)}},t.callController=void 0,t}();t.CallController=h},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t,n){this.receiverId=e,this.receiverType=t,this.metadata=n}return e.prototype.getReceiverType=function(){return this.receiverType},e.prototype.setReceiverType=function(e){this.receiverType=e},e.prototype.getReceiverId=function(){return this.receiverId},e.prototype.setReceiverId=function(e){this.receiverId=e},e.prototype.getMetadata=function(){return this.metadata},e.prototype.setMetadata=function(e){this.metadata=e},e.prototype.getSender=function(){return this.sender},e.prototype.setSender=function(e){this.sender=e},e}();t.TypingIndicator=r},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),s=n(0),o=n(13),i=function(){function e(){}return e.addTypingStarted=function(e){this.TYPING_STARTED_MAP[e]=r.getCurrentTime()},e.removeTypingStarted=function(e){delete this.TYPING_STARTED_MAP[e]},e.getTypingStartedMap=function(e){if(e)return this.TYPING_STARTED_MAP[e]},e.addTypingEnded=function(e){this.TYPING_ENDED_MAP[e]=r.getCurrentTime()},e.removeTypingEnded=function(e){delete this.TYPING_ENDED_MAP[e]},e.getTypingEndedMap=function(e){if(e)return this.TYPING_ENDED_MAP[e]},e.addIncomingTypingStarted=function(e){this.INCOMING_TYPING_STARTED_MAP[e.getReceiverId()]={typingNotification:e,timestamp:r.getCurrentTime()}},e.removeIncomingTypingStarted=function(e){delete this.INCOMING_TYPING_STARTED_MAP[e.getReceiverId()]},e.clearTimer=function(){var e=this;new Promise(function(t,n){Object.keys(e.TYPING_STARTED_MAP).map(function(t){r.getCurrentTime()-e.TYPING_STARTED_MAP[t]>=1e3*s.DEFAULT_VALUES.DEFAULT_MAX_TYPING_INDICATOR_LIMIT&&delete e.TYPING_STARTED_MAP[t]})}),new Promise(function(t,n){Object.keys(e.TYPING_ENDED_MAP).map(function(t){r.getCurrentTime()-e.TYPING_ENDED_MAP[t]>=1e3*s.DEFAULT_VALUES.DEFAULT_MAX_TYPING_INDICATOR_LIMIT&&delete e.TYPING_ENDED_MAP[t]})}),new Promise(function(t,n){Object.keys(e.INCOMING_TYPING_STARTED_MAP).map(function(t){r.getCurrentTime()-e.INCOMING_TYPING_STARTED_MAP[t][s.TYPING_NOTIFICATION.KEYS.TIMESTAMP]>=1e3*s.DEFAULT_VALUES.DEFAULT_MAX_TYPING_INDICATOR_LIMIT&&(o.XMPPConnectionHelper.getInstance().publishTypinStatusNotification(e.INCOMING_TYPING_STARTED_MAP[t][s.TYPING_NOTIFICATION.KEYS.TYPING_NOTIFICATION],s.TYPING_NOTIFICATION.ACTIONS.ENDED),delete e.INCOMING_TYPING_STARTED_MAP[t])})})},e.TYPING_STARTED_MAP={},e.TYPING_ENDED_MAP={},e.INCOMING_TYPING_STARTED_MAP={},e}();t.TypingNotificationController=i},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(i,a)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=0<(s=i.trys).length&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(a){o=[6,a],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};t.__esModule=!0;var o=n(3),i=function(){function e(){}return e.addCometChatExtension=function(t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return e.cometChatExtensionList.push(t),o.CometChat.user?[4,t.onInit(o.CometChat.getAppId(),o.CometChat.user)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.onInit(o.CometChat.getAppId())];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e.cometChatExtensionList=[],e}();t.ExtensionManager=i},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),s=function(){function e(t){this.subscriptionType=e.SUBSCRIPTION_TYPE_NONE,this.roles=null,this.region=r.DEFAULT_VALUES.REGION_DEFAULT,this.subscriptionType=t.subscriptionType,this.roles=t.roles,this.region=t.region}return e.prototype.getSubscriptionType=function(){return this.subscriptionType},e.prototype.getRoles=function(){return this.roles},e.prototype.getRegion=function(){return this.region},e.SUBSCRIPTION_TYPE_NONE="NONE",e.SUBSCRIPTION_TYPE_ALL_USERS="ALL_USERS",e.SUBSCRIPTION_TYPE_ROLES="ROLES",e.SUBSCRIPTION_TYPE_FRIENDS="FRIENDS",e.REGION_EU=r.DEFAULT_VALUES.REGION_DEFAULT_EU,e.REGION_US=r.DEFAULT_VALUES.REGION_DEFAULT_US,e.REGION_IN=r.DEFAULT_VALUES.REGION_DEFAULT_IN,e.REGION_PRIVATE=r.DEFAULT_VALUES.REGION_DEFAULT_PRIVATE,e}();t.AppSettings=s;var o=function(){function e(){this.subscriptionType=s.SUBSCRIPTION_TYPE_NONE,this.roles=null,this.region=r.DEFAULT_VALUES.REGION_DEFAULT}return e.prototype.subscribePresenceForAllUsers=function(){return this.subscriptionType=s.SUBSCRIPTION_TYPE_ALL_USERS,this},e.prototype.subscribePresenceForRoles=function(e){return this.subscriptionType=s.SUBSCRIPTION_TYPE_ROLES,this.roles=e,this},e.prototype.subscribePresenceForFriends=function(){return this.subscriptionType=s.SUBSCRIPTION_TYPE_FRIENDS,this},e.prototype.setRegion=function(e){return void 0===e&&(e=r.DEFAULT_VALUES.REGION_DEFAULT),this.region=e,this},e.prototype.build=function(){return new s(this)},e}();t.AppSettingsBuilder=o},function(e,t,n){"use strict";t.__esModule=!0;var r=n(3),s=n(1),o=n(0),i=n(11),a=function(){function e(e){this.store=o.constants.DEFAULT_STORE,s.isFalsy(e)||(this.store=e),this.userStore=i.createInstance({name:s.format(o.LOCAL_STORE.STORE_STRING,r.CometChat.getAppId(),o.LOCAL_STORE.USERS_STORE)}),this.userStore.setDriver([i.LOCALSTORAGE,i.INDEXEDDB,i.WEBSQL])}return e.getInstance=function(){return null==e.UserStore&&(e.UserStore=new e),e.UserStore},e.prototype.set=function(e,t){return this.userStore.setItem(e,t)},e.prototype.remove=function(e){this.userStore.removeItem(e)},e.prototype.get=function(e){return this.userStore.getItem(e)},e.prototype.clearStore=function(){return this.userStore.clear()},e.prototype.clear=function(e){},e.prototype.selectStore=function(e){this.store=e},e.prototype.storeUsers=function(e){var t=this;return e.map(function(e){t.set(e.getUid(),e)}),!0},e.prototype.storeUser=function(e){return this.set(e.getUid(),e),!0},e}();t.UserStore=a},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),s=function(){function e(e,t){this.joinedAt=0,this.isBanned=0,this.uid=e,t&&(this.scope=t)}return e.prototype.getName=function(){return this.name},e.prototype.setName=function(e){this.name=e},e.prototype.getAvatar=function(){return this.avatar},e.prototype.setAvatar=function(e){this.avatar=e},e.prototype.getCredits=function(){return this.credits},e.prototype.setCredits=function(e){this.credits=e},e.prototype.getLastActiveAt=function(){return this.lastActiveAt},e.prototype.setLastActiveAt=function(e){this.lastActiveAt=e},e.prototype.getLink=function(){return this.link},e.prototype.setLink=function(e){this.link=e},e.prototype.getMetadata=function(){return this.metadata},e.prototype.setMetadata=function(e){this.metadata=e},e.prototype.getRole=function(){return this.role},e.prototype.setRole=function(e){this.role=e},e.prototype.getStatus=function(){return this.status},e.prototype.setStatus=function(e){this.status=e},e.prototype.getStatusMessage=function(){return this.statusMessage},e.prototype.setStatusMessage=function(e){this.statusMessage=e},e.prototype.setGuid=function(e){this.guid=e},e.prototype.setUid=function(e){this.uid=e},e.prototype.setScope=function(e){this.scope=e},e.prototype.setJoinedAt=function(e){this.joinedAt=e},e.prototype.setIsBanned=function(e){this.isBanned=e},e.prototype.setUser=function(e){this.user=e},e.prototype.getGuid=function(){return this.guid},e.prototype.getUid=function(){return this.uid},e.prototype.getuser=function(){return this.user},e.prototype.getScope=function(){return this.scope},e.prototype.getJoinedAt=function(){return this.joinedAt},e.prototype.getIsBanned=function(){return this.isBanned},e.GroupMemberScope=r.GroupMemberScope,e}();t.GroupMember=s},function(e,t,n){"use strict";t.__esModule=!0;var r=n(37),s=n(1),o=function(){function e(){}return e.trasformJSONConversation=function(e,t,n,o,i){var a;try{a=new r.Conversation(e,t,n,o,i)}catch(e){s.Logger.error("ConversationController:transformJSONConversation",e)}return a},e}();t.ConversationController=o},function(e,t,n){"use strict";t.__esModule=!0;var r=n(7),s=n(0),o=n(8),i=n(16),a=function(){function e(e,t,n,a,c){this.conversationId=e,this.conversationType=t,void 0!==n&&void 0!==(this.lastMessage=n).id&&(this.lastMessage=r.MessageController.trasformJSONMessge(n)),this.conversationWith=this.conversationType==s.MessageConstatnts.RECEIVER_TYPE.USER?o.UsersController.trasformJSONUser(a):i.GroupsController.trasformJSONGroup(a),this.unreadMessageCount=c}return e.prototype.setConversationId=function(e){this.conversationId=e},e.prototype.setConversationType=function(e){this.conversationType=e},e.prototype.setLastMessage=function(e){this.lastMessage=e},e.prototype.setConversationWith=function(e){this.conversationWith=e},e.prototype.setUnreadMessageCount=function(e){this.unreadMessageCount=e},e.prototype.getConversationId=function(){return this.conversationId},e.prototype.getConversationType=function(){return this.conversationType},e.prototype.getLastMessage=function(){return this.lastMessage},e.prototype.getConversationWith=function(){return this.conversationWith},e.prototype.getUnreadMessageCount=function(){return this.unreadMessageCount},e}();t.Conversation=a},function(e,t){function n(e,t){for(var n in e)t[n]=e[n]}function r(e,t){var r=e.prototype;if(Object.create){var s=Object.create(t.prototype);r.__proto__=s}if(!(r instanceof t)){function o(){}o.prototype=t.prototype,n(r,o=new o),e.prototype=r=o}r.constructor!=e&&(r.constructor=e)}var s="http://www.w3.org/1999/xhtml",o={},i=o.ELEMENT_NODE=1,a=o.ATTRIBUTE_NODE=2,c=o.TEXT_NODE=3,l=o.CDATA_SECTION_NODE=4,u=o.ENTITY_REFERENCE_NODE=5,h=o.ENTITY_NODE=6,d=o.PROCESSING_INSTRUCTION_NODE=7,p=o.COMMENT_NODE=8,f=o.DOCUMENT_NODE=9,g=o.DOCUMENT_TYPE_NODE=10,E=o.DOCUMENT_FRAGMENT_NODE=11,m=o.NOTATION_NODE=12,_={},C={},S=(_.INDEX_SIZE_ERR=(C[1]="Index size error",1),_.DOMSTRING_SIZE_ERR=(C[2]="DOMString size error",2),_.HIERARCHY_REQUEST_ERR=(C[3]="Hierarchy request error",3)),T=(_.WRONG_DOCUMENT_ERR=(C[4]="Wrong document",4),_.INVALID_CHARACTER_ERR=(C[5]="Invalid character",5),_.NO_DATA_ALLOWED_ERR=(C[6]="No data allowed",6),_.NO_MODIFICATION_ALLOWED_ERR=(C[7]="No modification allowed",7),_.NOT_FOUND_ERR=(C[8]="Not found",8)),y=(_.NOT_SUPPORTED_ERR=(C[9]="Not supported",9),_.INUSE_ATTRIBUTE_ERR=(C[10]="Attribute in use",10));function v(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,C[e]),this.message=C[e],Error.captureStackTrace&&Error.captureStackTrace(this,v);return n.code=e,t&&(this.message=this.message+": "+t),n}function A(){}function I(e,t){this._node=e,this._refresh=t,R(this)}function R(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);ne(e,"length",r.length),n(r,e),e._inc=t}}function N(){}function O(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function w(e,t,n,r){if(r?t[O(t,r)]=n:t[t.length++]=n,e){var s=(n.ownerElement=e).ownerDocument;s&&(r&&D(s,e,r),i=e,a=n,(o=s)&&o._inc++,"http://www.w3.org/2000/xmlns/"==a.namespaceURI&&(i._nsMap[a.prefix?a.localName:""]=a.value))}var o,i,a}function M(e,t,n){var r=O(t,n);if(!(0<=r))throw v(T,new Error(e.tagName+"@"+n));for(var s=t.length-1;r<s;)t[r]=t[++r];if(t.length=s,e){var o=e.ownerDocument;o&&(D(o,e,n),n.ownerElement=null)}}function b(e){if(this._features={},e)for(var t in e)this._features=e[t]}function P(){}function L(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function x(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(x(e,t))return!0}while(e=e.nextSibling)}function U(){}function D(e,t,n,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function Y(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var s=t.firstChild,o=0;s;)s=(r[o++]=s).nextSibling;r.length=o}}}function G(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,Y(e.ownerDocument,e),t}function k(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===E){var s=t.firstChild;if(null==s)return t;var o=t.lastChild}else s=o=t;var i=n?n.previousSibling:e.lastChild;for(s.previousSibling=i,o.nextSibling=n,i?i.nextSibling=s:e.firstChild=s,null==n?e.lastChild=o:n.previousSibling=o;s.parentNode=e,s!==o&&(s=s.nextSibling););return Y(e.ownerDocument||e,e),t.nodeType==E&&(t.firstChild=t.lastChild=null),t}function F(){this._nsMap={}}function V(){}function B(){}function H(){}function K(){}function j(){}function J(){}function q(){}function X(){}function $(){}function W(){}function z(){}function Q(){}function Z(e,t){var n=[],r=9==this.nodeType?this.documentElement:this,s=r.prefix,o=r.namespaceURI;if(o&&null==s&&null==(s=r.lookupPrefix(o)))var i=[{namespace:o,prefix:null}];return te(this,n,e,t,i),n.join("")}function ee(e,t,n){var r=e.prefix||"",s=e.namespaceURI;if(!r&&!s)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===s||"http://www.w3.org/2000/xmlns/"==s)return!1;for(var o=n.length;o--;){var i=n[o];if(i.prefix==r)return i.namespace!=s}return!0}function te(e,t,n,r,o){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case i:o||(o=[]);var h=e.attributes,m=h.length,_=e.firstChild,C=e.tagName;n=s===e.namespaceURI||n,t.push("<",C);for(var S=0;S<m;S++)"xmlns"==(T=h.item(S)).prefix?o.push({prefix:T.localName,namespace:T.value}):"xmlns"==T.nodeName&&o.push({prefix:"",namespace:T.value});for(S=0;S<m;S++){var T;if(ee(T=h.item(S),0,o)){var y=T.prefix||"",v=T.namespaceURI,A=y?" xmlns:"+y:" xmlns";t.push(A,'="',v,'"'),o.push({prefix:y,namespace:v})}te(T,t,n,r,o)}if(ee(e,0,o)&&(t.push(A=(y=e.prefix||"")?" xmlns:"+y:" xmlns",'="',v=e.namespaceURI,'"'),o.push({prefix:y,namespace:v})),_||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(C)){if(t.push(">"),n&&/^script$/i.test(C))for(;_;)_.data?t.push(_.data):te(_,t,n,r,o),_=_.nextSibling;else for(;_;)te(_,t,n,r,o),_=_.nextSibling;t.push("</",C,">")}else t.push("/>");return;case f:case E:for(_=e.firstChild;_;)te(_,t,n,r,o),_=_.nextSibling;return;case a:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,L),'"');case c:return t.push(e.data.replace(/[<&]/g,L));case l:return t.push("<![CDATA[",e.data,"]]>");case p:return t.push("\x3c!--",e.data,"--\x3e");case g:var I=e.publicId,R=e.systemId;if(t.push("<!DOCTYPE ",e.name),I)t.push(' PUBLIC "',I),R&&"."!=R&&t.push('" "',R),t.push('">');else if(R&&"."!=R)t.push(' SYSTEM "',R,'">');else{var N=e.internalSubset;N&&t.push(" [",N,"]"),t.push(">")}return;case d:return t.push("<?",e.target," ",e.data,"?>");case u:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ne(e,t,n){e[t]=n}_.INVALID_STATE_ERR=(C[11]="Invalid state",11),_.SYNTAX_ERR=(C[12]="Syntax error",12),_.INVALID_MODIFICATION_ERR=(C[13]="Invalid modification",13),_.NAMESPACE_ERR=(C[14]="Invalid namespace",14),_.INVALID_ACCESS_ERR=(C[15]="Invalid access",15),v.prototype=Error.prototype,n(_,v),A.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)te(this[r],n,e,t);return n.join("")}},I.prototype.item=function(e){return R(this),this[e]},r(I,A),N.prototype={length:0,item:A.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new v(y);var n=this.getNamedItem(e.nodeName);return w(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new v(y);return t=this.getNamedItemNS(e.namespaceURI,e.localName),w(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return M(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return M(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},b.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new U;if(r.implementation=this,r.childNodes=new A,(r.doctype=n)&&r.appendChild(n),t){var s=r.createElementNS(e,t);r.appendChild(s)}return r},createDocumentType:function(e,t,n){var r=new J;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},P.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return k(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return G(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,r){var s=new n.constructor;for(var o in n){var c=n[o];"object"!=typeof c&&c!=s[o]&&(s[o]=c)}switch(n.childNodes&&(s.childNodes=new A),s.ownerDocument=t,s.nodeType){case i:var l=n.attributes,u=s.attributes=new N,h=l.length;u._ownerElement=s;for(var d=0;d<h;d++)s.setAttributeNode(e(t,l.item(d),!0));break;case a:r=!0}if(r)for(var p=n.firstChild;p;)s.appendChild(e(t,p,r)),p=p.nextSibling;return s}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==c&&e.nodeType==c?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=t.nodeType==a?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==a?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},n(o,P),n(o,P.prototype),U.prototype={nodeName:"#document",nodeType:f,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType!=E)return null==this.documentElement&&e.nodeType==i&&(this.documentElement=e),k(this,e,t),e.ownerDocument=this,e;for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),G(this,e)},importNode:function(e,t){return function e(t,n,r){var s;switch(n.nodeType){case i:(s=n.cloneNode(!1)).ownerDocument=t;case E:break;case a:r=!0}if(s||(s=n.cloneNode(!1)),s.ownerDocument=t,s.parentNode=null,r)for(var o=n.firstChild;o;)s.appendChild(e(t,o,r)),o=o.nextSibling;return s}(this,e,t)},getElementById:function(e){var t=null;return x(this.documentElement,function(n){if(n.nodeType==i&&n.getAttribute("id")==e)return t=n,!0}),t},createElement:function(e){var t=new F;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new A,(t.attributes=new N)._ownerElement=t},createDocumentFragment:function(){var e=new W;return e.ownerDocument=this,e.childNodes=new A,e},createTextNode:function(e){var t=new H;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new K;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new j;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new z;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new V;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new $;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new F,r=t.split(":"),s=n.attributes=new N;return n.childNodes=new A,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,s._ownerElement=n},createAttributeNS:function(e,t){var n=new V,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},r(U,P),U.prototype.getElementsByTagName=(F.prototype={nodeType:i,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===E?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t),r=e.lastChild}return r=e.lastChild,t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,Y(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new I(this,function(t){var n=[];return x(t,function(r){r===t||r.nodeType!=i||"*"!==e&&r.tagName!=e||n.push(r)}),n})},getElementsByTagNameNS:function(e,t){return new I(this,function(n){var r=[];return x(n,function(s){s===n||s.nodeType!==i||"*"!==e&&s.namespaceURI!==e||"*"!==t&&s.localName!=t||r.push(s)}),r})}}).getElementsByTagName,U.prototype.getElementsByTagNameNS=F.prototype.getElementsByTagNameNS,r(F,P),V.prototype.nodeType=a,r(V,P),B.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){this.nodeValue=this.data=e=this.data+e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(C[S])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},r(B,P),H.prototype={nodeName:"#text",nodeType:c,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},r(H,B),K.prototype={nodeName:"#comment",nodeType:p},r(K,B),j.prototype={nodeName:"#cdata-section",nodeType:l},r(j,B),J.prototype.nodeType=g,r(J,P),q.prototype.nodeType=m,r(q,P),X.prototype.nodeType=h,r(X,P),$.prototype.nodeType=u,r($,P),W.prototype.nodeName="#document-fragment",W.prototype.nodeType=E,r(W,P),z.prototype.nodeType=d,r(z,P),Q.prototype.serializeToString=function(e,t,n){return Z.call(e,t,n)},P.prototype.toString=Z;try{Object.defineProperty&&(Object.defineProperty(I.prototype,"length",{get:function(){return R(this),this.$$length}}),Object.defineProperty(P.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case i:case E:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case i:case E:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ne=function(e,t,n){e["$$"+t]=n})}catch(e){}t.DOMImplementation=b,t.XMLSerializer=Q},function(e,t,n){"use strict";t.__esModule=!0;var r=n(3);t.init=function(e){return r.CometChat.getInstance(e)},t.CometChat=r.CometChat},function(e,t,n){"use strict";t.__esModule=!0;var r=n(27),s=n(2);t.getEndPoint=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});var n=new r.EndpointFactory;return new Promise(function(r,o){try{n.getEndpointData(e).then(function(e){var n=e;if(n){for(var s in t)n.endpoint=n.endpoint.replace("{{"+s+"}}",t[s]);r(n)}else o({error:"Unknown endPoint name."})})}catch(e){o(new s.CometChatException(e))}})}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(i,a)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=0<(s=i.trys).length&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(a){o=[6,a],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};t.__esModule=!0;var o=n(15),i=n(10),a=n(0),c=n(1);t.$iq=o.$iq,t.$build=o.$build,t.$msg=o.$msg,t.$pres=o.$pres,t.Strophe=o.Strophe,t.NS=o.Strophe.NS,t.Status=o.Strophe.Status,window.Strophe=t.Strophe,window.$iq=t.$iq,window.$msg=t.$msg,t.Strophe.addConnectionPlugin("chatstates",{init:function(e){this._connection=e,t.Strophe.addNamespace("CHATSTATES","http://jabber.org/protocol/chatstates")},statusChanged:function(e){},addActive:function(e){return e.c("active",{xmlns:t.Strophe.NS.CHATSTATES}).up()},_notificationReceived:function(e){var t=e.getElementsByTagName("composing");return e.getElementsByTagName("paused"),e.getAttribute("from"),0<t.length&&JSON.stringify(unescape(i.parseHTML(e.getElementsByTagName("body")[0]))),!0},sendActive:function(e,t,n){this._sendNotification(e,t,"active",n)},sendComposing:function(e,t,n){this._sendNotification(e,t,"composing",n)},sendPaused:function(e,t,n){this._sendNotification(e,t,"paused",n)},sendInactive:function(e,t){this._sendNotification(e,t,"inactive")},sendGone:function(e,t){this._sendNotification(e,t,"gone")},_sendNotification:function(e,n,r,s){n||(n="chat"),c.isFalsy(s)?this._connection.send(t.$msg({to:e,from:this._connection.jid,type:n}).c(r,{xmlns:t.Strophe.NS.CHATSTATES})):this._connection.send(t.$msg({to:e,from:this._connection.jid,type:n}).c("body",JSON.stringify(s)).up().c(r,{xmlns:t.Strophe.NS.CHATSTATES}))}}),t.Strophe.addConnectionPlugin("receipts",{_conn:null,_msgQueue:{},_retries:{},_resendCount:10,_resendTime:9e3,init:function(e){this._conn=e,t.Strophe.addNamespace("RECEIPTS","urn:xmpp:receipts")},statusChanged:function(e){if(e===t.Strophe.Status.CONNECTED||e===t.Strophe.Status.ATTACHED){this._conn.addHandler(this._onRequestReceived.bind(this),t.Strophe.NS.RECEIPTS,"message");var n=this;setTimeout(function(){n.resendQueue()},5e3)}},sendMessage:function(e){var n=this._conn.getUniqaueId();e.tree().setAttribute("id",n);var r=t.Strophe.xmlElement("request",{xmlns:t.Strophe.NS.RECEIPTS});return e.tree().appendChild(r),this._msgQueue[n]=e,this._retries[n]=0,this._conn.send(e),this.resendMessage(n),n},resendMessage:function(e){var t=this;setTimeout(function(){if(t._msgQueue[e]){if(!t._conn.connected)return void t.resendMessage(e);if(t._retries[e]++,t._retries[e]>t._resendCount)return;t._msgQueue[e].tree().setAttribute("from",t._conn.jid),t._conn.send(t._msgQueue[e]),t.resendMessage(e)}},this._resendTime)},addReceiptHandler:function(e,n,r,s){var o=this;this._conn.addHandler(function(t){return o._processReceipt(t),e(t)},t.Strophe.NS.RECEIPTS,"message",n,null,r,s)},_processReceipt:function(e,n){return void 0===n&&(n=0),r(this,void 0,void 0,function(){var n,r,o,c,l,u,h,d,p,f,g,E;return s(this,function(s){n=e.getAttribute(a.DELIVERY_RECEIPTS.ID),r=t.Strophe.getBareJidFromJid(e.getAttribute(a.MessageConstatnts.XMPP_KEYS.FROM)),o=i.getUidFromJid(r),c=a.MessageConstatnts.XMPP_KEYS.TYPE_USER,l=a.MessageConstatnts.RECEIVER_TYPE.USER,u=e.getElementsByTagName("request"),h=e.getElementsByTagName("received");try{d=e.getElementsByTagName("body")[0].innerHTML}catch(s){p=d=void 0}return void 0!==d&&(p=JSON.parse(d).receiverType),e.getAttribute(a.MessageConstatnts.XMPP_KEYS.TYPE)==a.MessageConstatnts.XMPP_KEYS.TYPE_GROUP||void 0!==p&&p==a.MessageConstatnts.RECEIVER_TYPE.GROUP?(l=a.MessageConstatnts.RECEIVER_TYPE.GROUP,r=i.getGroupJidFullGroupJid(e.getAttribute(a.MessageConstatnts.XMPP_KEYS.FROM)),c=a.MessageConstatnts.XMPP_KEYS.TYPE_GROUP,0<r.trim().length&&0<u.length&&(f=t.$msg({to:r,type:c,from:this._conn.jid,id:this._conn.getUniqueId()}),g=t.Strophe.xmlElement("delivered",{type:l,receiverId:o,xmlns:t.Strophe.NS.RECEIPTS,id:n}),f.tree().appendChild(g),this._conn.send(f))):0<u.length&&(f=t.$msg({to:r,type:c,from:this._conn.jid,id:this._conn.getUniqueId()}),g=t.Strophe.xmlElement("delivered",{type:l,receiverId:o,xmlns:t.Strophe.NS.RECEIPTS,id:n}),f.tree().appendChild(g),this._conn.send(f)),0<h.length&&(E=h[0].getAttribute(a.DELIVERY_RECEIPTS.ID))&&(delete this._msgQueue[E],delete this._retries[E]),[2]})})},resendQueue:function(){if(this._conn.connected)for(var e in this._msgQueue)this._msgQueue.hasOwnProperty(e)&&this._conn.send(this._msgQueue[e]);else{var t=this;setTimeout(function(){t.resendQueue()},5e3)}},getUnreceivedMsgs:function(){var e=[];for(var t in this._msgQueue)this._msgQueue.hasOwnProperty(t)&&e.push(this._msgQueue[t]);return e},clearMessages:function(){this._msgQueue={}}})},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(){this.RECEIPT_TYPE={READ_RECEIPT:"read",DELIVERY_RECEIPT:"delivery"},this.receiptType=this.RECEIPT_TYPE.DELIVERY_RECEIPT}return e.prototype.getReceiverType=function(){return this.receiverType},e.prototype.setReceiverType=function(e){this.receiverType=e},e.prototype.getSender=function(){return this.sender},e.prototype.setSender=function(e){this.sender=e},e.prototype.getReceiver=function(){return this.receiver},e.prototype.setReceiver=function(e){this.receiver=e},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.setTimestamp=function(e){this.timestamp=e},e.prototype.setReadAt=function(e){this.readAt=e},e.prototype.getReadAt=function(){return this.readAt},e.prototype.setDeliveredAt=function(e){this.deliveredAt=e},e.prototype.getDeliveredAt=function(){return this.deliveredAt},e.prototype.getMessageId=function(){return this.messageId},e.prototype.setMessageId=function(e){this.messageId=e},e.prototype.getReceiptType=function(){return this.receiptType},e.prototype.setReceiptType=function(e){void 0===e&&(e=this.RECEIPT_TYPE.DELIVERY_RECEIPT),this.receiptType=e},e}();t.MessageReceipt=r},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),s=function(){function e(e){e.hasOwnProperty(r.ATTACHMENTS_CONSTANTS.KEYS.EXTENSION)&&(this.fileEextension=e[r.ATTACHMENTS_CONSTANTS.KEYS.EXTENSION]),e.hasOwnProperty(r.ATTACHMENTS_CONSTANTS.KEYS.MIME_TYPE)&&(this.fileMimeType=e[r.ATTACHMENTS_CONSTANTS.KEYS.MIME_TYPE]),e.hasOwnProperty(r.ATTACHMENTS_CONSTANTS.KEYS.NAME)&&(this.fileName=e[r.ATTACHMENTS_CONSTANTS.KEYS.NAME]),e.hasOwnProperty(r.ATTACHMENTS_CONSTANTS.KEYS.SIZE)&&(this.fileSize=e[r.ATTACHMENTS_CONSTANTS.KEYS.SIZE]),e.hasOwnProperty(r.ATTACHMENTS_CONSTANTS.KEYS.URL)&&(this.fileUrl=e[r.ATTACHMENTS_CONSTANTS.KEYS.URL])}return e.prototype.createFileFromJSON=function(t){return new e(t)},e.prototype.toJSON=function(e){return JSON.stringify(e)},e.prototype.getFileExtension=function(){return this.fileEextension},e.prototype.setFileExtension=function(e){this.fileEextension=e},e.prototype.getFileMimeType=function(){return this.fileMimeType},e.prototype.setFileMimeType=function(e){this.fileMimeType=e},e.prototype.getFileName=function(){return this.fileName},e.prototype.setFileName=function(e){this.fileName=e},e.prototype.getFileSize=function(){return this.fileSize},e.prototype.setFileSize=function(e){this.fileSize=e},e.prototype.getFileUrl=function(){return this.fileUrl},e.prototype.setFileUrl=function(e){this.fileUrl=e},e}();t.Attachment=s},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),s=n(10),o=function(){function e(e,t,n,o){r.isFalsy(e)||(this.jid=e,this.uid=s.getUidFromJid(e),r.isFalsy(o)||(this.priority=o),r.isFalsy(t)||(this.status=t),r.isFalsy(n)||(this.lastActiveAt=n))}return e.prototype.getUid=function(){return this.uid},e.prototype.setUid=function(e){this.uid=e},e.prototype.getJid=function(){return this.jid},e.prototype.setJid=function(e){this.jid=e},e.prototype.getPriority=function(){return this.priority},e.prototype.setPriority=function(e){this.priority=e},e.prototype.getStatus=function(){return this.status},e.prototype.setStatus=function(e){this.status=e},e.prototype.getLastActiveAt=function(){return this.lastActiveAt},e.prototype.setLastActiveAt=function(e){this.lastActiveAt=e},e.prototype.getStatusMessage=function(){return this.statusMessage},e.prototype.setStatusMessage=function(e){this.statusMessage=e},e}();t.UserPresence=o},function(e,t,n){!function(e){"use strict";var t,n,r={}.hasOwnProperty,s=function(e,t){return function(){return e.apply(t,arguments)}};e.Strophe.addConnectionPlugin("muc",{_connection:null,rooms:{},roomNames:[],init:function(t){return this._connection=t,this._muc_handler=null,e.Strophe.addNamespace("MUC_OWNER",e.Strophe.NS.MUC+"#owner"),e.Strophe.addNamespace("MUC_ADMIN",e.Strophe.NS.MUC+"#admin"),e.Strophe.addNamespace("MUC_USER",e.Strophe.NS.MUC+"#user"),e.Strophe.addNamespace("MUC_ROOMCONF",e.Strophe.NS.MUC+"#roomconfig"),e.Strophe.addNamespace("MUC_REGISTER","jabber:iq:register")},join:function(t,r,s,o,i,a,c,l){var u,h,d;return h=this.test_append_nick(t,r),u=e.$pres({from:this._connection.jid,to:h}).c("x",{xmlns:e.Strophe.NS.MUC}),null!=c&&(u=u.c("history",c).up()),null!=a&&u.cnode(e.Strophe.xmlElement("password",[],a)),null!=l&&u.up().cnode(l),null==this._muc_handler&&(this._muc_handler=this._connection.addHandler((d=this,function(n){var r,s,o,i,a,c,l,u;if(!(r=n.getAttribute("from")))return!0;if(c=r.split("/")[0],!d.rooms[c])return!0;if(t=d.rooms[c],s={},"message"===n.nodeName)s=t._message_handlers;else if("presence"===n.nodeName&&0<(u=n.getElementsByTagName("x")).length)for(o=0,a=u.length;o<a;o++)if((l=u[o].getAttribute("xmlns"))&&l.match(e.Strophe.NS.MUC)){s=t._presence_handlers;break}for(i in s)(0,s[i])(n,t)||delete s[i];return!0}))),this.rooms.hasOwnProperty(t)||(this.rooms[t]=new n(this,t,r,a),o&&this.rooms[t].addHandler("presence",o),s&&this.rooms[t].addHandler("message",s),i&&this.rooms[t].addHandler("roster",i),this.roomNames.push(t)),this._connection.send(u)},leave:function(t,n,r,s){var o,i,a,c;return o=this.roomNames.indexOf(t),delete this.rooms[t],0<=o&&(this.roomNames.splice(o,1),0===this.roomNames.length&&(this._connection.deleteHandler(this._muc_handler),this._muc_handler=null)),c=this.test_append_nick(t,n),a=this._connection.getUniqueId(),i=e.$pres({type:"unavailable",id:a,from:this._connection.jid,to:c}),null!=s&&i.c("status",s),null!=r&&this._connection.addHandler(r,null,"presence",null,a),this._connection.send(i),a},message:function(t,n,r,s,o,i){var a,c,l;return l=this.test_append_nick(t,n),o=o||(null!=n?"chat":"groupchat"),i=i||this._connection.getUniqueId(),(a=e.$msg({to:l,from:this._connection.jid,type:o,id:i}).c("body").t(r)).up(),null!=s&&(a.c("html",{xmlns:e.Strophe.NS.XHTML_IM}).c("body",{xmlns:e.Strophe.NS.XHTML}).h(s),0===a.node.childNodes.length?(c=a.node.parentNode,a.up().up(),a.node.removeChild(c)):a.up().up()),a.c("x",{xmlns:"jabber:x:event"}).c("composing"),this._connection.send(a),i},groupchat:function(e,t,n,r){return this.message(e,null,t,n,void 0,r)},invite:function(t,n,r){var s,o;return o=this._connection.getUniqueId(),s=e.$msg({from:this._connection.jid,to:t,id:o}).c("x",{xmlns:e.Strophe.NS.MUC_USER}).c("invite",{to:n}),null!=r&&s.c("reason",r),this._connection.send(s),o},multipleInvites:function(t,n,r){var s,o,i,a;for(a=this._connection.getUniqueId(),o=e.$msg({from:this._connection.jid,to:t,id:a}).c("x",{xmlns:e.Strophe.NS.MUC_USER}),s=0,i=n.length;s<i;s++)o.c("invite",{to:n[s]}),null!=r&&(o.c("reason",r),o.up()),o.up();return this._connection.send(o),a},directInvite:function(t,n,r,s){var o,i,a;return a=this._connection.getUniqueId(),o={xmlns:"jabber:x:conference",jid:t},null!=r&&(o.reason=r),null!=s&&(o.password=s),i=e.$msg({from:this._connection.jid,to:n,id:a}).c("x",o),this._connection.send(i),a},queryOccupants:function(t,n,r){var s,o;return s={xmlns:e.Strophe.NS.DISCO_ITEMS},o=e.$iq({from:this._connection.jid,to:t,type:"get"}).c("query",s),this._connection.sendIQ(o,n,r)},configure:function(t,n,r){var s;return s=e.$iq({to:t,type:"get"}).c("query",{xmlns:e.Strophe.NS.MUC_OWNER}).tree(),this._connection.sendIQ(s,n,r)},cancelConfigure:function(t){var n;return n=e.$iq({to:t,type:"set"}).c("query",{xmlns:e.Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"cancel"}).tree(),this._connection.sendIQ(n)},saveConfiguration:function(t,n,r,s){var o,i,a,c;if(i=e.$iq({to:t,type:"set"}).c("query",{xmlns:e.Strophe.NS.MUC_OWNER}),void 0!==e.Strophe.x&&void 0!==e.Strophe.x.Form&&n instanceof e.Strophe.x.Form)n.type="submit",i.cnode(n.toXML());else for(i.c("x",{xmlns:"jabber:x:data",type:"submit"}),o=0,a=n.length;o<a;o++)i.cnode(n[o]).up();return c=i.tree(),this._connection.sendIQ(c,r,s)},createInstantRoom:function(t,n,r){var s;return s=e.$iq({to:t,type:"set"}).c("query",{xmlns:e.Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"}),this._connection.sendIQ(s.tree(),n,r)},createConfiguredRoom:function(t,n,s,o){var i,a,c;for(i in(a=e.$iq({to:t,type:"set"}).c("query",{xmlns:e.Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"})).c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#roomconfig").up().up(),n)r.call(n,i)&&(c=n[i],a.c("field",{var:i}).c("value").t(c).up().up());return this._connection.sendIQ(a.tree(),s,o)},setTopic:function(t,n){var r;return r=e.$msg({to:t,from:this._connection.jid,type:"groupchat"}).c("subject",{xmlns:"jabber:client"}).t(n),this._connection.send(r.tree())},_modifyPrivilege:function(t,n,r,s,o){var i;return i=e.$iq({to:t,type:"set"}).c("query",{xmlns:e.Strophe.NS.MUC_ADMIN}).cnode(n.node),null!=r&&i.c("reason",r),this._connection.sendIQ(i.tree(),s,o)},modifyRole:function(t,n,r,s,o,i){var a;return a=e.$build("item",{nick:n,role:r}),this._modifyPrivilege(t,a,s,o,i)},kick:function(e,t,n,r,s){return this.modifyRole(e,t,"none",n,r,s)},voice:function(e,t,n,r,s){return this.modifyRole(e,t,"participant",n,r,s)},mute:function(e,t,n,r,s){return this.modifyRole(e,t,"visitor",n,r,s)},op:function(e,t,n,r,s){return this.modifyRole(e,t,"moderator",n,r,s)},deop:function(e,t,n,r,s){return this.modifyRole(e,t,"participant",n,r,s)},modifyAffiliation:function(t,n,r,s,o,i){var a;return a=e.$build("item",{jid:n,affiliation:r}),this._modifyPrivilege(t,a,s,o,i)},ban:function(e,t,n,r,s){return this.modifyAffiliation(e,t,"outcast",n,r,s)},member:function(e,t,n,r,s){return this.modifyAffiliation(e,t,"member",n,r,s)},revoke:function(e,t,n,r,s){return this.modifyAffiliation(e,t,"none",n,r,s)},owner:function(e,t,n,r,s){return this.modifyAffiliation(e,t,"owner",n,r,s)},admin:function(e,t,n,r,s){return this.modifyAffiliation(e,t,"admin",n,r,s)},changeNick:function(t,n){var r,s;return s=this.test_append_nick(t,n),r=e.$pres({from:this._connection.jid,to:s,id:this._connection.getUniqueId()}),this._connection.send(r.tree())},setStatus:function(t,n,r,s){var o,i;return i=this.test_append_nick(t,n),o=e.$pres({from:this._connection.jid,to:i}),null!=r&&o.c("show",r).up(),null!=s&&o.c("status",s),this._connection.send(o.tree())},registrationRequest:function(t,n,r){var s;return s=e.$iq({to:t,from:this._connection.jid,type:"get"}).c("query",{xmlns:e.Strophe.NS.MUC_REGISTER}),this._connection.sendIQ(s,function(e){var t,r,s,o,i,a;for(o={required:[],optional:[]},i=0,a=(r=e.getElementsByTagName("field")).length;i<a;i++)s={var:(t=r[i]).getAttribute("var"),label:t.getAttribute("label"),type:t.getAttribute("type")},0<t.getElementsByTagName("required").length?o.required.push(s):o.optional.push(s);return n(o)},r)},submitRegistrationForm:function(t,n,r,s){var o,i,a;for(i in(o=e.$iq({to:t,type:"set"}).c("query",{xmlns:e.Strophe.NS.MUC_REGISTER})).c("x",{xmlns:"jabber:x:data",type:"submit"}),o.c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#register").up().up(),n)a=n[i],o.c("field",{var:i}).c("value").t(a).up().up();return this._connection.sendIQ(o,r,s)},listRooms:function(t,n,r){var s;return s=e.$iq({to:t,from:this._connection.jid,type:"get"}).c("query",{xmlns:e.Strophe.NS.DISCO_ITEMS}),this._connection.sendIQ(s,n,r)},test_append_nick:function(t,n){return e.Strophe.escapeNode(e.Strophe.getNodeFromJid(t))+"@"+e.Strophe.getDomainFromJid(t)+(null!=n?"/"+n:"")}}),n=function(){function n(t,n,r,o){this.client=t,this.name=n,this.nick=r,this.password=o,this._roomRosterHandler=s(this._roomRosterHandler,this),this._addOccupant=s(this._addOccupant,this),this.roster={},this._message_handlers={},this._presence_handlers={},this._roster_handlers={},this._handler_ids=0,this.client.muc&&(this.client=this.client.muc),this.name=e.Strophe.getBareJidFromJid(this.name),this.addHandler("presence",this._roomRosterHandler)}return n.prototype.join=function(e,t,n){return this.client.join(this.name,this.nick,e,t,n,this.password)},n.prototype.leave=function(e,t){return this.client.leave(this.name,this.nick,e,t),delete this.client.rooms[this.name]},n.prototype.message=function(e,t,n,r){return this.client.message(this.name,e,t,n,r)},n.prototype.groupchat=function(e,t){return this.client.groupchat(this.name,e,t)},n.prototype.invite=function(e,t){return this.client.invite(this.name,e,t)},n.prototype.multipleInvites=function(e,t){return this.client.invite(this.name,e,t)},n.prototype.directInvite=function(e,t){return this.client.directInvite(this.name,e,t,this.password)},n.prototype.configure=function(e){return this.client.configure(this.name,e)},n.prototype.cancelConfigure=function(){return this.client.cancelConfigure(this.name)},n.prototype.saveConfiguration=function(e){return this.client.saveConfiguration(this.name,e)},n.prototype.queryOccupants=function(e,t){return this.client.queryOccupants(this.name,e,t)},n.prototype.setTopic=function(e){return this.client.setTopic(this.name,e)},n.prototype.modifyRole=function(e,t,n,r,s){return this.client.modifyRole(this.name,e,t,n,r,s)},n.prototype.kick=function(e,t,n,r){return this.client.kick(this.name,e,t,n,r)},n.prototype.voice=function(e,t,n,r){return this.client.voice(this.name,e,t,n,r)},n.prototype.mute=function(e,t,n,r){return this.client.mute(this.name,e,t,n,r)},n.prototype.op=function(e,t,n,r){return this.client.op(this.name,e,t,n,r)},n.prototype.deop=function(e,t,n,r){return this.client.deop(this.name,e,t,n,r)},n.prototype.modifyAffiliation=function(e,t,n,r,s){return this.client.modifyAffiliation(this.name,e,t,n,r,s)},n.prototype.ban=function(e,t,n,r){return this.client.ban(this.name,e,t,n,r)},n.prototype.member=function(e,t,n,r){return this.client.member(this.name,e,t,n,r)},n.prototype.revoke=function(e,t,n,r){return this.client.revoke(this.name,e,t,n,r)},n.prototype.owner=function(e,t,n,r){return this.client.owner(this.name,e,t,n,r)},n.prototype.admin=function(e,t,n,r){return this.client.admin(this.name,e,t,n,r)},n.prototype.changeNick=function(e){return this.nick=e,this.client.changeNick(this.name,nick)},n.prototype.setStatus=function(e,t){return this.client.setStatus(this.name,this.nick,e,t)},n.prototype.addHandler=function(e,t){var n;switch(n=this._handler_ids++,e){case"presence":this._presence_handlers[n]=t;break;case"message":this._message_handlers[n]=t;break;case"roster":this._roster_handlers[n]=t;break;default:return this._handler_ids--,null}return n},n.prototype.removeHandler=function(e){return delete this._presence_handlers[e],delete this._message_handlers[e],delete this._roster_handlers[e]},n.prototype._addOccupant=function(e){var n;return n=new t(e,this),this.roster[n.nick]=n},n.prototype._roomRosterHandler=function(e){var t,r,s,o,i;switch(o=(t=n._parsePresence(e)).nick,s=t.newnick||null,t.type){case"error":return!0;case"unavailable":s&&(t.nick=s,this.roster[o]&&this.roster[s]&&(this.roster[o].update(this.roster[s]),this.roster[s]=this.roster[o]),this.roster[o]&&!this.roster[s]&&(this.roster[s]=this.roster[o].update(t))),delete this.roster[o];break;default:this.roster[o]?this.roster[o].update(t):this._addOccupant(t)}for(r in i=this._roster_handlers)(0,i[r])(this.roster,this)||delete this._roster_handlers[r];return!0},n._parsePresence=function(t){var n,r,s,o,i,a,c,l,u,h;for((s={}).nick=e.Strophe.getResourceFromJid(t.getAttribute("from")),s.type=t.getAttribute("type"),s.states=[],o=0,a=(l=t.childNodes).length;o<a;o++)switch((n=l[o]).nodeName){case"error":s.errorcode=n.getAttribute("code"),s.error=null!=(u=n.childNodes[0])?u.nodeName:void 0;break;case"status":s.status=n.textContent||null;break;case"show":s.show=n.textContent||null;break;case"x":if(n.getAttribute("xmlns")===e.Strophe.NS.MUC_USER)for(i=0,c=(h=n.childNodes).length;i<c;i++)switch((r=h[i]).nodeName){case"item":s.affiliation=r.getAttribute("affiliation"),s.role=r.getAttribute("role"),s.jid=r.getAttribute("jid"),s.newnick=r.getAttribute("nick");break;case"status":r.getAttribute("code")&&s.states.push(r.getAttribute("code"))}}return s},n}(),t=function(){function e(e,t){this.room=t,this.update=s(this.update,this),this.admin=s(this.admin,this),this.owner=s(this.owner,this),this.revoke=s(this.revoke,this),this.member=s(this.member,this),this.ban=s(this.ban,this),this.modifyAffiliation=s(this.modifyAffiliation,this),this.deop=s(this.deop,this),this.op=s(this.op,this),this.mute=s(this.mute,this),this.voice=s(this.voice,this),this.kick=s(this.kick,this),this.modifyRole=s(this.modifyRole,this),this.update(e)}return e.prototype.modifyRole=function(e,t,n,r){return this.room.modifyRole(this.nick,e,t,n,r)},e.prototype.kick=function(e,t,n){return this.room.kick(this.nick,e,t,n)},e.prototype.voice=function(e,t,n){return this.room.voice(this.nick,e,t,n)},e.prototype.mute=function(e,t,n){return this.room.mute(this.nick,e,t,n)},e.prototype.op=function(e,t,n){return this.room.op(this.nick,e,t,n)},e.prototype.deop=function(e,t,n){return this.room.deop(this.nick,e,t,n)},e.prototype.modifyAffiliation=function(e,t,n,r){return this.room.modifyAffiliation(this.jid,e,t,n,r)},e.prototype.ban=function(e,t,n){return this.room.ban(this.jid,e,t,n)},e.prototype.member=function(e,t,n){return this.room.member(this.jid,e,t,n)},e.prototype.revoke=function(e,t,n){return this.room.revoke(this.jid,e,t,n)},e.prototype.owner=function(e,t,n){return this.room.owner(this.jid,e,t,n)},e.prototype.admin=function(e,t,n){return this.room.admin(this.jid,e,t,n)},e.prototype.update=function(e){return this.nick=e.nick||null,this.affiliation=e.affiliation||null,this.role=e.role||null,this.jid=e.jid||null,this.status=e.status||null,this.show=e.show||null,this},e}()}(n(15))},function(e,t,n){var r,s;r=[n(15)],void 0===(s=(function(e){var t,n,r;return n=e.$iq,r=function(e,r,s){var o=n(r?{type:e,to:r}:{type:e});return o.c("vCard",{xmlns:t.NS.VCARD}),s&&o.cnode(s),o},(t=e.Strophe).addConnectionPlugin("vcard",{_connection:null,init:function(e){return this._connection=e,t.addNamespace("VCARD","vcard-temp")},get:function(e,t,n){var s=r("get",t);return this._connection.sendIQ(s,e,n)},set:function(e,t,n,s){var o=r("set",n,t);return this._connection.sendIQ(o,e,s)}}),e}).apply(t,r))||(e.exports=s)},function(e,t,n){"use strict";t.__esModule=!0;var r=n(5),s=n(0),o=n(10),i=function(){function e(){}return e.transformVCard=function(e){var t={};return t[s.UserConstants.NAME]=unescape(o.parseHTML(e.getElementsByTagName(s.UserConstants.NAME)[0])),t[s.UserConstants.UID]=unescape(o.parseHTML(e.getElementsByTagName(s.UserConstants.UID)[0])),t[s.UserConstants.AVATAR]=unescape(o.parseHTML(e.getElementsByTagName(s.UserConstants.AVATAR)[0])),t[s.UserConstants.LINK]=unescape(o.parseHTML(e.getElementsByTagName(s.UserConstants.LINK)[0])),t[s.UserConstants.STATUS]=unescape(o.parseHTML(e.getElementsByTagName(s.UserConstants.STATUS)[0])),t[s.UserConstants.LAST_ACTIVE_AT]=unescape(o.parseHTML(e.getElementsByTagName(s.UserConstants.LAST_ACTIVE_AT)[0])),t[s.UserConstants.ROLE]=unescape(o.parseHTML(e.getElementsByTagName(s.UserConstants.ROLE)[0])),t[s.UserConstants.USER_NAME]=unescape(o.parseHTML(e.getElementsByTagName(s.UserConstants.USER_NAME)[0])),new r.User(t)},e}();t.VCardController=i},function(e,t,n){"use strict";t.__esModule=!0;var r=n(3),s=n(1),o=n(0),i=n(11),a=n(2),c=function(){function e(e){this.store=o.constants.DEFAULT_STORE,s.isFalsy(e)||(this.store=e),this.keyStore=i.createInstance({name:s.format(o.LOCAL_STORE.STORE_STRING,r.CometChat.getAppId(),o.LOCAL_STORE.KEYS_STORE)}),this.keyStore.setDriver([i.LOCALSTORAGE,i.INDEXEDDB,i.WEBSQL])}return e.getInstance=function(){return null==e.KeyStore&&(e.KeyStore=new e),e.KeyStore},e.prototype.set=function(e,t){return this.keyStore.setItem(e,t)},e.prototype.remove=function(e){this.keyStore.removeItem(e)},e.prototype.get=function(e){var t=this;return new Promise(function(n,r){try{t.keyStore.getItem(e).then(function(t){try{n(JSON.parse(t))}catch(e){n(t)}},function(e){r(e)})}catch(e){r(new a.CometChatException(e))}})},e.prototype.clearStore=function(){return this.keyStore.clear()},e}();t.KeyStore=c},function(e,t,n){"use strict";t.__esModule=!0;var r=n(4),s=n(1),o=n(2),i=n(16),a=n(0),c=function(){function e(e){this.cursor=-1,this.total=-1,this.next_page=1,this.last_page=-1,this.current_page=1,this.total_pages=-1,this.hasJoined=0,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},s.isFalsy(e)||(s.isFalsy(e.limit)||(this.limit=e.limit),s.isFalsy(e.searchKeyword)||(this.searchKeyword=e.searchKeyword),s.isFalsy(e.hasJoined)||(this.hasJoined=1))}return e.prototype.validateGroupBuilder=function(){if(void 0===this.limit)return new o.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.COMPULSORY),"SET_LIMIT","SET_LIMIT","setLimit() method")));if(isNaN(this.limit))return new o.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","group limit")));if(this.limit>a.DEFAULT_VALUES.GROUPS_MAX_LIMIT)return new o.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT","group limit",a.DEFAULT_VALUES.GROUPS_MAX_LIMIT)));if(this.limit<a.DEFAULT_VALUES.ZERO)return new o.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","group limit")));if(void 0!==this.searchKeyword){if(typeof this.searchKeyword!==a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new o.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword")));if(s.isFalsy(this.searchKeyword.trim()))return new o.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword")));this.searchKeyword=this.searchKeyword.trim()}},e.prototype.fetchPrevious=function(){var e=this;return new Promise(function(t,n){try{0==e.next_page&&t([]);var s=e.validateGroupBuilder();return s instanceof o.CometChatException?void n(s):r.makeApiCall("groups",{},e.getPreData()).then(function(n){if(n.meta&&(e.total_pages=n.meta.pagination.total_pages),0<n.data.length){e.pagination=n.meta.pagination;var r=[];n.data.map(function(e,t){r.push(i.GroupsController.trasformJSONGroup(e))}),t(r)}t([])})}catch(s){n(new o.CometChatException(s))}})},e.prototype.fetchNext=function(){var e=this;return new Promise(function(t,n){try{var s=e.validateGroupBuilder();if(s instanceof o.CometChatException)return void n(s);r.makeApiCall("getGroups",{},e.getNextData()).then(function(n){if(n.meta&&(e.total_pages=n.meta.pagination.total_pages),0<n.data.length){e.pagination=n.meta.pagination;var r=[];n.data.map(function(e,t){r.push(i.GroupsController.trasformJSONGroup(e))}),t(r)}t([])},function(e){n(new o.CometChatException(e.error))})}catch(s){n(new o.CometChatException(s))}})},e.prototype.getNextData=function(){var e={};if(e.per_page=this.limit,s.isFalsy(this.searchKeyword)||(e.searchKey=this.searchKeyword),s.isFalsy(this.hasJoined)||(e.hasJoined=1),1==this.current_page)e.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return e.page=this.next_page,e;e.page=this.next_page++}return e},e.prototype.getPreData=function(){var e={};return e.per_page=this.limit,0<=this.next_page&&0<this.next_page&&(e.page=--this.next_page),e},e.MAX_LIMIT=100,e.DEFAULT_LIMIT=30,e}();t.GroupsRequest=c;var l=function(){function e(){}return e.prototype.setLimit=function(e){return this.limit=e,this},e.prototype.setSearchKeyword=function(e){return this.searchKeyword=e,this},e.prototype.joinedOnly=function(e){return this.hasJoined=e,this},e.prototype.build=function(){return new c(this)},e}();t.GroupsRequestBuilder=l},function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var o=n(4),i=n(1),a=n(9),c=n(2),l=n(51),u=n(0),h=function(){function e(e){this.cursor=-1,this.total=-1,this.next_page=1,this.last_page=-1,this.current_page=1,this.total_pages=-1,this.isOutCastReq=!1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},this.store=a.LocalStorage.getInstance(),i.isFalsy(e)||(this.limit=e.limit,this.guid=e.guid,i.isFalsy(e.searchKeyword)||(this.searchKeyword=e.searchKeyword),e instanceof p&&(this.isOutCastReq=e.isOutCastReq))}return e.prototype.validateGroupMembersBuilder=function(){if(void 0===this.limit)return new c.CometChatException(JSON.parse(i.format(JSON.stringify(u.GENERAL_ERROR.COMPULSORY),"SET_LIMIT","SET_LIMIT","setLimit() method")));if(isNaN(this.limit))return new c.CometChatException(JSON.parse(i.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","group member limit")));if(this.limit>u.DEFAULT_VALUES.USERS_MAX_LIMIT)return new c.CometChatException(JSON.parse(i.format(JSON.stringify(u.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT","group member limit",u.DEFAULT_VALUES.USERS_MAX_LIMIT)));if(this.limit<u.DEFAULT_VALUES.ZERO)return new c.CometChatException(JSON.parse(i.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","group member limit")));if(void 0!==this.searchKeyword){if(typeof this.searchKeyword!==u.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new c.CometChatException(JSON.parse(i.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword")));if(i.isFalsy(this.searchKeyword.trim()))return new c.CometChatException(JSON.parse(i.format(JSON.stringify(u.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword")));this.searchKeyword=this.searchKeyword.trim()}if(void 0!==this.guid){if(typeof this.guid!==u.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new c.CometChatException(JSON.parse(i.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","guid")));if(i.isFalsy(this.guid))return new c.CometChatException(JSON.parse(i.format(JSON.stringify(u.GENERAL_ERROR.INVALID),"GUID","GUID","guid")))}},e.prototype.fetchPrevious=function(){var e=this;return new Promise(function(t,n){try{0==e.next_page&&t([]);var r=e.validateGroupMembersBuilder();return r instanceof c.CometChatException?void n(r):o.makeApiCall(e.isOutCastReq?"getBannedGroupMembers":"getGroupMembers",{guid:e.guid},e.getPreData()).then(function(n){if(n.meta&&(e.total_pages=n.meta.pagination.total_pages),0<n.data.length){e.pagination=n.meta.pagination;var r=[];n.data.map(function(t){t.guid=e.guid,r.push(l.GroupMembersController.trasformJSONGroupMember(t))}),t(r)}t([])},function(e){n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},e.prototype.fetchNext=function(){var e=this;return new Promise(function(t,n){try{var r=e.validateGroupMembersBuilder();if(r instanceof c.CometChatException)return void n(r);o.makeApiCall(e.isOutCastReq?"getBannedGroupMembers":"getGroupMembers",{guid:e.guid},e.getNextData()).then(function(n){if(n.meta&&(e.total_pages=n.meta.pagination.total_pages),0<n.data.length){e.pagination=n.meta.pagination;var r=[];n.data.map(function(t){t.guid=e.guid,r.push(l.GroupMembersController.trasformJSONGroupMember(t))}),t(r)}else t([])},function(e){n(new c.CometChatException(e.error))})}catch(r){n(new c.CometChatException(r))}})},e.prototype.getNextData=function(){var e={};if(e.per_page=this.limit,i.isFalsy(this.searchKeyword)||(e.searchKey=this.searchKeyword),1==this.current_page)e.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return e.page=this.next_page,e;e.page=++this.next_page}return e},e.prototype.getPreData=function(){var e={};return e.per_page=this.limit,0<=this.next_page&&0<this.next_page&&(e.page=--this.next_page),e},e.MAX_LIMIT=2,e.DEFAULT_LIMIT=1,e}();t.GroupMembersRequest=h;var d=function(){function e(e){this.guid=e}return e.prototype.setLimit=function(e){return this.limit=e,this},e.prototype.setSearchKeyword=function(e){return this.searchKeyword=e,this},e.prototype.build=function(){return new h(this)},e}(),p=function(e){function t(t){var n=e.call(this,t)||this;return n.isOutCastReq=!0,n}return s(t,e),t.prototype.build=function(){return new h(this)},t}(t.GroupMembersRequestBuilder=d);t.GroupOutCastMembersRequestBuilder=p},function(e,t,n){"use strict";t.__esModule=!0;var r=n(35),s=n(0),o=n(1),i=function(){function e(){}return e.trasformJSONGroupMember=function(e){var t;try{return t=new r.GroupMember(e[s.GroupMemersConstans.KEYS.UID]),Object.assign(t,e),t}catch(t){return o.Logger.error("GroupMembersController:trasformJSONGroupMember",{e:t,groupMember:e}),e}},e}();t.GroupMembersController=i},function(e,t,n){"use strict";t.__esModule=!0;var r=n(4),s=n(1),o=n(8),i=n(2),a=n(34),c=n(0),l=n(3),u=function(){function e(t){this.next_page=1,this.current_page=1,this.total_pages=-1,this.hideBlockedUsers=!1,this.friendsOnly=!1,this.fetchingInProgress=!1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},e.userStore=a.UserStore.getInstance(),s.isFalsy(t)||(this.limit=t.limit,s.isFalsy(t.searchKeyword)||(this.searchKeyword=t.searchKeyword),s.isFalsy(t.status)||(this.status=t.status==e.USER_STATUS.ONLINE?c.PresenceConstatnts.STATUS.AVAILABLE:t.status),s.isFalsy(t.shouldHideBlockedUsers)||(this.hideBlockedUsers=t.shouldHideBlockedUsers),s.isFalsy(t.showFriendsOnly)||(this.friendsOnly=t.showFriendsOnly),s.isFalsy(t.role)||(this.role=t.role))}return e.prototype.validateUserBuilder=function(){if(void 0===this.limit)return new i.CometChatException(JSON.parse(s.format(JSON.stringify(c.GENERAL_ERROR.COMPULSORY),"SET_LIMIT","SET_LIMIT","setLimit() method")));if(isNaN(this.limit))return new i.CometChatException(JSON.parse(s.format(JSON.stringify(c.GENERAL_ERROR.MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","user limit")));if(this.limit>c.DEFAULT_VALUES.USERS_MAX_LIMIT)return new i.CometChatException(JSON.parse(s.format(JSON.stringify(c.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT","user limit",c.DEFAULT_VALUES.USERS_MAX_LIMIT)));if(this.limit<c.DEFAULT_VALUES.ZERO)return new i.CometChatException(JSON.parse(s.format(JSON.stringify(c.GENERAL_ERROR.MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","user limit")));if(void 0!==this.searchKeyword){if(typeof this.searchKeyword!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(s.format(JSON.stringify(c.GENERAL_ERROR.MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword")));if(s.isFalsy(this.searchKeyword.trim()))return new i.CometChatException(JSON.parse(s.format(JSON.stringify(c.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword")));this.searchKeyword=this.searchKeyword.trim()}if(this.status){if(typeof this.status!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(s.format(JSON.stringify(c.GENERAL_ERROR.MUST_BE_A_STRING),"SET_STATUS","SET_STATUS","status")));if("available"!=this.status.toLowerCase()&&"offline"!=this.status.toLowerCase())return new i.CometChatException(c.UserErrors.INVALID_STATUS)}if(void 0!==this.hideBlockedUsers){if(typeof this.hideBlockedUsers!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return new i.CometChatException(JSON.parse(s.format(JSON.stringify(c.GENERAL_ERROR.MUST_BE_A_BOOLEAN),"HIDE_BLOCKED_USERS","HIDE_BLOCKED_USERS","hideBlockedUsers")));this.hideBlockedUsers=1==this.hideBlockedUsers}if(void 0!==this.friendsOnly){if(typeof this.friendsOnly!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return new i.CometChatException(JSON.parse(s.format(JSON.stringify(c.GENERAL_ERROR.MUST_BE_A_BOOLEAN),"FRIENDS_ONLY","FRIENDS_ONLY","friendsOnly")));this.friendsOnly=1==this.friendsOnly}},e.prototype.fetchPrevious=function(){var t=this;return this.fetchingInProgress=!0,new Promise(function(n,s){try{0==t.next_page&&(n([]),t.fetchingInProgress=!1);var a=t.validateUserBuilder();if(a instanceof i.CometChatException)return void s(a);if(!t.fetchingInProgress)return r.makeApiCall("users",{},t.getPreData()).then(function(r){if(r.meta&&(t.total_pages=r.meta.pagination.total_pages),0<r.data.length){t.pagination=r.meta.pagination;var s=[];r.data.map(function(e,t){s.push(o.UsersController.trasformJSONUser(e))}),e.userStore.storeUsers(s),n(s),t.fetchingInProgress=!1}n([]),t.fetchingInProgress=!1},function(e){s(new i.CometChatException(e.error)),t.fetchingInProgress=!1});n([])}catch(a){t.fetchingInProgress=!1,s(new i.CometChatException(a))}})},e.prototype.fetchNext=function(){var e=this;return new Promise(function(t,n){try{if(e.fetchingInProgress)e.fetchingInProgress=!1,t([]);else{e.fetchingInProgress=!0;var a=e.validateUserBuilder();if(a instanceof i.CometChatException)return void n(a);r.makeApiCall("users",{},e.getNextData()).then(function(n){if(n.meta&&(e.total_pages=n.meta.pagination.total_pages),0<n.data.length){e.pagination=n.meta.pagination;var r=[],i=[];n.data.map(function(e){r.push(o.UsersController.trasformJSONUser(e)),i.push(s.format(c.XMPP.username_string,l.CometChat.getAppId(),e[c.UserConstants.UID]))}),t(r)}else t([]);e.fetchingInProgress=!1},function(t){e.fetchingInProgress=!1,n(new i.CometChatException(t.error))})}}catch(a){e.fetchingInProgress=!1,n(new i.CometChatException(a))}})},e.prototype.getNextData=function(){var e={};if(e.per_page=this.limit,s.isFalsy(this.searchKeyword)||(e.searchKey=this.searchKeyword),s.isFalsy(this.status)||(e.status=this.status),s.isFalsy(this.hideBlockedUsers)||(e.hideBlockedUsers=1),s.isFalsy(this.role)||(e.role=this.role),s.isFalsy(this.friendsOnly)||(e.friendsOnly=1),1==this.current_page)e.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return e.page=this.next_page,e;e.page=this.next_page++}return e},e.prototype.getPreData=function(){var e={};return e.per_page=this.limit,0<=this.next_page&&0<this.next_page&&(e.page=--this.next_page),e},e.USER_STATUS={ONLINE:c.PresenceConstatnts.STATUS.ONLINE,OFFLINE:c.PresenceConstatnts.STATUS.OFFLINE},e}();t.UsersRequest=u;var h=function(){function e(){this.shouldHideBlockedUsers=!1}return e.prototype.setLimit=function(e){return this.limit=e,this},e.prototype.setStatus=function(e){return this.status=e,this},e.prototype.setSearchKeyword=function(e){return this.searchKeyword=e,this},e.prototype.hideBlockedUsers=function(e){return this.shouldHideBlockedUsers=e,this},e.prototype.setRole=function(e){return this.role=e,this},e.prototype.friendsOnly=function(e){return this.showFriendsOnly=e,this},e.prototype.build=function(){return new u(this)},e}();t.UsersRequestBuilder=h},function(e,t,n){"use strict";t.__esModule=!0;var r=n(4),s=n(1),o=n(2),i=n(36),a=n(0),c=function(){function e(e){this.limit=100,this.next_page=1,this.current_page=1,this.total_pages=-1,this.fetchingInProgress=!1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},s.isFalsy(e)||(this.limit=e.limit,s.isFalsy(e.conversationType)||(this.conversationType=e.conversationType))}return e.prototype.validateConversationBuilder=function(){return void 0===this.limit?new o.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.COMPULSORY),"SET_LIMIT","SET_LIMIT","setLimit() method"))):isNaN(this.limit)?new o.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","conversation limit"))):this.limit>a.DEFAULT_VALUES.CONVERSATION_MAX_LIMIT?new o.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT","conversation limit",a.DEFAULT_VALUES.CONVERSATION_MAX_LIMIT))):this.limit<a.DEFAULT_VALUES.ZERO?new o.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","conversation limit"))):void 0},e.prototype.fetchNext=function(){var e=this;return new Promise(function(t,n){try{if(e.fetchingInProgress)e.fetchingInProgress=!1,t([]);else{e.fetchingInProgress=!0;var s=e.validateConversationBuilder();if(s instanceof o.CometChatException)return void n(s);r.makeApiCall("getConversations",{},e.getNextData()).then(function(n){if(n.meta&&(e.total_pages=n.meta.pagination.total_pages),0<n.data.length){e.pagination=n.meta.pagination;var r=[];n.data.map(function(e){r.push(i.ConversationController.trasformJSONConversation(e.conversationId,e.conversationType,e.lastMessage,e.conversationWith,e.unreadMessageCount))}),t(r)}else t([]);e.fetchingInProgress=!1},function(t){e.fetchingInProgress=!1,n(new o.CometChatException(t.error))})}}catch(s){e.fetchingInProgress=!1,n(new o.CometChatException(s))}})},e.prototype.getNextData=function(){var e={};if(e.per_page=this.limit,s.isFalsy(this.conversationType)||(e.conversationType=this.conversationType),1==this.current_page)e.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return e.page=this.next_page,e;e.page=this.next_page++}return e},e}();t.ConversationsRequest=c;var l=function(){function e(){}return e.prototype.setLimit=function(e){return this.limit=e,this},e.prototype.setConversationType=function(e){return this.conversationType=e,this},e.prototype.build=function(){return new c(this)},e}();t.ConversationsRequestBuilder=l},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(i,a)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=0<(s=i.trys).length&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(a){o=[6,a],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};t.__esModule=!0;var o=n(2),i=n(4),a=n(7),c=n(1),l=n(21),u=n(0),h=n(14),d=n(3),p=n(13),f=n(10),g=n(24),E=n(25),m=function(){function e(e){this.limit=u.DEFAULT_VALUES.MSGS_LIMIT,this.timestamp=0,this.id=u.DEFAULT_VALUES.DEFAULT_MSG_ID,this.messageStore=l.MessagesStore.getInstance(),this.endpointName="getUserMessages",this.listId="",this.totalPages=0,this.unread=!1,this.undelivered=!1,this.inProgress=!1,this.hideMessagesFromBlockedUsers=!1,this.updatedAt=0,this.onlyUpdates=0,this.paginationMeta={},this.limit=e.limit,this.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.PER_PAGE]=this.limit,this.uid=e.uid,this.uid&&(this.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.UID]=this.uid),this.guid=e.guid,this.timestamp=e.timestamp,this.timestamp&&(this.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.SENT_AT]=this.timestamp),this.id=e.id,this.id!=u.DEFAULT_VALUES.DEFAULT_MSG_ID&&(this.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.ID]=this.id),this.hideMessagesFromBlockedUsers=e.HideMessagesFromBlockedUsers,this.hideMessagesFromBlockedUsers&&(this.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.HIDE_MESSAGES_FROM_BLOCKED_USER]=this.hideMessagesFromBlockedUsers),this.unread=e.unread,this.unread&&(this.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.UNREAD]=this.unread),this.undelivered=e.undelivered,this.undelivered&&(this.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.UNDELIVERED]=this.undelivered),e.searchKey&&(this.searchKey=e.searchKey,this.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.SEARCH_KEY]=this.searchKey),e.onlyUpdate&&(this.onlyUpdates=e.onlyUpdate,this.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.ONLY_UPDATES]=this.onlyUpdates),e.updatedAt&&(this.updatedAt=e.updatedAt,this.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.UPDATED_AT]=this.updatedAt),e.category&&(this.category=e.category,this.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.CATEGORY]=this.category),e.type&&(this.type=e.type,this.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.TYPE]=this.type)}return e.prototype.fetchNext=function(){var e=this;return new Promise(function(t,n){return r(e,void 0,void 0,function(){var e,r,i,a;return s(this,function(s){switch(s.label){case 0:if(s.trys.push([0,6,,7]),this.inProgress)return this.inProgress=!1,n(new o.CometChatException(h.MESSAGES_REQUEST_ERRORS.REQUEST_IN_PROGRESS_ERROR)),[2];if(this.inProgress=!0,this.onlyUpdates){if(0==this.updatedAt)return this.inProgress=!1,n(new o.CometChatException(h.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)),[2]}else if(0==this.timestamp&&0==this.id&&0==this.updatedAt)return this.inProgress=!1,n(new o.CometChatException(h.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)),[2];this.affix=u.MessageConstatnts.PAGINATION.AFFIX.APPEND,this.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.AFFIX]=this.affix,this.currentMethod=u.MessageConstatnts.PAGINATION.AFFIX.APPEND,s.label=1;case 1:return s.trys.push([1,4,,5]),[4,this.makeAPICall()];case 2:return e=s.sent(),[4,E.ExtensionController.hookOnMessageListIsFetched(e)];case 3:return r=s.sent(),t(r),this.inProgress=!1,[3,5];case 4:return i=s.sent(),this.inProgress=!1,n(new o.CometChatException(i)),[3,5];case 5:return[3,7];case 6:return a=s.sent(),this.inProgress=!1,n(new o.CometChatException(a)),[3,7];case 7:return[2]}})})})},e.prototype.fetchPrevious=function(){var e=this;return new Promise(function(t,n){return r(e,void 0,void 0,function(){var e,r,i,a;return s(this,function(s){switch(s.label){case 0:if(s.trys.push([0,6,,7]),this.inProgress)return n(new o.CometChatException(h.MESSAGES_REQUEST_ERRORS.REQUEST_IN_PROGRESS_ERROR)),this.inProgress=!1,[2];if(this.inProgress=!0,this.onlyUpdates&&0==this.updatedAt)return this.inProgress=!1,n(new o.CometChatException(h.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)),[2];this.affix=u.MessageConstatnts.PAGINATION.AFFIX.PREPEND,this.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.AFFIX]=this.affix,this.currentMethod=u.MessageConstatnts.PAGINATION.AFFIX.PREPEND,s.label=1;case 1:return s.trys.push([1,4,,5]),[4,this.makeAPICall()];case 2:return e=s.sent(),[4,E.ExtensionController.hookOnMessageListIsFetched(e)];case 3:return r=s.sent(),t(r),this.inProgress=!1,[3,5];case 4:return i=s.sent(),this.inProgress=!1,n(new o.CometChatException(i)),[3,5];case 5:return[3,7];case 6:return a=s.sent(),this.inProgress=!1,n(new o.CometChatException(a)),[3,7];case 7:return[2]}})})})},e.prototype.makeAPICall=function(){var e=this;return new Promise(function(t,n){try{var r=e.uid;if(void 0!==r){if(typeof r!==u.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_STRING),"UID","UID","uid"))));if(c.isFalsy(r.trim()))return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.INVALID),"UID","UID","uid"))));e.uid=r.trim()}var s=e.guid;if(void 0!==s){if(typeof s!==u.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","guid"))));if(c.isFalsy(s.trim()))return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.INVALID),"GUID","GUID","guid"))));e.guid=s.trim()}var l=e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.PER_PAGE];if(void 0===l)return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.COMPULSORY),"SET_LIMIT","SET_LIMIT","setLimit() method"))));if(isNaN(l))return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","message limit"))));if(l>u.DEFAULT_VALUES.MSGS_MAX_LIMIT)return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT","message limit",u.DEFAULT_VALUES.MSGS_MAX_LIMIT))));if(l<u.DEFAULT_VALUES.ZERO)return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","message limit"))));var h=e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.SEARCH_KEY];if(void 0!==h){if(typeof h!==u.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword"))));if(c.isFalsy(h.trim()))return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword"))));e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.SEARCH_KEY]=h.trim()}var E=e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.ID];if(void 0!==E){if(isNaN(E))return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_NUMBER),"MESSAGE_ID","MESSAGE_ID","messsage id"))));if(E<u.DEFAULT_VALUES.ZERO)return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.INVALID),"MESSAGE_ID","MESSAGE_ID","messsage id"))))}var m=e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.SENT_AT];if(void 0!==m){if(isNaN(m))return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_NUMBER),"TIMESTAMP","TIMESTAMP","timestamp"))));if(m<u.DEFAULT_VALUES.ZERO)return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.INVALID),"TIMESTAMP","TIMESTAMP","timestamp"))))}var _=e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.HIDE_MESSAGES_FROM_BLOCKED_USER];if(void 0!==_){if(typeof _!==u.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_BOOLEAN),"HIDE_MESSAGES_FROM_BLOCKED_USERS","HIDE_MESSAGES_FROM_BLOCKED_USERS","Hide Messages From Blocked Users"))));e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.HIDE_MESSAGES_FROM_BLOCKED_USER]=1==_?1:0}var C=e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.UNREAD];if(void 0!==C){if(typeof C!==u.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_BOOLEAN),"UNREAD","UNREAD","unread"))));e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.UNREAD]=1==C?1:0}var S=e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.UNDELIVERED];if(void 0!==S){if(typeof S!==u.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_BOOLEAN),"UNDELIVERED","UNDELIVERED","undelivered"))));e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.UNDELIVERED]=1==S?1:0}var T=e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.CATEGORY];if(void 0!==T){if(typeof T!==u.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_STRING),"SET_CATEGORY","SET_CATEGORY","category"))));if(c.isFalsy(T.trim()))return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.INVALID),"SET_CATEGORY","SET_CATEGORY","category"))));e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.CATEGORY]=T.trim()}var y=e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.TYPE];if(void 0!==y){if(typeof y!==u.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.MUST_BE_A_STRING),"SET_TYPE","SET_TYPE","type"))));if(c.isFalsy(y.trim()))return void n(new o.CometChatException(JSON.parse(c.format(JSON.stringify(u.GENERAL_ERROR.INVALID),"SET_TYPE","SET_TYPE","type"))));e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.TYPE]=y.trim()}if(e.createEndpoint(),e.totalPages)if(1!=e.totalPages);else if(e.lastAffix==e.affix)return void t([]);i.makeApiCall(e.endpointName,{listId:e.listId},e.paginationMeta).then(function(n){var r=[];if(n[u.ResponseConstants.RESPONSE_KEYS.KEY_META][u.ResponseConstants.RESPONSE_KEYS.KEY_CURSOR].hasOwnProperty(u.MessageConstatnts.PAGINATION.KEYS.ID)&&0==e.id&&(e.id=n.meta.cursor[u.MessageConstatnts.PAGINATION.KEYS.ID]),n[u.ResponseConstants.RESPONSE_KEYS.KEY_META][u.ResponseConstants.RESPONSE_KEYS.KEY_CURSOR].hasOwnProperty(u.MessageConstatnts.PAGINATION.KEYS.SENT_AT)&&0==e.timestamp&&(e.timestamp=n.meta.cursor[u.MessageConstatnts.PAGINATION.KEYS.SENT_AT]),n.meta.pagination.hasOwnProperty("total_pages")&&(e.totalPages=n.meta.pagination.total_pages),n.meta.cursor.hasOwnProperty("affix")&&(e.lastAffix=n.meta.cursor.affix),n.data[0]){0<e.id&&(e.id=n.data[0].id),0<e.timestamp&&(e.timestamp=n.data[0].sentAt);var s=n.data[n.data.length-1];if(s.sender.toLowerCase()!=f.getUidFromJid(p.XMPPConnectionHelper.getInstance().connection.jid).toLowerCase()&&(void 0!==e.guid||void 0!==e.uid)&&void 0!==s){var o=s.receiverType;if(o==u.MessageConstatnts.RECEIVER_TYPE.USER){var i=s.receiver,l=s.id;f.getJidFromUid(s.sender).then(function(e){var t=$msg({to:e,from:p.XMPPConnectionHelper.getInstance().connection.jid,id:p.XMPPConnectionHelper.getInstance().connection.getUniqueId(),type:u.MessageConstatnts.XMPP_KEYS.TYPE_USER}),n=Strophe.xmlElement("delivered",{type:o,receiverId:i,xmlns:"urn:xmpp:receipts",id:"["+d.CometChat.getAppId()+"]"+l});t.tree().appendChild(n),p.XMPPConnectionHelper.getInstance().connection.send(t)})}else{var h=s.receiver;E=s.id,f.getGroupJidFromGUID(h).then(function(e){var t=$msg({to:e,from:p.XMPPConnectionHelper.getInstance().connection.jid,id:p.XMPPConnectionHelper.getInstance().connection.getUniqueId(),type:u.MessageConstatnts.XMPP_KEYS.TYPE_GROUP}),n=Strophe.xmlElement("delivered",{type:o,receiverId:h,xmlns:"urn:xmpp:receipts",id:"["+d.CometChat.getAppId()+"]"+E});t.tree().appendChild(n),p.XMPPConnectionHelper.getInstance().connection.send(t)})}}n.data.map(function(t){if(t.sender.toLowerCase()!=f.getUidFromJid(p.XMPPConnectionHelper.getInstance().connection.jid).toLowerCase()&&void 0===e.guid&&void 0===e.uid)if(t.receiverType==u.MessageConstatnts.RECEIVER_TYPE.USER){if(c.isFalsy(t.deliveredAt)){var n=s.receiver,o=s.id,i=u.MessageConstatnts.XMPP_KEYS.TYPE_USER;f.getJidFromUid(s.sender).then(function(e){var t=$msg({to:e,from:p.XMPPConnectionHelper.getInstance().connection.jid,id:p.XMPPConnectionHelper.getInstance().connection.getUniqueId(),type:i}),r=Strophe.xmlElement("delivered",{type:i,receiverId:n,xmlns:"urn:xmpp:receipts",id:"["+d.CometChat.getAppId()+"]"+o});t.tree().appendChild(r),p.XMPPConnectionHelper.getInstance().connection.send(t)})}}else if(c.isFalsy(t.myReceipt)){var l=t.receiver,h=s.id,E=u.MessageConstatnts.XMPP_KEYS.TYPE_GROUP;f.getGroupJidFromGUID(l).then(function(e){var t=$msg({to:e,from:p.XMPPConnectionHelper.getInstance().connection.jid,id:p.XMPPConnectionHelper.getInstance().connection.getUniqueId(),type:E}),n=Strophe.xmlElement("delivered",{type:E,receiverId:l,xmlns:"urn:xmpp:receipts",id:"["+d.CometChat.getAppId()+"]"+h});t.tree().appendChild(n),p.XMPPConnectionHelper.getInstance().connection.send(t)})}g.MessageListnerMaping.getInstance().get("all").then(function(e){t.id>e&&g.MessageListnerMaping.getInstance().set("all",t.id)},function(e){g.MessageListnerMaping.getInstance().set("all",t.id)}),e.affix==u.MessageConstatnts.PAGINATION.AFFIX.APPEND?(e.id<t.id&&0<e.id&&(e.id=t.id),e.timestamp<t.sentAt&&0<e.timestamp&&(e.timestamp=t.sentAt),e.updatedAt<t.updatedAt&&0<e.updatedAt&&(e.updatedAt=t.updatedAt)):(e.id>t.id&&(e.id=t.id),e.timestamp>t.sentAt&&(e.timestamp=t.sentAt),e.updatedAt>t.updatedAt&&(e.updatedAt=t.updatedAt)),e.id&&(e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.ID]=e.id),e.timestamp&&(e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.SENT_AT]=e.timestamp),e.updatedAt&&(e.paginationMeta[u.MessageConstatnts.PAGINATION.KEYS.UPDATED_AT]=e.updatedAt),r.push(a.MessageController.trasformJSONMessge(t))})}else r=[];t(r)},function(e){n(new o.CometChatException(e))})}catch(r){n(new o.CometChatException(r))}})},e.prototype.createEndpoint=function(){(c.isFalsy(this.guid)||c.isFalsy(this.uid))&&c.isFalsy(this.guid)?(this.endpointName=c.isFalsy(this.uid)?"getMessages":"getUserMessages",this.listId=this.uid):(this.endpointName="getGroupMessages",this.listId=this.guid)},e.prototype.makeData=function(){var e={};e[u.MessageConstatnts.PAGINATION.KEYS.PER_PAGE]=this.limit,e[u.MessageConstatnts.PAGINATION.KEYS.AFFIX]=this.affix,(c.isFalsy(this.guid)||c.isFalsy(this.uid))&&c.isFalsy(this.guid)&&c.isFalsy(this.uid)},e.prototype.getFilteredPreviousDataByReceiverId=function(e){return r(this,void 0,void 0,function(){var t,n=this;return s(this,function(r){switch(r.label){case 0:switch(t=[],e){case"user":return[3,1];case"group":return[3,3];case"both":return[3,5]}return[3,7];case 1:return[4,l.MessagesStore.getInstance().get(this.uid).then(function(e){Object.keys(e).filter(function(e){return parseInt(e)>n.id}).map(function(n){t=t.concat([e[n]])})})];case 2:return r.sent(),[3,9];case 3:return[4,l.MessagesStore.getInstance().get(this.guid).then(function(e){Object.keys(e).filter(function(e){return parseInt(e)>n.id}).map(function(n){t=t.concat([e[n]])})})];case 4:r.sent(),r.label=5;case 5:return[4,l.MessagesStore.getInstance().get(this.guid).then(function(e){Object.keys(e).filter(function(e){return parseInt(e)>n.id}).filter(function(t){return e[t].sender.uid==n.uid}).map(function(n){t=t.concat([e[n]])})})];case 6:return r.sent(),[3,9];case 7:return[4,l.MessagesStore.getInstance().getAllMessages().then(function(e){Object.keys(e).filter(function(e){return parseInt(e)>n.id}).map(function(n){t=t.concat([e[n]])})})];case 8:return r.sent(),[3,9];case 9:return[2,t]}})})},e.prototype.getFilteredNextDataByReceiverId=function(e){return r(this,void 0,void 0,function(){var t,n=this;return s(this,function(r){switch(r.label){case 0:switch(t=[],e){case"user":return[3,1];case"group":return[3,3];case"both":return[3,5]}return[3,7];case 1:return[4,l.MessagesStore.getInstance().get(this.uid).then(function(e){Object.keys(e).filter(function(e){return parseInt(e)>n.id}).map(function(n){t=t.concat([e[n]])})})];case 2:return r.sent(),[3,9];case 3:return[4,l.MessagesStore.getInstance().get(this.guid).then(function(e){Object.keys(e).filter(function(e){return parseInt(e)>n.id}).map(function(n){t=t.concat([e[n]])})})];case 4:r.sent(),r.label=5;case 5:return[4,l.MessagesStore.getInstance().get(this.guid).then(function(e){Object.keys(e).filter(function(e){return parseInt(e)>n.id}).filter(function(t){return e[t].sender.uid==n.uid}).map(function(n){t=t.concat([e[n]])})})];case 6:return r.sent(),[3,9];case 7:return[4,l.MessagesStore.getInstance().getAllMessages().then(function(e){Object.keys(e).filter(function(e){return parseInt(e)>n.id}).map(function(n){t=t.concat([e[n]])})})];case 8:return r.sent(),[3,9];case 9:return[2,t]}})})},e}();t.DefaultMessagesRequest=m;var _=function(){function e(){this.maxLimit=u.DEFAULT_VALUES.MSGS_MAX_LIMIT,this.timestamp=0,this.id=u.DEFAULT_VALUES.DEFAULT_MSG_ID,this.unread=!1,this.undelivered=!1,this.HideMessagesFromBlockedUsers=!1,this.onlyUpdate=0}return e.prototype.setLimit=function(e){return this.limit=e,this},e.prototype.setGUID=function(e){return this.guid=e,this},e.prototype.setUID=function(e){return this.uid=e,this},e.prototype.setTimestamp=function(e){return void 0===e&&(e=c.getCurrentTime()),this.timestamp=e,this},e.prototype.setMessageId=function(e){return void 0===e&&(e=u.DEFAULT_VALUES.DEFAULT_MSG_ID),this.id=e,this},e.prototype.setUnread=function(e){return void 0===e&&(e=!1),this.unread=e,this},e.prototype.setUndelivered=function(e){return void 0===e&&(e=!1),this.undelivered=e,this},e.prototype.hideMessagesFromBlockedUsers=function(e){return void 0===e&&(e=!1),this.HideMessagesFromBlockedUsers=e,this},e.prototype.setSearchKeyword=function(e){return this.searchKey=e,this},e.prototype.setUpdatedAfter=function(e){return this.updatedAt=e,this},e.prototype.updatesOnly=function(e){return e&&(this.onlyUpdate=1),this},e.prototype.setCategory=function(e){return this.category=e,this},e.prototype.setType=function(e){return this.type=e,this},e.prototype.build=function(){return new m(this)},e}();t.DefaultMessagesRequestBuilder=_},function(e,t,n){"use strict";t.__esModule=!0,t.CometChatExtension=function(e){}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(4),s=n(1),o=n(8),i=n(2),a=n(0),c=function(){function e(e){this.next_page=1,this.current_page=1,this.total_pages=-1,this.fetchingInProgress=!1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},s.isFalsy(e)||(this.limit=e.limit,s.isFalsy(e.searchKeyword)||(this.searchKeyword=e.searchKeyword),s.isFalsy(e.direction)||(this.direction=e.direction))}return e.prototype.validateBlockedUsersBuilder=function(){if(void 0===this.limit)return new i.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.COMPULSORY),"SET_LIMIT","SET_LIMIT","setLimit() method")));if(isNaN(this.limit))return new i.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","user limit")));if(this.limit>a.DEFAULT_VALUES.USERS_MAX_LIMIT)return new i.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT","user limit",a.DEFAULT_VALUES.USERS_MAX_LIMIT)));if(this.limit<a.DEFAULT_VALUES.ZERO)return new i.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","user limit")));if(void 0!==this.searchKeyword){if(typeof this.searchKeyword!==a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword")));if(s.isFalsy(this.searchKeyword.trim()))return new i.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword")));this.searchKeyword=this.searchKeyword.trim()}if(void 0!==this.direction){if(typeof this.direction!==a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(s.format(JSON.stringify(a.GENERAL_ERROR.MUST_BE_A_STRING),"SET_DIRECTION","SET_DIRECTION","set direction")));if(this.direction!=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.BOTH&&this.direction!=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.BLOCKED_BY_ME&&this.direction!=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.HAS_BLOCKED_ME)return new i.CometChatException(a.UserErrors.INVALID_DIRECTION)}},e.prototype.fetchPrevious=function(){var e=this;return this.fetchingInProgress=!0,new Promise(function(t,n){try{0==e.next_page&&(t([]),e.fetchingInProgress=!1);var s=e.validateBlockedUsersBuilder();if(s instanceof i.CometChatException)return void n(s);if(!e.fetchingInProgress)return r.makeApiCall("blockedUsersList",{},e.getPreData()).then(function(n){if(n.meta&&(e.total_pages=n.meta.pagination.total_pages),0<n.data.length){e.pagination=n.meta.pagination;var r=[];n.data.map(function(e,t){r.push(o.UsersController.trasformJSONUser(e))}),t(r),e.fetchingInProgress=!1}t([]),e.fetchingInProgress=!1},function(t){n(new i.CometChatException(t.error)),e.fetchingInProgress=!1});t([])}catch(s){n(new i.CometChatException(s)),e.fetchingInProgress=!1}})},e.prototype.fetchNext=function(){var e=this;return new Promise(function(t,n){try{var s=e.validateBlockedUsersBuilder();if(s instanceof i.CometChatException)return void n(s);e.fetchingInProgress?(e.fetchingInProgress=!1,t([])):(e.fetchingInProgress=!0,r.makeApiCall("blockedUsersList",{},e.getNextData()).then(function(n){if(n.meta&&(e.total_pages=n.meta.pagination.total_pages),0<n.data.length){e.pagination=n.meta.pagination;var r=[];n.data.map(function(e){r.push(o.UsersController.trasformJSONUser(e))}),t(r)}else t([])},function(t){e.fetchingInProgress=!1,n(new i.CometChatException(t.error))}))}catch(s){e.fetchingInProgress=!1,n(new i.CometChatException(s))}})},e.prototype.getNextData=function(){var e={};if(s.isFalsy(this.direction)||(e.direction=this.direction),s.isFalsy(this.searchKeyword)||(e.searchKey=this.searchKeyword),e.per_page=this.limit,0==this.current_page)e.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return e.page=this.next_page,e;e.page=++this.next_page}return e},e.prototype.getPreData=function(){var e={};return e.per_page=this.limit,0<=this.next_page&&0<this.next_page&&(e.page=--this.next_page),e},e.MAX_LIMIT=2,e.DEFAULT_LIMIT=1,e.directions=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS,e}();t.BlockedUsersRequest=c;var l=function(){function e(){}return e.prototype.setLimit=function(e){return this.limit=e,this},e.prototype.setSearchKeyword=function(e){return this.searchKeyword=e,this},e.prototype.setDirection=function(e){return this.direction=e,this},e.prototype.blockedByMe=function(){return this.direction=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.BLOCKED_BY_ME,this},e.prototype.hasBlockedMe=function(){return this.direction=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.HAS_BLOCKED_ME,this},e.prototype.build=function(){return new c(this)},e}();t.BlockedUsersRequestBuilder=l},function(e,t,n){"use strict";t.__esModule=!0;var r=n(7),s=n(0),o=n(8),i=n(16),a=n(36),c=n(3),l=n(2),u=n(1),h=function(){function e(){}return e.processMessage=function(e){try{return r.MessageController.trasformJSONMessge(e)}catch(e){u.Logger.error("CometChatHelper: processMessage",e)}},e.getConversationFromMessage=function(t){return new Promise(function(n,u){try{c.CometChat.getLoggedinUser().then(function(e){if(null!==e){var c=r.MessageController.trasformJSONMessge(t),l=c.receiverType,h=c.conversationId,d=void 0,p=r.MessageController.trasformJSONMessge(t);if(l==s.MessageConstatnts.RECEIVER_TYPE.USER){var f=o.UsersController.trasformJSONUser(c[s.MessageConstatnts.KEYS.SENDER]);d=f.getUid()==e.getUid()?o.UsersController.trasformJSONUser(c[s.MessageConstatnts.KEYS.RECEIVER]):f}else d=i.GroupsController.trasformJSONGroup(c[s.MessageConstatnts.KEYS.RECEIVER]);var g=a.ConversationController.trasformJSONConversation(h,l,p,d,0);n(g)}else u(s.UserErrors.USER_NOT_LOGGED_IN)},function(e){u(new l.CometChatException(e.error))})}catch(e){u(new l.CometChatException(e))}})},e}();t.CometChatHelper=h},function(e,t,n){var r=n(59),s=n(60);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;++a)t[o+a]=i[a];return t||s(i)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var s=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}},function(e,t,n){function r(e){this.options=e||{locator:{}}}function s(){this.cdata=!1}function o(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function i(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function a(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new c,o=n.domBuilder||new s,i=n.errorHandler,a=n.locator,l=n.xmlns||{},u={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return a&&o.setDocumentLocator(a),r.errorHandler=function(e,t,n){if(!e){if(t instanceof s)return t;e=t}var r={},o=e instanceof Function;function i(t){var s=e[t];!s&&o&&(s=2==e.length?function(n){e(t,n)}:e),r[t]=s&&function(e){s("[xmldom "+t+"]\t"+e+function(e){if(n)return"\n@"+(n.systemId||"")+"#[line:"+n.lineNumber+",col:"+n.columnNumber+"]"}())}||function(){}}return n=n||{},i("warning"),i("error"),i("fatalError"),r}(i,o,a),r.domBuilder=n.domBuilder||o,/\/x?html?$/.test(t)&&(u.nbsp="\xa0",u.copy="\xa9",l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,l,u):r.errorHandler.error("invalid doc source"),o.doc},s.prototype={startDocument:function(){this.doc=(new l).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var s=this.doc,i=s.createElementNS(e,n||t),c=r.length;a(this,i),this.currentElement=i,this.locator&&o(this.locator,i);for(var l=0;l<c;l++){e=r.getURI(l);var u=r.getValue(l),h=(n=r.getQName(l),s.createAttributeNS(e,n));this.locator&&o(r.getLocator(l),h),h.value=h.nodeValue=u,i.setAttributeNode(h)}},endElement:function(e,t,n){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&o(this.locator,n),a(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=i.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&o(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=i.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&o(this.locator,r),a(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var s=r.createDocumentType(e,t,n);this.locator&&o(this.locator,s),a(this,s)}},warning:function(e){},error:function(e){},fatalError:function(e){throw e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){s.prototype[e]=function(){return null}});var c=n(62).XMLReader,l=t.DOMImplementation=n(38).DOMImplementation;t.XMLSerializer=n(38).XMLSerializer,t.DOMParser=r},function(e,t){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),s=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$"),o=0,i=1,a=2,c=3,l=4,u=5,h=6,d=7;function p(){}function f(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function g(e,t,n,r,s,p){for(var f,g=++t,E=o;;){var m=e.charAt(g);switch(m){case"=":if(E===i)f=e.slice(t,g),E=c;else{if(E!==a)throw new Error("attribute equal must after attrName");E=c}break;case"'":case'"':if(E===c||E===i){if(E===i&&(p.warning('attribute value must after "="'),f=e.slice(t,g)),!(0<(g=e.indexOf(m,t=g+1))))throw new Error("attribute value no end '"+m+"' match");_=e.slice(t,g).replace(/&#?\w+;/g,s),n.add(f,_,t-1),E=u}else{if(E!=l)throw new Error('attribute value must after "="');_=e.slice(t,g).replace(/&#?\w+;/g,s),n.add(f,_,t),p.warning('attribute "'+f+'" missed start quot('+m+")!!"),t=g+1,E=u}break;case"/":switch(E){case o:n.setTagName(e.slice(t,g));case u:case h:case d:E=d,n.closed=!0;case l:case i:case a:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return p.error("unexpected end of input"),E==o&&n.setTagName(e.slice(t,g)),g;case">":switch(E){case o:n.setTagName(e.slice(t,g));case u:case h:case d:break;case l:case i:"/"===(_=e.slice(t,g)).slice(-1)&&(n.closed=!0,_=_.slice(0,-1));case a:E===a&&(_=f),E==l?(p.warning('attribute "'+_+'" missed quot(")!!'),n.add(f,_.replace(/&#?\w+;/g,s),t)):("http://www.w3.org/1999/xhtml"===r[""]&&_.match(/^(?:disabled|checked|selected)$/i)||p.warning('attribute "'+_+'" missed value!! "'+_+'" instead!!'),n.add(_,_,t));break;case c:throw new Error("attribute value missed!!")}return g;case"\x80":m=" ";default:if(m<=" ")switch(E){case o:n.setTagName(e.slice(t,g)),E=h;break;case i:f=e.slice(t,g),E=a;break;case l:var _=e.slice(t,g).replace(/&#?\w+;/g,s);p.warning('attribute "'+_+'" missed quot(")!!'),n.add(f,_,t);case u:E=h}else switch(E){case a:"http://www.w3.org/1999/xhtml"===r[""]&&f.match(/^(?:disabled|checked|selected)$/i)||p.warning('attribute "'+f+'" missed value!! "'+f+'" instead2!!'),n.add(f,f,t),t=g,E=i;break;case u:p.warning('attribute space is required"'+f+'"!!');case h:E=i,t=g;break;case c:E=l,t=g;break;case d:throw new Error("elements closed character '/' and '>' must be connected to")}}g++}}function E(e,t,n){for(var r=e.tagName,s=null,o=e.length;o--;){var i=e[o],a=i.qName,c=i.value;if(0<(d=a.indexOf(":")))var l=i.prefix=a.slice(0,d),u=a.slice(d+1),h="xmlns"===l&&u;else l=null,h="xmlns"===(u=a)&&"";i.localName=u,!1!==h&&(null==s&&(s={},C(n,n={})),n[h]=s[h]=c,i.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(h,c))}for(o=e.length;o--;)(l=(i=e[o]).prefix)&&("xml"===l&&(i.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(i.uri=n[l||""]));var d=r.indexOf(":");u=e.localName=0<d?(l=e.prefix=r.slice(0,d),r.slice(d+1)):(l=null,r);var p=e.uri=n[l||""];if(t.startElement(p,u,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=s,!0;if(t.endElement(p,u,r),s)for(l in s)t.endPrefixMapping(l)}function m(e,t,n,r,s){if(/^(?:script|textarea)$/i.test(n)){var o=e.indexOf("</"+n+">",t),i=e.substring(t+1,o);if(/[&<]/.test(i))return/^script$/i.test(n)||(i=i.replace(/&#?\w+;/g,r)),s.characters(i,0,i.length),o}return t+1}function _(e,t,n,r){var s=r[n];return null==s&&((s=e.lastIndexOf("</"+n+">"))<t&&(s=e.lastIndexOf("</"+n)),r[n]=s),s<t}function C(e,t){for(var n in e)t[n]=e[n]}function S(e,t,n,r){switch(e.charAt(t+2)){case"-":return"-"!==e.charAt(t+3)?-1:t<(s=e.indexOf("--\x3e",t+4))?(n.comment(e,t+4,s-t-4),s+3):(r.error("Unclosed comment"),-1);default:if("CDATA["==e.substr(t+3,6)){var s=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,s-t-9),n.endCDATA(),s+3}var o=function(e,t){var n,r=[],s=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(s.lastIndex=t,s.exec(e);n=s.exec(e);)if(r.push(n),n[1])return r}(e,t),i=o.length;if(1<i&&/!doctype/i.test(o[0][0])){var a=o[1][0],c=3<i&&/^public$/i.test(o[2][0])&&o[3][0],l=4<i&&o[4][0],u=o[i-1];return n.startDTD(a,c&&c.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),u.index+u[0].length}}return-1}function T(e,t,n){var r=e.indexOf("?>",t);if(r){var s=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return s?(n.processingInstruction(s[1],s[2]),r+2):-1}return-1}function y(e){}function v(e,t){return e.__proto__=t,e}p.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),C(t,t={}),function(e,t,n,r,s){function o(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function(e){if(65535<e){var t=55296+((e-=65536)>>10);return String.fromCharCode(t,56320+(1023&e))}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(s.error("entity not found:"+e),e)}function i(t){if(C<t){var n=e.substring(C,t).replace(/&#?\w+;/g,o);h&&a(C),r.characters(n,0,t-C),C=t}}function a(t,n){for(;l<=t&&(n=u.exec(e));)l=(c=n.index)+n[0].length,h.lineNumber++;h.columnNumber=t-c+1}for(var c=0,l=0,u=/.*(?:\r\n?|\n)|.*$/g,h=r.locator,d=[{currentNSMap:t}],p={},C=0;;){try{var v=e.indexOf("<",C);if(v<0){if(!e.substr(C).match(/^\s*$/)){var A=r.doc,I=A.createTextNode(e.substr(C));A.appendChild(I),r.currentElement=I}return}switch(C<v&&i(v),e.charAt(v+1)){case"/":var R=e.indexOf(">",v+3),N=e.substring(v+2,R),O=d.pop();R<0?(N=e.substring(v+2).replace(/[\s<].*/,""),s.error("end tag name: "+N+" is not complete:"+O.tagName),R=v+1+N.length):N.match(/\s</)&&(N=N.replace(/[\s<].*/,""),s.error("end tag name: "+N+" maybe not complete"),R=v+1+N.length);var w=O.localNSMap,M=O.tagName==N;if(M||O.tagName&&O.tagName.toLowerCase()==N.toLowerCase()){if(r.endElement(O.uri,O.localName,N),w)for(var b in w)r.endPrefixMapping(b);M||s.fatalError("end tag name: "+N+" is not match the current start tagName:"+O.tagName)}else d.push(O);R++;break;case"?":h&&a(v),R=T(e,v,r);break;case"!":h&&a(v),R=S(e,v,r,s);break;default:h&&a(v);var P=new y,L=d[d.length-1].currentNSMap,x=(R=g(e,v,P,L,o,s),P.length);if(!P.closed&&_(e,R,P.tagName,p)&&(P.closed=!0,n.nbsp||s.warning("unclosed xml attribute")),h&&x){for(var U=f(h,{}),D=0;D<x;D++){var Y=P[D];a(Y.offset),Y.locator=f(h,{})}r.locator=U,E(P,r,L)&&d.push(P),r.locator=h}else E(P,r,L)&&d.push(P);"http://www.w3.org/1999/xhtml"!==P.uri||P.closed?R++:R=m(e,R,P.tagName,o,r)}}catch(t){s.error("element parse error: "+t),R=-1}C<R?C=R:i(Math.max(v,C)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},y.prototype={setTagName:function(e){if(!s.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!s.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},v({},v.prototype)instanceof v||(v=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=p}])},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);let s=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){s=e},get useDeprecatedSynchronousErrorHandling(){return s}};function i(e){setTimeout(()=>{throw e})}const a={closed:!0,next(e){},error(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;i(e)},complete(){}},c=Array.isArray||(e=>e&&"number"==typeof e.length);function l(e){return null!==e&&"object"==typeof e}function u(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}u.prototype=Object.create(Error.prototype);const h=u,d=(()=>{class e{constructor(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let e,t=!1;if(this.closed)return;let{_parent:n,_parents:s,_unsubscribe:o,_subscriptions:i}=this;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;let a=-1,u=s?s.length:0;for(;n;)n.remove(this),n=++a<u&&s[a]||null;if(r(o))try{o.call(this)}catch(d){t=!0,e=d instanceof h?p(d.errors):[d]}if(c(i))for(a=-1,u=i.length;++a<u;){const n=i[a];if(l(n))try{n.unsubscribe()}catch(d){t=!0,e=e||[],d instanceof h?e=e.concat(p(d.errors)):e.push(d)}}if(t)throw new h(e)}add(t){let n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;(n=new e)._subscriptions=[t]}break;default:if(!t)return e.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}if(n._addParent(this)){const e=this._subscriptions;e?e.push(n):this._subscriptions=[n]}return n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}_addParent(e){let{_parent:t,_parents:n}=this;return t!==e&&(t?n?-1===n.indexOf(e)&&(n.push(e),!0):(this._parents=[e],!0):(this._parent=e,!0))}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function p(e){return e.reduce((e,t)=>e.concat(t instanceof h?t.errors:t),[])}const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class g extends d{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof g?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new E(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new E(this,e,t,n)}}[f](){return this}static create(e,t,n){const r=new g(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parent:e,_parents:t}=this;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this}}class E extends g{constructor(e,t,n,s){let o;super(),this._parentSubscriber=e;let i=this;r(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==a&&(r((i=Object.create(t)).unsubscribe)&&this.add(i.unsubscribe.bind(i)),i.unsubscribe=this.unsubscribe.bind(this))),this._context=i,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):i(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;i(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;i(n)}}__tryOrSetError(e,t,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(i(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const m="function"==typeof Symbol&&Symbol.observable||"@@observable";function _(){}function C(...e){return S(e)}function S(e){return e?1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}:_}const T=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:r}=this,s=function(e,t,n){if(e){if(e instanceof g)return e;if(e[f])return e[f]()}return e||t||n?new g(e,t,n):new g(a)}(e,t,n);if(s.add(r?r.call(s,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),o.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof g?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=y(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(s){n(s),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[m](){return this}pipe(...e){return 0===e.length?this:S(e)(this)}toPromise(e){return new(e=y(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=(t=>new e(t)),e})();function y(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function v(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}v.prototype=Object.create(Error.prototype);const A=v;class I extends d{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class R extends g{constructor(e){super(e),this.destination=e}}const N=(()=>{class e extends T{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new R(this)}lift(e){const t=new O(this,this);return t.operator=e,t}next(e){if(this.closed)throw new A;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let s=0;s<n;s++)r[s].next(e)}}error(e){if(this.closed)throw new A;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let s=0;s<n;s++)r[s].error(e);this.observers.length=0}complete(){if(this.closed)throw new A;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new A;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new A;return this.hasError?(e.error(this.thrownError),d.EMPTY):this.isStopped?(e.complete(),d.EMPTY):(this.observers.push(e),new I(this,e))}asObservable(){const e=new T;return e.source=this,e}}return e.create=((e,t)=>new O(e,t)),e})();class O extends N{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):d.EMPTY}}function w(e){return e&&"function"==typeof e.schedule}class M extends g{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const b=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()},P=e=>t=>(e.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i),t);function L(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const x=L(),U=e=>t=>{const n=e[x]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t},D=e=>t=>{const n=e[m]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)},Y=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function G(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const k=e=>{if(e instanceof T)return t=>e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t);if(e&&"function"==typeof e[m])return D(e);if(Y(e))return b(e);if(G(e))return P(e);if(e&&"function"==typeof e[x])return U(e);{const t=l(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};function F(e,t,n,r,s=new M(e,n,r)){if(!s.closed)return k(t)(s)}class V extends g{notifyNext(e,t,n,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function B(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new H(e,t))}}class H{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new K(e,this.project,this.thisArg))}}class K extends g{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function j(e,t){return new T(t?n=>{const r=new d;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r}:b(e))}function J(e,t){if(!t)return e instanceof T?e:new T(k(e));if(null!=e){if(function(e){return e&&"function"==typeof e[m]}(e))return function(e,t){return new T(t?n=>{const r=new d;return r.add(t.schedule(()=>{const s=e[m]();r.add(s.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r}:D(e))}(e,t);if(G(e))return function(e,t){return new T(t?n=>{const r=new d;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r}:P(e))}(e,t);if(Y(e))return j(e,t);if(function(e){return e&&"function"==typeof e[x]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new T(t?n=>{const r=new d;let s;return r.add(()=>{s&&"function"==typeof s.return&&s.return()}),r.add(t.schedule(()=>{s=e[x](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const o=s.next();e=o.value,t=o.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r}:U(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function q(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(q((n,r)=>J(e(n,r)).pipe(B((e,s)=>t(n,e,r,s))),n)):("number"==typeof t&&(n=t),t=>t.lift(new X(e,n)))}class X{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new $(e,this.project,this.concurrent))}}class $ extends V{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}_innerSub(e,t,n){const r=new M(this,void 0,void 0);this.destination.add(r),F(this,e,t,n,r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,r,s){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function W(e){return e}function z(e=Number.POSITIVE_INFINITY){return q(W,e)}function Q(){return function(e){return e.lift(new Z(e))}}class Z{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new ee(e,n),s=t.subscribe(r);return r.closed||(r.connection=n.connect()),s}}class ee extends g{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}const te=class extends T{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new d).add(this.source.subscribe(new re(this.getSubject(),this))),e.closed?(this._connection=null,e=d.EMPTY):this._connection=e),e}refCount(){return Q()(this)}}.prototype,ne={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:te._subscribe},_isComplete:{value:te._isComplete,writable:!0},getSubject:{value:te.getSubject},connect:{value:te.connect},refCount:{value:te.refCount}};class re extends R{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function se(){return new N}const oe="__parameters__";function ie(e,t,n){const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function s(...e){if(this instanceof s)return r.apply(this,e),this;const t=new s(...e);return n.annotation=t,n;function n(e,n,r){const s=e.hasOwnProperty(oe)?e[oe]:Object.defineProperty(e,oe,{value:[]})[oe];for(;s.length<=r;)s.push(null);return(s[r]=s[r]||[]).push(t),e}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s}const ae=ie("Inject",e=>({token:e})),ce=ie("Optional"),le=ie("Self"),ue=ie("SkipSelf");var he=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function de(e){for(let t in e)if(e[t]===de)return t;throw Error("Could not find renamed property on target object.")}function pe(e){return{providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function fe(e){return e&&e.hasOwnProperty(ge)?e[ge]:null}const ge=de({ngInjectableDef:de});function Ee(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(Ee).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}const me=de({__forward_ref__:de});function _e(e){return e.__forward_ref__=_e,e.toString=function(){return Ee(this())},e}function Ce(e){const t=e;return"function"==typeof t&&t.hasOwnProperty(me)&&t.__forward_ref__===_e?t():e}function Se(){const e="undefined"!=typeof globalThis&&globalThis,t="undefined"!=typeof window&&window,n="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,r="undefined"!=typeof global&&global;return e||r||t||n}const Te=Se();let ye,ve=void 0;function Ae(e){const t=ve;return ve=e,t}function Ie(e,t=he.Default){return(ye||function(e,t=he.Default){if(void 0===ve)throw new Error("inject() must be called from an injection context");return null===ve?function(e,t,n){const r=fe(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&he.Optional)return null;throw new Error(`Injector: NOT_FOUND [${Ee(e)}]`)}(e,0,t):ve.get(e,t&he.Optional?null:void 0,t)})(e,t)}class Re{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.ngInjectableDef=pe({providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ne="__source",Oe=new Object,we=new Re("INJECTOR",-1);class Me{get(e,t=Oe){if(t===Oe){const t=new Error(`NullInjectorError: No provider for ${Ee(e)}!`);throw t.name="NullInjectorError",t}return t}}const be=(()=>{class e{static create(e,t){return Array.isArray(e)?new Ve(e,t):new Ve(e.providers,e.parent,e.name||null)}}return e.THROW_IF_NOT_FOUND=Oe,e.NULL=new Me,e.ngInjectableDef=pe({providedIn:"any",factory:()=>Ie(we)}),e.__NG_ELEMENT_ID__=-1,e})(),Pe=function(e){return e},Le=[],xe=Pe,Ue=function(){return Array.prototype.slice.call(arguments)},De=de({provide:String,useValue:de}),Ye="ngTokenPath",Ge="ngTempTokenPath",ke=/\n/gm,Fe="\u0275";class Ve{constructor(e,t=be.NULL,n=null){this.parent=t,this.source=n;const r=this._records=new Map;r.set(be,{token:be,fn:Pe,deps:Le,value:this,useNew:!1}),r.set(we,{token:we,fn:Pe,deps:Le,value:this,useNew:!1}),function e(t,n){if(n)if((n=Ce(n))instanceof Array)for(let r=0;r<n.length;r++)e(t,n[r]);else{if("function"==typeof n)throw Ke("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Ke("Unexpected provider",n);{let e=Ce(n.provide);const r=function(e){const t=function(e){let t=Le;const n=e.deps;if(n&&n.length){t=[];for(let e=0;e<n.length;e++){let r=6,s=Ce(n[e]);if(s instanceof Array)for(let e=0,t=s;e<t.length;e++){const n=t[e];n instanceof ce||n==ce?r|=1:n instanceof ue||n==ue?r&=-3:n instanceof le||n==le?r&=-5:s=n instanceof ae?n.token:Ce(n)}t.push({token:s,options:r})}}else if(e.useExisting)t=[{token:Ce(e.useExisting),options:6}];else if(!(n||De in e))throw Ke("'deps' required",e);return t}(e);let n=Pe,r=Le,s=!1,o=Ce(e.provide);if(De in e)r=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)s=!0,n=Ce(e.useClass);else{if("function"!=typeof o)throw Ke("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);s=!0,n=o}return{deps:t,fn:n,useNew:s,value:r}}(n);if(!0===n.multi){let r=t.get(e);if(r){if(r.fn!==Ue)throw Be(e)}else t.set(e,r={token:n.provide,deps:[],useNew:!1,fn:Ue,value:Le});r.deps.push({token:e=n,options:6})}const s=t.get(e);if(s&&s.fn==Ue)throw Be(e);t.set(e,r)}}}(r,e)}get(e,t,n=he.Default){const r=this._records.get(e);try{return function e(t,n,r,s,o,i){try{return function(t,n,r,s,o,i){let a;if(!n||i&he.SkipSelf)i&he.Self||(a=s.get(t,o,he.Default));else{if((a=n.value)==xe)throw Error(Fe+"Circular dependency");if(a===Le){n.value=xe;let t=void 0,o=n.useNew,i=n.fn,c=n.deps,l=Le;if(c.length){l=[];for(let t=0;t<c.length;t++){const n=c[t],o=n.options,i=2&o?r.get(n.token):void 0;l.push(e(n.token,i,r,i||4&o?s:be.NULL,1&o?null:be.THROW_IF_NOT_FOUND,he.Default))}}n.value=a=o?new i(...l):i.apply(t,l)}}return a}(t,n,r,s,o,i)}catch(a){throw a instanceof Error||(a=new Error(a)),(a[Ge]=a[Ge]||[]).unshift(t),n&&n.value==xe&&(n.value=Le),a}}(e,r,this._records,this.parent,t,n)}catch(s){return function(e,t,n,r){const s=e[Ge];throw t[Ne]&&s.unshift(t[Ne]),e.message=He("\n"+e.message,s,"StaticInjectorError",r),e[Ye]=s,e[Ge]=null,e}(s,e,0,this.source)}}toString(){const e=[];return this._records.forEach((t,n)=>e.push(Ee(n))),`StaticInjector[${e.join(", ")}]`}}function Be(e){return Ke("Cannot mix multi providers and regular providers",e)}function He(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==Fe?e.substr(2):e;let s=Ee(t);if(t instanceof Array)s=t.map(Ee).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):Ee(r)))}s=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${e.replace(ke,"\n  ")}`}function Ke(e,t){return new Error(He(e,t,"StaticInjectorError"))}const je="ngDebugContext",Je="ngOriginalError",qe="ngErrorLogger",Xe=new Re("AnalyzeForEntryComponents"),$e=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),We=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Te))();function ze(e){return e[je]}function Qe(e){return e[Je]}function Ze(e,...t){e.error(...t)}class et{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e[qe]||Ze}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?ze(e)?ze(e):this._findContext(Qe(e)):null}_findOriginalError(e){let t=Qe(e);for(;t&&Qe(t);)t=Qe(t);return t}}let tt=!0,nt=!1;function rt(){return nt=!0,tt}class st{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(r){return null}const t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);const n=t.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(e){e="<body><remove></remove>"+e+"</body>";try{const n=(new window.DOMParser).parseFromString(e,"text/html").body;return n.removeChild(n.firstChild),n}catch(t){return null}}getInertBodyElement_InertDocument(e){const t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const ot=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,it=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function at(e){return(e=String(e)).match(ot)||e.match(it)?e:(rt()&&console.warn(`WARNING: sanitizing unsafe URL value ${e} (see http://g.co/ng/security#xss)`),"unsafe:"+e)}function ct(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function lt(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const ut=ct("area,br,col,hr,img,wbr"),ht=ct("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),dt=ct("rp,rt"),pt=lt(dt,ht),ft=lt(ut,lt(ht,ct("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),lt(dt,ct("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pt),gt=ct("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Et=ct("srcset"),mt=lt(gt,Et,ct("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ct("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_t=ct("script,style,template");class Ct{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!ft.hasOwnProperty(t))return this.sanitizedSomething=!0,!_t.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let s=0;s<n.length;s++){const e=n.item(s),t=e.name,o=t.toLowerCase();if(!mt.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let i=e.value;gt[o]&&(i=at(i)),Et[o]&&(r=i,i=(r=String(r)).split(",").map(e=>at(e.trim())).join(", ")),this.buf.push(" ",t,'="',yt(i),'"')}var r;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();ft.hasOwnProperty(t)&&!ut.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(yt(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const St=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Tt=/([^\#-~ |!])/g;function yt(e){return e.replace(/&/g,"&amp;").replace(St,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Tt,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let vt;function At(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}const It=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}();class Rt{}const Nt=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Ot=/^url\(([^)]+)\)$/,wt=/([A-Z])/g;function Mt(e){try{return null!=e?e.toString().slice(0,30):e}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function bt(e){return!!e&&"function"==typeof e.then}function Pt(e){return!!e&&"function"==typeof e.subscribe}let Lt=null;function xt(){if(!Lt){const e=Te.Symbol;if(e&&e.iterator)Lt=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Lt=n)}}}return Lt}function Ut(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function Dt(e,t){const n=Gt(e),r=Gt(t);if(n&&r)return function(e,t,n){const r=e[xt()](),s=t[xt()]();for(;;){const e=r.next(),t=s.next();if(e.done&&t.done)return!0;if(e.done||t.done)return!1;if(!n(e.value,t.value))return!1}}(e,t,Dt);{const s=e&&("object"==typeof e||"function"==typeof e),o=t&&("object"==typeof t||"function"==typeof t);return!(n||!s||r||!o)||Ut(e,t)}}class Yt{constructor(e){this.wrapped=e}static wrap(e){return new Yt(e)}static unwrap(e){return Yt.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Yt}}function Gt(e){return!!kt(e)&&(Array.isArray(e)||!(e instanceof Map)&&xt()in e)}function kt(e){return null!==e&&("function"==typeof e||"object"==typeof e)}class Ft{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}const Vt=new Re("The presence of this token marks an injector as being the root injector.");class Bt{}class Ht{}function Kt(e){const t=Error(`No component factory found for ${Ee(e)}. Did you add it to @NgModule.entryComponents?`);return t[jt]=e,t}const jt="ngComponent";class Jt{resolveComponentFactory(e){throw Kt(e)}}const qt=(()=>{class e{}return e.NULL=new Jt,e})();class Xt{constructor(e,t,n){this._parent=t,this._ngModule=n,this._factories=new Map;for(let r=0;r<e.length;r++){const t=e[r];this._factories.set(t.componentType,t)}}resolveComponentFactory(e){let t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw Kt(e);return new $t(t,this._ngModule)}}class $t extends Ht{constructor(e,t){super(),this.factory=e,this.ngModule=t,this.selector=e.selector,this.componentType=e.componentType,this.ngContentSelectors=e.ngContentSelectors,this.inputs=e.inputs,this.outputs=e.outputs}create(e,t,n,r){return this.factory.create(e,t,n,r||this.ngModule)}}class Wt{}class zt{}function Qt(...e){}const Zt=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=(()=>en(e)),e})(),en=Qt;class tn{}class nn{}const rn=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),sn=(()=>{class e{}return e.__NG_ELEMENT_ID__=(()=>on()),e})(),on=Qt;class an{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const cn=new an("8.0.3");class ln{constructor(){}supports(e){return Gt(e)}create(e){return new hn(e)}}const un=(e,t)=>t;class hn{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||un}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,s=null;for(;t||n;){const o=!n||t&&t.currentIndex<gn(n,r,s)?t:n,i=gn(o,r,s),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const e=i-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<s.length?s[n]:s[n]=0,o=r+n;t<=o&&o<e&&(s[n]=r+1)}s[o.previousIndex]=t-e}}i!==a&&e(o,i,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Gt(e))throw new Error(`Error trying to diff '${Ee(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,s=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)r=this._trackByFn(t,n=e[t]),null!==s&&Ut(s.trackById,r)?(o&&(s=this._verifyReinsertion(s,n,r,t)),Ut(s.item,n)||this._addIdentityChange(s,n)):(s=this._mismatch(s,n,r,t),o=!0),s=s._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[xt()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==s&&Ut(s.trackById,r)?(o&&(s=this._verifyReinsertion(s,e,r,t)),Ut(s.item,e)||this._addIdentityChange(s,e)):(s=this._mismatch(s,e,r,t),o=!0),s=s._next,t++}),this.length=t;return this._truncate(s),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Ut(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Ut(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):e=this._addAfter(new dn(t,n),s,r),e}_verifyReinsertion(e,t,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new fn),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fn),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class dn{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pn{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Ut(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class fn{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new pn,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gn(e,t,n){const r=e.previousIndex;if(null===r)return r;let s=0;return n&&r<n.length&&(s=n[r]),r+t+s}class En{constructor(){}supports(e){return e instanceof Map||kt(e)}create(){return new mn}}class mn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||kt(e)))throw new Error(`Error trying to diff '${Ee(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,s=n._next;return r&&(r._next=s),s&&(s._prev=r),n._next=null,n._prev=null,n}const n=new _n(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Ut(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class _n{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}const Cn=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ue,new ce]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.ngInjectableDef=pe({providedIn:"root",factory:()=>new e([new ln])}),e})(),Sn=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ue,new ce]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.ngInjectableDef=pe({providedIn:"root",factory:()=>new e([new En])}),e})(),Tn=(()=>{class e{}return e.__NG_ELEMENT_ID__=(()=>yn()),e})(),yn=(...e)=>{},vn=[new En],An=new Cn([new ln]),In=new Sn(vn),Rn=(()=>{class e{}return e.__NG_ELEMENT_ID__=(()=>Nn(e,Zt)),e})(),Nn=Qt,On=(()=>{class e{}return e.__NG_ELEMENT_ID__=(()=>wn(e,Zt)),e})(),wn=Qt;function Mn(e,t,n,r){let s=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${t}'. Current value: '${n}'.`;return r&&(s+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){const n=new Error(e);return bn(n,t),n}(s,e)}function bn(e,t){e[je]=t,e[qe]=t.logError.bind(t)}function Pn(e){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${e}`)}function Ln(e,t,n){const r=e.state,s=1792&r;return s===t?(e.state=-1793&r|n,e.initIndex=-1,!0):s===n}function xn(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function Un(e,t){return e.nodes[t]}function Dn(e,t){return e.nodes[t]}function Yn(e,t){return e.nodes[t]}function Gn(e,t){return e.nodes[t]}function kn(e,t){return e.nodes[t]}const Fn={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Vn=()=>{},Bn=new Map;function Hn(e){let t=Bn.get(e);return t||(t=Ee(e)+"_"+Bn.size,Bn.set(e,t)),t}function Kn(e,t,n,r){if(Yt.isWrapped(r)){r=Yt.unwrap(r);const s=e.def.nodes[t].bindingIndex+n,o=Yt.unwrap(e.oldValues[s]);e.oldValues[s]=new Yt(o)}return r}const jn="$$undefined",Jn="$$empty";function qn(e){return{id:jn,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}let Xn=0;function $n(e,t,n,r){return!(!(2&e.state)&&Ut(e.oldValues[t.bindingIndex+n],r))}function Wn(e,t,n,r){return!!$n(e,t,n,r)&&(e.oldValues[t.bindingIndex+n]=r,!0)}function zn(e,t,n,r){const s=e.oldValues[t.bindingIndex+n];if(1&e.state||!Dt(s,r)){const o=t.bindings[n].name;throw Mn(Fn.createDebugContext(e,t.nodeIndex),`${o}: ${s}`,`${o}: ${r}`,0!=(1&e.state))}}function Qn(e){let t=e;for(;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function Zn(e,t){let n=e;for(;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function er(e,t,n,r){try{return Qn(33554432&e.def.nodes[t].flags?Dn(e,t).componentView:e),Fn.handleEvent(e,t,n,r)}catch(s){e.root.errorHandler.handleError(s)}}function tr(e){return e.parent?Dn(e.parent,e.parentNodeDef.nodeIndex):null}function nr(e){return e.parent?e.parentNodeDef.parent:null}function rr(e,t){switch(201347067&t.flags){case 1:return Dn(e,t.nodeIndex).renderElement;case 2:return Un(e,t.nodeIndex).renderText}}function sr(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function or(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function ir(e){const t={};let n=0;const r={};return e&&e.forEach(([e,s])=>{"number"==typeof e?(t[e]=s,n|=function(e){return 1<<e%32}(e)):r[e]=s}),{matchedQueries:t,references:r,matchedQueryIds:n}}function ar(e,t){return e.map(e=>{let n,r;return Array.isArray(e)?[r,n]=e:(r=0,n=e),n&&("function"==typeof n||"object"==typeof n)&&t&&Object.defineProperty(n,Ne,{value:t,configurable:!0}),{flags:r,token:n,tokenKey:Hn(n)}})}function cr(e,t,n){let r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===$e.Native?Dn(e,n.renderParent.nodeIndex).renderElement:void 0:t}const lr=new WeakMap;function ur(e){let t=lr.get(e);return t||((t=e(()=>Vn)).factory=e,lr.set(e,t)),t}function hr(e,t,n,r,s){3===t&&(n=e.renderer.parentNode(rr(e,e.def.lastRenderRootNode))),dr(e,t,0,e.def.nodes.length-1,n,r,s)}function dr(e,t,n,r,s,o,i){for(let a=n;a<=r;a++){const n=e.def.nodes[a];11&n.flags&&fr(e,n,t,s,o,i),a+=n.childCount}}function pr(e,t,n,r,s,o){let i=e;for(;i&&!sr(i);)i=i.parent;const a=i.parent,c=nr(i),l=c.nodeIndex+c.childCount;for(let u=c.nodeIndex+1;u<=l;u++){const e=a.def.nodes[u];e.ngContentIndex===t&&fr(a,e,n,r,s,o),u+=e.childCount}if(!a.parent){const i=e.root.projectableNodes[t];if(i)for(let t=0;t<i.length;t++)gr(e,i[t],n,r,s,o)}}function fr(e,t,n,r,s,o){if(8&t.flags)pr(e,t.ngContent.index,n,r,s,o);else{const i=rr(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&gr(e,i,n,r,s,o),32&t.bindingFlags&&gr(Dn(e,t.nodeIndex).componentView,i,n,r,s,o)):gr(e,i,n,r,s,o),16777216&t.flags){const i=Dn(e,t.nodeIndex).viewContainer._embeddedViews;for(let e=0;e<i.length;e++)hr(i[e],n,r,s,o)}1&t.flags&&!t.element.name&&dr(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,r,s,o)}}function gr(e,t,n,r,s,o){const i=e.renderer;switch(n){case 1:i.appendChild(r,t);break;case 2:i.insertBefore(r,t,s);break;case 3:i.removeChild(r,t);break;case 0:o.push(t)}}const Er=/^:([^:]+):(.+)$/;function mr(e){if(":"===e[0]){const t=e.match(Er);return[t[1],t[2]]}return["",e]}function _r(e){let t=0;for(let n=0;n<e.length;n++)t|=e[n].flags;return t}const Cr=new Object,Sr=Hn(be),Tr=Hn(we),yr=Hn(Wt);function vr(e,t,n,r){return n=Ce(n),{index:-1,deps:ar(r,Ee(t)),flags:e,token:t,value:n}}function Ar(e,t,n=be.THROW_IF_NOT_FOUND){const r=Ae(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(n=null),1&t.flags)return e._parent.get(t.token,n);const i=t.tokenKey;switch(i){case Sr:case Tr:case yr:return e}const a=e._def.providersByKey[i];let c;if(a){let t=e._providers[a.index];return void 0===t&&(t=e._providers[a.index]=Ir(e,a)),t===Cr?void 0:t}if((c=fe(t.token))&&(s=e,null!=(o=c).providedIn&&(function(e,t){return e._def.modules.indexOf(o.providedIn)>-1}(s)||"root"===o.providedIn&&s._def.isRoot))){const n=e._providers.length;return e._def.providers[n]=e._def.providersByKey[t.tokenKey]={flags:5120,value:c.factory,deps:[],index:n,token:t.token},e._providers[n]=Cr,e._providers[n]=Ir(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?n:e._parent.get(t.token,n)}finally{Ae(r)}var s,o}function Ir(e,t){let n;switch(201347067&t.flags){case 512:n=function(e,t,n){const r=n.length;switch(r){case 0:return new t;case 1:return new t(Ar(e,n[0]));case 2:return new t(Ar(e,n[0]),Ar(e,n[1]));case 3:return new t(Ar(e,n[0]),Ar(e,n[1]),Ar(e,n[2]));default:const s=new Array(r);for(let t=0;t<r;t++)s[t]=Ar(e,n[t]);return new t(...s)}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){const r=n.length;switch(r){case 0:return t();case 1:return t(Ar(e,n[0]));case 2:return t(Ar(e,n[0]),Ar(e,n[1]));case 3:return t(Ar(e,n[0]),Ar(e,n[1]),Ar(e,n[2]));default:const s=Array(r);for(let t=0;t<r;t++)s[t]=Ar(e,n[t]);return t(...s)}}(e,t.value,t.deps);break;case 2048:n=Ar(e,t.deps[0]);break;case 256:n=t.value}return n===Cr||null===n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?Cr:n}function Rr(e,t){const n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;const r=n[t];return r.viewContainerParent=null,Mr(n,t),Fn.dirtyParentQueries(r),Or(r),r}function Nr(e,t,n){const r=t?rr(t,t.def.lastRenderRootNode):e.renderElement,s=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);hr(n,2,s,o,void 0)}function Or(e){hr(e,3,null,null,void 0)}function wr(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Mr(e,t){t>=e.length-1?e.pop():e.splice(t,1)}const br=new Object;function Pr(e,t,n,r,s,o){return new Lr(e,t,n,r,s,o)}class Lr extends Ht{constructor(e,t,n,r,s,o){super(),this.selector=e,this.componentType=t,this._inputs=r,this._outputs=s,this.ngContentSelectors=o,this.viewDefFactory=n}get inputs(){const e=[],t=this._inputs;for(let n in t)e.push({propName:n,templateName:t[n]});return e}get outputs(){const e=[];for(let t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e}create(e,t,n,r){if(!r)throw new Error("ngModule should be provided");const s=ur(this.viewDefFactory),o=s.nodes[0].element.componentProvider.nodeIndex,i=Fn.createRootView(e,t||[],n,s,r,br),a=Yn(i,o).instance;return n&&i.renderer.setAttribute(Dn(i,0).renderElement,"ng-version",cn.full),new xr(i,new Gr(i),a)}}class xr extends Bt{constructor(e,t,n){super(),this._view=e,this._viewRef=t,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=t,this.changeDetectorRef=t,this.instance=n}get location(){return new Zt(Dn(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Br(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(e){this._viewRef.onDestroy(e)}}function Ur(e,t,n){return new Dr(e,t,n)}class Dr{constructor(e,t,n){this._view=e,this._elDef=t,this._data=n,this._embeddedViews=[]}get element(){return new Zt(this._data.renderElement)}get injector(){return new Br(this._view,this._elDef)}get parentInjector(){let e=this._view,t=this._elDef.parent;for(;!t&&e;)t=nr(e),e=e.parent;return e?new Br(e,t):new Br(this._view,null)}clear(){for(let e=this._embeddedViews.length-1;e>=0;e--){const t=Rr(this._data,e);Fn.destroyView(t)}}get(e){const t=this._embeddedViews[e];if(t){const e=new Gr(t);return e.attachToViewContainerRef(this),e}return null}get length(){return this._embeddedViews.length}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,s){const o=n||this.parentInjector;s||e instanceof $t||(s=o.get(Wt));const i=e.create(o,r,void 0,s);return this.insert(i.hostView,t),i}insert(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=e;return function(e,t,n,r){let s=t.viewContainer._embeddedViews;null==n&&(n=s.length),r.viewContainerParent=e,wr(s,n,r),function(e,t){const n=tr(t);if(!n||n===e||16&t.state)return;t.state|=16;let r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(t),function(e,n){if(4&n.flags)return;t.parent.def.nodeFlags|=4,n.flags|=4;let r=n.parent;for(;r;)r.childFlags|=4,r=r.parent}(0,t.parentNodeDef)}(t,r),Fn.dirtyParentQueries(r),Nr(t,n>0?s[n-1]:null,r)}(this._view,this._data,t,n._view),n.attachToViewContainerRef(this),e}move(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(e._view);return function(e,t,r){const s=e.viewContainer._embeddedViews,o=s[n];Mr(s,n),null==r&&(r=s.length),wr(s,r,o),Fn.dirtyParentQueries(o),Or(o),Nr(e,r>0?s[r-1]:null,o)}(this._data,0,t),e}indexOf(e){return this._embeddedViews.indexOf(e._view)}remove(e){const t=Rr(this._data,e);t&&Fn.destroyView(t)}detach(e){const t=Rr(this._data,e);return t?new Gr(t):null}}function Yr(e){return new Gr(e)}class Gr{constructor(e){this._view=e,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(e){const t=[];return hr(e,0,void 0,void 0,t),t}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){Qn(this._view)}detach(){this._view.state&=-5}detectChanges(){const e=this._view.root.rendererFactory;e.begin&&e.begin();try{Fn.checkAndUpdateView(this._view)}finally{e.end&&e.end()}}checkNoChanges(){Fn.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Fn.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Or(this._view),Fn.dirtyParentQueries(this._view)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}}function kr(e,t){return new Fr(e,t)}class Fr extends Rn{constructor(e,t){super(),this._parentView=e,this._def=t}createEmbeddedView(e){return new Gr(Fn.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))}get elementRef(){return new Zt(Dn(this._parentView,this._def.nodeIndex).renderElement)}}function Vr(e,t){return new Br(e,t)}class Br{constructor(e,t){this.view=e,this.elDef=t}get(e,t=be.THROW_IF_NOT_FOUND){return Fn.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:Hn(e)},t)}}function Hr(e,t){const n=e.def.nodes[t];if(1&n.flags){const t=Dn(e,n.nodeIndex);return n.element.template?t.template:t.renderElement}if(2&n.flags)return Un(e,n.nodeIndex).renderText;if(20240&n.flags)return Yn(e,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${t}`)}function Kr(e){return new jr(e.renderer)}class jr{constructor(e){this.delegate=e}selectRootElement(e){return this.delegate.selectRootElement(e)}createElement(e,t){const[n,r]=mr(t),s=this.delegate.createElement(r,n);return e&&this.delegate.appendChild(e,s),s}createViewRoot(e){return e}createTemplateAnchor(e){const t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t}createText(e,t){const n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n}projectNodes(e,t){for(let n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])}attachViewAfter(e,t){const n=this.delegate.parentNode(e),r=this.delegate.nextSibling(e);for(let s=0;s<t.length;s++)this.delegate.insertBefore(n,t[s],r)}detachView(e){for(let t=0;t<e.length;t++){const n=e[t],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}destroyView(e,t){for(let n=0;n<t.length;n++)this.delegate.destroyNode(t[n])}listen(e,t,n){return this.delegate.listen(e,t,n)}listenGlobal(e,t,n){return this.delegate.listen(e,t,n)}setElementProperty(e,t,n){this.delegate.setProperty(e,t,n)}setElementAttribute(e,t,n){const[r,s]=mr(t);null!=n?this.delegate.setAttribute(e,s,n,r):this.delegate.removeAttribute(e,s,r)}setBindingDebugInfo(e,t,n){}setElementClass(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)}setElementStyle(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)}invokeElementMethod(e,t,n){e[t].apply(e,n)}setText(e,t){this.delegate.setValue(e,t)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function Jr(e,t,n,r){return new qr(e,t,n,r)}class qr{constructor(e,t,n,r){this._moduleType=e,this._parent=t,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){const t=e._def,n=e._providers=new Array(t.providers.length);for(let r=0;r<t.providers.length;r++){const s=t.providers[r];4096&s.flags||void 0===n[r]&&(n[r]=Ir(e,s))}}(this)}get(e,t=be.THROW_IF_NOT_FOUND,n=he.Default){let r=0;return n&he.SkipSelf?r|=1:n&he.Self&&(r|=4),Ar(this,{token:e,tokenKey:Hn(e),flags:r},t)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(qt)}destroy(){if(this._destroyed)throw new Error(`The ng module ${Ee(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(e,t){const n=e._def,r=new Set;for(let s=0;s<n.providers.length;s++)if(131072&n.providers[s].flags){const t=e._providers[s];if(t&&t!==Cr){const e=t.ngOnDestroy;"function"!=typeof e||r.has(t)||(e.apply(t),r.add(t))}}}(this),this._destroyListeners.forEach(e=>e())}onDestroy(e){this._destroyListeners.push(e)}}const Xr=Hn(tn),$r=Hn(sn),Wr=Hn(Zt),zr=Hn(On),Qr=Hn(Rn),Zr=Hn(Tn),es=Hn(be),ts=Hn(we);function ns(e,t,n,r,s,o,i,a){const c=[];if(i)for(let u in i){const[e,t]=i[u];c[e]={flags:8,name:u,nonMinifiedName:t,ns:null,securityContext:null,suffix:null}}const l=[];if(a)for(let u in a)l.push({type:1,propName:u,target:null,eventName:a[u]});return os(e,t|=16384,n,r,s,s,o,c,l)}function rs(e,t,n){return os(-1,e|=16,null,0,t,t,n)}function ss(e,t,n,r,s){return os(-1,e,t,0,n,r,s)}function os(e,t,n,r,s,o,i,a,c){const{matchedQueries:l,references:u,matchedQueryIds:h}=ir(n);c||(c=[]),a||(a=[]),o=Ce(o);const d=ar(i,Ee(s));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:l,matchedQueryIds:h,references:u,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:_r(a),outputs:c,element:null,provider:{token:s,value:o,deps:d},text:null,query:null,ngContent:null}}function is(e,t){return us(e,t)}function as(e,t){let n=e;for(;n.parent&&!sr(n);)n=n.parent;return hs(n.parent,nr(n),!0,t.provider.value,t.provider.deps)}function cs(e,t){const n=hs(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(let r=0;r<t.outputs.length;r++){const s=t.outputs[r],o=n[s.propName];if(!Pt(o))throw new Error(`@Output ${s.propName} not initialized in '${n.constructor.name}'.`);{const n=o.subscribe(ls(e,t.parent.nodeIndex,s.eventName));e.disposables[t.outputIndex+r]=n.unsubscribe.bind(n)}}return n}function ls(e,t,n){return r=>er(e,t,n,r)}function us(e,t){const n=(8192&t.flags)>0,r=t.provider;switch(201347067&t.flags){case 512:return hs(e,t.parent,n,r.value,r.deps);case 1024:return function(e,t,n,r,s){const o=s.length;switch(o){case 0:return r();case 1:return r(ps(e,t,n,s[0]));case 2:return r(ps(e,t,n,s[0]),ps(e,t,n,s[1]));case 3:return r(ps(e,t,n,s[0]),ps(e,t,n,s[1]),ps(e,t,n,s[2]));default:const i=Array(o);for(let r=0;r<o;r++)i[r]=ps(e,t,n,s[r]);return r(...i)}}(e,t.parent,n,r.value,r.deps);case 2048:return ps(e,t.parent,n,r.deps[0]);case 256:return r.value}}function hs(e,t,n,r,s){const o=s.length;switch(o){case 0:return new r;case 1:return new r(ps(e,t,n,s[0]));case 2:return new r(ps(e,t,n,s[0]),ps(e,t,n,s[1]));case 3:return new r(ps(e,t,n,s[0]),ps(e,t,n,s[1]),ps(e,t,n,s[2]));default:const i=new Array(o);for(let r=0;r<o;r++)i[r]=ps(e,t,n,s[r]);return new r(...i)}}const ds={};function ps(e,t,n,r,s=be.THROW_IF_NOT_FOUND){if(8&r.flags)return r.token;const o=e;2&r.flags&&(s=null);const i=r.tokenKey;i===Zr&&(n=!(!t||!t.element.componentView)),t&&1&r.flags&&(n=!1,t=t.parent);let a=e;for(;a;){if(t)switch(i){case Xr:return Kr(fs(a,t,n));case $r:return fs(a,t,n).renderer;case Wr:return new Zt(Dn(a,t.nodeIndex).renderElement);case zr:return Dn(a,t.nodeIndex).viewContainer;case Qr:if(t.element.template)return Dn(a,t.nodeIndex).template;break;case Zr:return Yr(fs(a,t,n));case es:case ts:return Vr(a,t);default:const e=(n?t.element.allProviders:t.element.publicProviders)[i];if(e){let t=Yn(a,e.nodeIndex);return t||(t={instance:us(a,e)},a.nodes[e.nodeIndex]=t),t.instance}}n=sr(a),t=nr(a),a=a.parent,4&r.flags&&(a=null)}const c=o.root.injector.get(r.token,ds);return c!==ds||s===ds?c:o.root.ngModule.injector.get(r.token,s)}function fs(e,t,n){let r;if(n)r=Dn(e,t.nodeIndex).componentView;else for(r=e;r.parent&&!sr(r);)r=r.parent;return r}function gs(e,t,n,r,s,o){if(32768&n.flags){const t=Dn(e,n.parent.nodeIndex).componentView;2&t.def.flags&&(t.state|=8)}if(t.instance[n.bindings[r].name]=s,524288&n.flags){o=o||{};const t=Yt.unwrap(e.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new Ft(t,s,0!=(2&e.state))}return e.oldValues[n.bindingIndex+r]=s,o}function Es(e,t){if(!(e.def.nodeFlags&t))return;const n=e.def.nodes;let r=0;for(let s=0;s<n.length;s++){const o=n[s];let i=o.parent;for(!i&&o.flags&t&&_s(e,s,o.flags&t,r++),0==(o.childFlags&t)&&(s+=o.childCount);i&&1&i.flags&&s===i.nodeIndex+i.childCount;)i.directChildFlags&t&&(r=ms(e,i,t,r)),i=i.parent}}function ms(e,t,n,r){for(let s=t.nodeIndex+1;s<=t.nodeIndex+t.childCount;s++){const t=e.def.nodes[s];t.flags&n&&_s(e,s,t.flags&n,r++),s+=t.childCount}return r}function _s(e,t,n,r){const s=Yn(e,t);if(!s)return;const o=s.instance;o&&(Fn.setCurrentNode(e,t),1048576&n&&xn(e,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&xn(e,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}const Cs=new Re("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>We});class Ss extends N{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r,s=e=>null,o=()=>null;e&&"object"==typeof e?(r=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(s=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(o=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(s=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const i=super.subscribe(r,s,o);return e instanceof d&&e.add(i),i}}class Ts{constructor(){this.dirty=!0,this._results=[],this.changes=new Ss,this.length=0}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}[xt()](){return this._results[xt()]()}toString(){return this._results.toString()}reset(e){this._results=function e(t,n){void 0===n&&(n=t);for(let r=0;r<t.length;r++){let s=t[r];Array.isArray(s)?(n===t&&(n=t.slice(0,r)),e(s,n)):n!==t&&n.push(s)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class ys{}const vs=new Re("Application Initializer"),As=(()=>(class{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();bt(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}))(),Is=new Re("AppId");function Rs(){return`${Ns()}${Ns()}${Ns()}`}function Ns(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Os=new Re("Platform Initializer"),ws=new Re("Platform ID"),Ms=new Re("appBootstrapListener"),bs=(()=>(class{log(e){console.log(e)}warn(e){console.warn(e)}}))();function Ps(){throw new Error("Runtime compiler is not loaded")}const Ls=Ps,xs=Ps,Us=Ps,Ds=Ps,Ys=(()=>(class{constructor(){this.compileModuleSync=Ls,this.compileModuleAsync=xs,this.compileModuleAndAllComponentsSync=Us,this.compileModuleAndAllComponentsAsync=Ds}clearCache(){}clearCacheFor(e){}getModuleId(e){}}))();class Gs{}let ks,Fs;function Vs(){const e=Te.wtf;return!(!e||!(ks=e.trace)||(Fs=ks.events,0))}const Bs=Vs(),Hs=Bs?function(e,t=null){return Fs.createScope(e,t)}:(e,t)=>(function(e,t){return null}),Ks=Bs?function(e,t){return ks.leaveScope(e,t),t}:(e,t)=>t,js=(()=>Promise.resolve(0))();function Js(e){"undefined"==typeof Zone?js.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class qs{constructor({enableLongStackTrace:e=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ss(!1),this.onMicrotaskEmpty=new Ss(!1),this.onStable=new Ss(!1),this.onError=new Ss(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var t;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(t=this)._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,s,o,i)=>{try{return zs(t),e.invokeTask(r,s,o,i)}finally{Qs(t)}},onInvoke:(e,n,r,s,o,i,a)=>{try{return zs(t),e.invoke(r,s,o,i,a)}finally{Qs(t)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(t.hasPendingMicrotasks=s.microTask,Ws(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(qs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,$s,Xs,Xs);try{return s.runTask(o,t,n)}finally{s.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}function Xs(){}const $s={};function Ws(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function zs(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Qs(e){e._nesting--,Ws(e)}class Zs{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ss,this.onMicrotaskEmpty=new Ss,this.onStable=new Ss,this.onError=new Ss}run(e){return e()}runGuarded(e){return e()}runOutsideAngular(e){return e()}runTask(e){return e()}}const eo=(()=>(class{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qs.assertNotInAngularZone(),Js(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Js(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}))(),to=(()=>{class e{constructor(){this._applications=new Map,so.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return so.findTestabilityInTree(this,e,t)}}return e.ctorParameters=(()=>[]),e})();class no{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let ro,so=new no,oo=function(e){return e instanceof $t};const io=new Re("AllowMultipleToken");class ao{constructor(e,t){this.name=e,this.token=t}}function co(e,t,n=[]){const r=`Platform: ${t}`,s=new Re(r);return(t=[])=>{let o=lo();if(!o||o.injector.get(io,!1))if(e)e(n.concat(t).concat({provide:s,useValue:!0}));else{const e=n.concat(t).concat({provide:s,useValue:!0});!function(e){if(ro&&!ro.destroyed&&!ro.injector.get(io,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ro=e.get(uo);const t=e.get(Os,null);t&&t.forEach(e=>e())}(be.create({providers:e,name:r}))}return function(e){const t=lo();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(s)}}function lo(){return ro&&!ro.destroyed?ro:null}const uo=(()=>(class{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n="noop"===(s=t?t.ngZone:void 0)?new Zs:("zone.js"===s?void 0:s)||new qs({enableLongStackTrace:rt()}),r=[{provide:qs,useValue:n}];var s;return n.run(()=>{const t=be.create({providers:r,parent:this.injector,name:e.moduleType.name}),s=e.create(t),o=s.injector.get(et,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return s.onDestroy(()=>fo(this._modules,s)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{o.handleError(e)}})),function(e,t,n){try{const s=n();return bt(s)?s.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):s}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(o,n,()=>{const e=s.injector.get(As);return e.runInitializers(),e.donePromise.then(()=>(this._moduleDoBootstrap(s),s))})})}bootstrapModule(e,t=[]){const n=ho({},t);return function(e,t,n){return e.get(Gs).createCompiler([t]).compileModuleAsync(n)}(this.injector,n,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(po);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${Ee(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}))();function ho(e,t){return Array.isArray(t)?t.reduce(ho,e):Object.assign({},e,t)}const po=(()=>{class e{constructor(e,t,n,r,s,o){this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=rt(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const i=new T(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),a=new T(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{qs.assertNotInAngularZone(),Js(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{qs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];return w(r)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof T?e[0]:z(t)(j(e,n))}(i,a.pipe(e=>Q()(function(e,t){return function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,ne);return r.source=t,r.subjectFactory=n,r}}(se)(e))))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof Ht?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=oo(n)?null:this._injector.get(Wt),s=n.create(be.NULL,[],t||n.selector,r);s.onDestroy(()=>{this._unloadComponent(s)});const o=s.injector.get(eo,null);return o&&s.injector.get(to).registerApplication(s.location.nativeElement,o),this._loadComponent(s),rt()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),s}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const t=e._tickScope();try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1,Ks(t)}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;fo(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Ms,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),fo(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e._tickScope=Hs("ApplicationRef#tick()"),e})();function fo(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class go{}const Eo={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},mo=(()=>(class{constructor(e,t){this._compiler=e,this._config=t||Eo}load(e){return this._compiler instanceof Ys?this.loadFactory(e):this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n("zn8P")(t).then(e=>e[r]).then(e=>_o(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),s="NgFactory";return void 0===r&&(r="default",s=""),n("zn8P")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+s]).then(e=>_o(e,t,r))}}))();function _o(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}class Co{constructor(e,t){this.name=e,this.callback=t}}class So{constructor(e,t,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=e,t&&t instanceof To&&t.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class To extends So{constructor(e,t,n){super(e,t,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=e}addChild(e){e&&(this.childNodes.push(e),e.parent=this)}removeChild(e){const t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))}insertChildrenAfter(e,t){const n=this.childNodes.indexOf(e);-1!==n&&(this.childNodes.splice(n+1,0,...t),t.forEach(t=>{t.parent&&t.parent.removeChild(t),e.parent=this}))}insertBefore(e,t){const n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))}query(e){return this.queryAll(e)[0]||null}queryAll(e){const t=[];return function e(t,n,r){t.childNodes.forEach(t=>{t instanceof To&&(n(t)&&r.push(t),e(t,n,r))})}(this,e,t),t}queryAllNodes(e){const t=[];return function e(t,n,r){t instanceof To&&t.childNodes.forEach(t=>{n(t)&&r.push(t),t instanceof To&&e(t,n,r)})}(this,e,t),t}get children(){return this.childNodes.filter(e=>e instanceof To)}triggerEventHandler(e,t){this.listeners.forEach(n=>{n.name==e&&n.callback(t)})}}const yo=new Map,vo=function(e){return yo.get(e)||null};function Ao(e){yo.set(e.nativeNode,e)}const Io=co(null,"core",[{provide:ws,useValue:"unknown"},{provide:uo,deps:[be]},{provide:to,deps:[]},{provide:bs,deps:[]}]),Ro=new Re("LocaleId");function No(){return An}function Oo(){return In}function wo(e){return e||"en-US"}function Mo(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}const bo=(()=>(class{constructor(e){}}))();function Po(e,t,n,r,s,o){e|=1;const{matchedQueries:i,references:a,matchedQueryIds:c}=ir(t);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:i,matchedQueryIds:c,references:a,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?ur(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:s||Vn},provider:null,text:null,query:null,ngContent:null}}function Lo(e,t,n,r,s,o,i=[],a,c,l,u,h){l||(l=Vn);const{matchedQueries:d,references:p,matchedQueryIds:f}=ir(n);let g=null,E=null;o&&([g,E]=mr(o)),a=a||[];const m=new Array(a.length);for(let S=0;S<a.length;S++){const[e,t,n]=a[S],[r,s]=mr(t);let o=void 0,i=void 0;switch(15&e){case 4:i=n;break;case 1:case 8:o=n}m[S]={flags:e,ns:r,name:s,nonMinifiedName:s,securityContext:o,suffix:i}}c=c||[];const _=new Array(c.length);for(let S=0;S<c.length;S++){const[e,t]=c[S];_[S]={type:0,target:e,eventName:t,propName:null}}const C=(i=i||[]).map(([e,t])=>{const[n,r]=mr(e);return[n,r,t]});return h=function(e){if(e&&e.id===jn){const t=null!=e.encapsulation&&e.encapsulation!==$e.None||e.styles.length||Object.keys(e.data).length;e.id=t?`c${Xn++}`:Jn}return e&&e.id===Jn&&(e=null),e||null}(h),u&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:f,references:p,ngContentIndex:r,childCount:s,bindings:m,bindingFlags:_r(m),outputs:_,element:{ns:g,name:E,attrs:C,template:null,componentProvider:null,componentView:u||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:l||Vn},provider:null,text:null,query:null,ngContent:null}}function xo(e,t,n){const r=n.element,s=e.root.selectorOrNode,o=e.renderer;let i;if(e.parent||!s){i=r.name?o.createElement(r.name,r.ns):o.createComment("");const s=cr(e,t,n);s&&o.appendChild(s,i)}else i=o.selectRootElement(s,!!r.componentRendererType&&r.componentRendererType.encapsulation===$e.ShadowDom);if(r.attrs)for(let a=0;a<r.attrs.length;a++){const[e,t,n]=r.attrs[a];o.setAttribute(i,t,n,e)}return i}function Uo(e,t,n,r){for(let i=0;i<n.outputs.length;i++){const a=n.outputs[i],c=Do(e,n.nodeIndex,(o=a.eventName,(s=a.target)?`${s}:${o}`:o));let l=a.target,u=e;"component"===a.target&&(l=null,u=t);const h=u.renderer.listen(l||r,a.eventName,c);e.disposables[n.outputIndex+i]=h}var s,o}function Do(e,t,n){return r=>er(e,t,n,r)}function Yo(e,t,n,r){if(!Wn(e,t,n,r))return!1;const s=t.bindings[n],o=Dn(e,t.nodeIndex),i=o.renderElement,a=s.name;switch(15&s.flags){case 1:!function(e,t,n,r,s,o){const i=t.securityContext;let a=i?e.root.sanitizer.sanitize(i,o):o;a=null!=a?a.toString():null;const c=e.renderer;null!=o?c.setAttribute(n,s,a,r):c.removeAttribute(n,s,r)}(e,s,i,s.ns,a,r);break;case 2:!function(e,t,n,r){const s=e.renderer;r?s.addClass(t,n):s.removeClass(t,n)}(e,i,a,r);break;case 4:!function(e,t,n,r,s){let o=e.root.sanitizer.sanitize(It.STYLE,s);if(null!=o){o=o.toString();const e=t.suffix;null!=e&&(o+=e)}else o=null;const i=e.renderer;null!=o?i.setStyle(n,r,o):i.removeStyle(n,r)}(e,s,i,a,r);break;case 8:!function(e,t,n,r,s){const o=t.securityContext;let i=o?e.root.sanitizer.sanitize(o,s):s;e.renderer.setProperty(n,r,i)}(33554432&t.flags&&32&s.flags?o.componentView:e,s,i,a,r)}return!0}function Go(e){const t=e.def.nodeMatchedQueries;for(;e.parent&&or(e);){let n=e.parentNodeDef;e=e.parent;const r=n.nodeIndex+n.childCount;for(let s=0;s<=r;s++){const r=e.def.nodes[s];67108864&r.flags&&536870912&r.flags&&(r.query.filterId&t)===r.query.filterId&&kn(e,s).setDirty(),!(1&r.flags&&s+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(s+=r.childCount)}}if(134217728&e.def.nodeFlags)for(let n=0;n<e.def.nodes.length;n++){const t=e.def.nodes[n];134217728&t.flags&&536870912&t.flags&&kn(e,n).setDirty(),n+=t.childCount}}function ko(e,t){const n=kn(e,t.nodeIndex);if(!n.dirty)return;let r,s=void 0;if(67108864&t.flags){const n=t.parent.parent;s=Fo(e,n.nodeIndex,n.nodeIndex+n.childCount,t.query,[]),r=Yn(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(s=Fo(e,0,e.def.nodes.length-1,t.query,[]),r=e.component);n.reset(s);const o=t.query.bindings;let i=!1;for(let a=0;a<o.length;a++){const e=o[a];let t;switch(e.bindingType){case 0:t=n.first;break;case 1:t=n,i=!0}r[e.propName]=t}i&&n.notifyOnChanges()}function Fo(e,t,n,r,s){for(let o=t;o<=n;o++){const t=e.def.nodes[o],n=t.matchedQueries[r.id];if(null!=n&&s.push(Vo(e,t,n)),1&t.flags&&t.element.template&&(t.element.template.nodeMatchedQueries&r.filterId)===r.filterId){const n=Dn(e,o);if((t.childMatchedQueries&r.filterId)===r.filterId&&(Fo(e,o+1,o+t.childCount,r,s),o+=t.childCount),16777216&t.flags){const e=n.viewContainer._embeddedViews;for(let t=0;t<e.length;t++){const o=e[t],i=tr(o);i&&i===n&&Fo(o,0,o.def.nodes.length-1,r,s)}}const i=n.template._projectedViews;if(i)for(let e=0;e<i.length;e++){const t=i[e];Fo(t,0,t.def.nodes.length-1,r,s)}}(t.childMatchedQueries&r.filterId)!==r.filterId&&(o+=t.childCount)}return s}function Vo(e,t,n){if(null!=n)switch(n){case 1:return Dn(e,t.nodeIndex).renderElement;case 0:return new Zt(Dn(e,t.nodeIndex).renderElement);case 2:return Dn(e,t.nodeIndex).template;case 3:return Dn(e,t.nodeIndex).viewContainer;case 4:return Yn(e,t.nodeIndex).instance}}function Bo(e,t,n){const r=cr(e,t,n);r&&pr(e,n.ngContent.index,1,r,null,void 0)}function Ho(e,t,n){const r=new Array(n.length-1);for(let s=1;s<n.length;s++)r[s-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[s]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Ko(e,t,n){let r;const s=e.renderer;r=s.createText(n.text.prefix);const o=cr(e,t,n);return o&&s.appendChild(o,r),{renderText:r}}function jo(e,t){return(null!=e?e.toString():"")+t.suffix}function Jo(e,t,n,r){let s=0,o=0,i=0,a=0,c=0,l=null,u=null,h=!1,d=!1,p=null;for(let f=0;f<t.length;f++){const e=t[f];if(e.nodeIndex=f,e.parent=l,e.bindingIndex=s,e.outputIndex=o,e.renderParent=u,i|=e.flags,c|=e.matchedQueryIds,e.element){const t=e.element;t.publicProviders=l?l.element.publicProviders:Object.create(null),t.allProviders=t.publicProviders,h=!1,d=!1,e.element.template&&(c|=e.element.template.nodeMatchedQueries)}if(Xo(l,e,t.length),s+=e.bindings.length,o+=e.outputs.length,!u&&3&e.flags&&(p=e),20224&e.flags){h||(h=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);const t=0!=(32768&e.flags);0==(8192&e.flags)||t?l.element.publicProviders[Hn(e.provider.token)]=e:(d||(d=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[Hn(e.provider.token)]=e),t&&(l.element.componentProvider=e)}if(l?(l.childFlags|=e.flags,l.directChildFlags|=e.flags,l.childMatchedQueries|=e.matchedQueryIds,e.element&&e.element.template&&(l.childMatchedQueries|=e.element.template.nodeMatchedQueries)):a|=e.flags,e.childCount>0)l=e,qo(e)||(u=e);else for(;l&&f===l.nodeIndex+l.childCount;){const e=l.parent;e&&(e.childFlags|=l.childFlags,e.childMatchedQueries|=l.childMatchedQueries),u=(l=e)&&qo(l)?l.renderParent:l}}return{factory:null,nodeFlags:i,rootNodeFlags:a,nodeMatchedQueries:c,flags:e,nodes:t,updateDirectives:n||Vn,updateRenderer:r||Vn,handleEvent:(e,n,r,s)=>t[n].element.handleEvent(e,r,s),bindingCount:s,outputCount:o,lastRenderRootNode:p}}function qo(e){return 0!=(1&e.flags)&&null===e.element.name}function Xo(e,t,n){const r=t.element&&t.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${t.nodeIndex}!`)}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${t.nodeIndex}!`);if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${t.nodeIndex}!`);if(134217728&t.flags&&e)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${t.nodeIndex}!`)}if(t.childCount){const r=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=r&&t.nodeIndex+t.childCount>r)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${t.nodeIndex}!`)}}function $o(e,t,n,r){const s=Qo(e.root,e.renderer,e,t,n);return Zo(s,e.component,r),ei(s),s}function Wo(e,t,n){const r=Qo(e,e.renderer,null,null,t);return Zo(r,n,n),ei(r),r}function zo(e,t,n,r){const s=t.element.componentRendererType;let o;return o=s?e.root.rendererFactory.createRenderer(r,s):e.root.renderer,Qo(e.root,o,e,t.element.componentProvider,n)}function Qo(e,t,n,r,s){const o=new Array(s.nodes.length),i=s.outputCount?new Array(s.outputCount):null;return{def:s,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:e,renderer:t,oldValues:new Array(s.bindingCount),disposables:i,initIndex:-1}}function Zo(e,t,n){e.component=t,e.context=n}function ei(e){let t;sr(e)&&(t=Dn(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);const n=e.def,r=e.nodes;for(let s=0;s<n.nodes.length;s++){const o=n.nodes[s];let i;switch(Fn.setCurrentNode(e,s),201347067&o.flags){case 1:const n=xo(e,t,o);let a=void 0;if(33554432&o.flags){const t=ur(o.element.componentView);a=Fn.createComponentView(e,o,t,n)}Uo(e,a,o,n),i={renderElement:n,componentView:a,viewContainer:null,template:o.element.template?kr(e,o):void 0},16777216&o.flags&&(i.viewContainer=Ur(e,o,i));break;case 2:i=Ko(e,t,o);break;case 512:case 1024:case 2048:case 256:(i=r[s])||4096&o.flags||(i={instance:is(e,o)});break;case 16:i={instance:as(e,o)};break;case 16384:(i=r[s])||(i={instance:cs(e,o)}),32768&o.flags&&Zo(Dn(e,o.parent.nodeIndex).componentView,i.instance,i.instance);break;case 32:case 64:case 128:i={value:void 0};break;case 67108864:case 134217728:i=new Ts;break;case 8:Bo(e,t,o),i=void 0}r[s]=i}li(e,ci.CreateViewNodes),pi(e,201326592,268435456,0)}function ti(e){si(e),Fn.updateDirectives(e,1),ui(e,ci.CheckNoChanges),Fn.updateRenderer(e,1),li(e,ci.CheckNoChanges),e.state&=-97}function ni(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,Ln(e,0,256),si(e),Fn.updateDirectives(e,0),ui(e,ci.CheckAndUpdate),pi(e,67108864,536870912,0);let t=Ln(e,256,512);Es(e,2097152|(t?1048576:0)),Fn.updateRenderer(e,0),li(e,ci.CheckAndUpdate),pi(e,134217728,536870912,0),Es(e,8388608|((t=Ln(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,Ln(e,768,1024)}function ri(e,t,n,r,s,o,i,a,c,l,u,h,d){return 0===n?function(e,t,n,r,s,o,i,a,c,l,u,h){switch(201347067&t.flags){case 1:return function(e,t,n,r,s,o,i,a,c,l,u,h){const d=t.bindings.length;let p=!1;return d>0&&Yo(e,t,0,n)&&(p=!0),d>1&&Yo(e,t,1,r)&&(p=!0),d>2&&Yo(e,t,2,s)&&(p=!0),d>3&&Yo(e,t,3,o)&&(p=!0),d>4&&Yo(e,t,4,i)&&(p=!0),d>5&&Yo(e,t,5,a)&&(p=!0),d>6&&Yo(e,t,6,c)&&(p=!0),d>7&&Yo(e,t,7,l)&&(p=!0),d>8&&Yo(e,t,8,u)&&(p=!0),d>9&&Yo(e,t,9,h)&&(p=!0),p}(e,t,n,r,s,o,i,a,c,l,u,h);case 2:return function(e,t,n,r,s,o,i,a,c,l,u,h){let d=!1;const p=t.bindings,f=p.length;if(f>0&&Wn(e,t,0,n)&&(d=!0),f>1&&Wn(e,t,1,r)&&(d=!0),f>2&&Wn(e,t,2,s)&&(d=!0),f>3&&Wn(e,t,3,o)&&(d=!0),f>4&&Wn(e,t,4,i)&&(d=!0),f>5&&Wn(e,t,5,a)&&(d=!0),f>6&&Wn(e,t,6,c)&&(d=!0),f>7&&Wn(e,t,7,l)&&(d=!0),f>8&&Wn(e,t,8,u)&&(d=!0),f>9&&Wn(e,t,9,h)&&(d=!0),d){let d=t.text.prefix;f>0&&(d+=jo(n,p[0])),f>1&&(d+=jo(r,p[1])),f>2&&(d+=jo(s,p[2])),f>3&&(d+=jo(o,p[3])),f>4&&(d+=jo(i,p[4])),f>5&&(d+=jo(a,p[5])),f>6&&(d+=jo(c,p[6])),f>7&&(d+=jo(l,p[7])),f>8&&(d+=jo(u,p[8])),f>9&&(d+=jo(h,p[9]));const g=Un(e,t.nodeIndex).renderText;e.renderer.setValue(g,d)}return d}(e,t,n,r,s,o,i,a,c,l,u,h);case 16384:return function(e,t,n,r,s,o,i,a,c,l,u,h){const d=Yn(e,t.nodeIndex),p=d.instance;let f=!1,g=void 0;const E=t.bindings.length;return E>0&&$n(e,t,0,n)&&(f=!0,g=gs(e,d,t,0,n,g)),E>1&&$n(e,t,1,r)&&(f=!0,g=gs(e,d,t,1,r,g)),E>2&&$n(e,t,2,s)&&(f=!0,g=gs(e,d,t,2,s,g)),E>3&&$n(e,t,3,o)&&(f=!0,g=gs(e,d,t,3,o,g)),E>4&&$n(e,t,4,i)&&(f=!0,g=gs(e,d,t,4,i,g)),E>5&&$n(e,t,5,a)&&(f=!0,g=gs(e,d,t,5,a,g)),E>6&&$n(e,t,6,c)&&(f=!0,g=gs(e,d,t,6,c,g)),E>7&&$n(e,t,7,l)&&(f=!0,g=gs(e,d,t,7,l,g)),E>8&&$n(e,t,8,u)&&(f=!0,g=gs(e,d,t,8,u,g)),E>9&&$n(e,t,9,h)&&(f=!0,g=gs(e,d,t,9,h,g)),g&&p.ngOnChanges(g),65536&t.flags&&xn(e,256,t.nodeIndex)&&p.ngOnInit(),262144&t.flags&&p.ngDoCheck(),f}(e,t,n,r,s,o,i,a,c,l,u,h);case 32:case 64:case 128:return function(e,t,n,r,s,o,i,a,c,l,u,h){const d=t.bindings;let p=!1;const f=d.length;if(f>0&&Wn(e,t,0,n)&&(p=!0),f>1&&Wn(e,t,1,r)&&(p=!0),f>2&&Wn(e,t,2,s)&&(p=!0),f>3&&Wn(e,t,3,o)&&(p=!0),f>4&&Wn(e,t,4,i)&&(p=!0),f>5&&Wn(e,t,5,a)&&(p=!0),f>6&&Wn(e,t,6,c)&&(p=!0),f>7&&Wn(e,t,7,l)&&(p=!0),f>8&&Wn(e,t,8,u)&&(p=!0),f>9&&Wn(e,t,9,h)&&(p=!0),p){const p=Gn(e,t.nodeIndex);let g;switch(201347067&t.flags){case 32:g=new Array(d.length),f>0&&(g[0]=n),f>1&&(g[1]=r),f>2&&(g[2]=s),f>3&&(g[3]=o),f>4&&(g[4]=i),f>5&&(g[5]=a),f>6&&(g[6]=c),f>7&&(g[7]=l),f>8&&(g[8]=u),f>9&&(g[9]=h);break;case 64:g={},f>0&&(g[d[0].name]=n),f>1&&(g[d[1].name]=r),f>2&&(g[d[2].name]=s),f>3&&(g[d[3].name]=o),f>4&&(g[d[4].name]=i),f>5&&(g[d[5].name]=a),f>6&&(g[d[6].name]=c),f>7&&(g[d[7].name]=l),f>8&&(g[d[8].name]=u),f>9&&(g[d[9].name]=h);break;case 128:const e=n;switch(f){case 1:g=e.transform(n);break;case 2:g=e.transform(r);break;case 3:g=e.transform(r,s);break;case 4:g=e.transform(r,s,o);break;case 5:g=e.transform(r,s,o,i);break;case 6:g=e.transform(r,s,o,i,a);break;case 7:g=e.transform(r,s,o,i,a,c);break;case 8:g=e.transform(r,s,o,i,a,c,l);break;case 9:g=e.transform(r,s,o,i,a,c,l,u);break;case 10:g=e.transform(r,s,o,i,a,c,l,u,h)}}p.value=g}return p}(e,t,n,r,s,o,i,a,c,l,u,h);default:throw"unreachable"}}(e,t,r,s,o,i,a,c,l,u,h,d):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){let r=!1;for(let s=0;s<n.length;s++)Yo(e,t,s,n[s])&&(r=!0);return r}(e,t,n);case 2:return function(e,t,n){const r=t.bindings;let s=!1;for(let o=0;o<n.length;o++)Wn(e,t,o,n[o])&&(s=!0);if(s){let s="";for(let e=0;e<n.length;e++)s+=jo(n[e],r[e]);s=t.text.prefix+s;const o=Un(e,t.nodeIndex).renderText;e.renderer.setValue(o,s)}return s}(e,t,n);case 16384:return function(e,t,n){const r=Yn(e,t.nodeIndex),s=r.instance;let o=!1,i=void 0;for(let a=0;a<n.length;a++)$n(e,t,a,n[a])&&(o=!0,i=gs(e,r,t,a,n[a],i));return i&&s.ngOnChanges(i),65536&t.flags&&xn(e,256,t.nodeIndex)&&s.ngOnInit(),262144&t.flags&&s.ngDoCheck(),o}(e,t,n);case 32:case 64:case 128:return function(e,t,n){const r=t.bindings;let s=!1;for(let o=0;o<n.length;o++)Wn(e,t,o,n[o])&&(s=!0);if(s){const s=Gn(e,t.nodeIndex);let o;switch(201347067&t.flags){case 32:o=n;break;case 64:o={};for(let t=0;t<n.length;t++)o[r[t].name]=n[t];break;case 128:const e=n[0],s=n.slice(1);o=e.transform(...s)}s.value=o}return s}(e,t,n);default:throw"unreachable"}}(e,t,r)}function si(e){const t=e.def;if(4&t.nodeFlags)for(let n=0;n<t.nodes.length;n++){const r=t.nodes[n];if(4&r.flags){const t=Dn(e,n).template._projectedViews;if(t)for(let n=0;n<t.length;n++){const r=t[n];r.state|=32,Zn(r,e)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function oi(e,t,n,r,s,o,i,a,c,l,u,h,d){return 0===n?function(e,t,n,r,s,o,i,a,c,l,u,h){const d=t.bindings.length;d>0&&zn(e,t,0,n),d>1&&zn(e,t,1,r),d>2&&zn(e,t,2,s),d>3&&zn(e,t,3,o),d>4&&zn(e,t,4,i),d>5&&zn(e,t,5,a),d>6&&zn(e,t,6,c),d>7&&zn(e,t,7,l),d>8&&zn(e,t,8,u),d>9&&zn(e,t,9,h)}(e,t,r,s,o,i,a,c,l,u,h,d):function(e,t,n){for(let r=0;r<n.length;r++)zn(e,t,r,n[r])}(e,t,r),!1}function ii(e,t){if(kn(e,t.nodeIndex).dirty)throw Mn(Fn.createDebugContext(e,t.nodeIndex),`Query ${t.query.id} not dirty`,`Query ${t.query.id} dirty`,0!=(1&e.state))}function ai(e){if(!(128&e.state)){if(ui(e,ci.Destroy),li(e,ci.Destroy),Es(e,131072),e.disposables)for(let t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(!(16&e.state))return;const t=tr(e);if(t){const n=t.template._projectedViews;n&&(Mr(n,n.indexOf(e)),Fn.dirtyParentQueries(e))}}(e),e.renderer.destroyNode&&function(e){const t=e.def.nodes.length;for(let n=0;n<t;n++){const t=e.def.nodes[n];1&t.flags?e.renderer.destroyNode(Dn(e,n).renderElement):2&t.flags?e.renderer.destroyNode(Un(e,n).renderText):(67108864&t.flags||134217728&t.flags)&&kn(e,n).destroy()}}(e),sr(e)&&e.renderer.destroy(),e.state|=128}}const ci=function(){var e={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return e[e.CreateViewNodes]="CreateViewNodes",e[e.CheckNoChanges]="CheckNoChanges",e[e.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",e[e.Destroy]="Destroy",e}();function li(e,t){const n=e.def;if(33554432&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const s=n.nodes[r];33554432&s.flags?hi(Dn(e,r).componentView,t):0==(33554432&s.childFlags)&&(r+=s.childCount)}}function ui(e,t){const n=e.def;if(16777216&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const s=n.nodes[r];if(16777216&s.flags){const n=Dn(e,r).viewContainer._embeddedViews;for(let e=0;e<n.length;e++)hi(n[e],t)}else 0==(16777216&s.childFlags)&&(r+=s.childCount)}}function hi(e,t){const n=e.state;switch(t){case ci.CheckNoChanges:0==(128&n)&&(12==(12&n)?ti(e):64&n&&di(e,ci.CheckNoChangesProjectedViews));break;case ci.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?ti(e):64&n&&di(e,t));break;case ci.CheckAndUpdate:0==(128&n)&&(12==(12&n)?ni(e):64&n&&di(e,ci.CheckAndUpdateProjectedViews));break;case ci.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?ni(e):64&n&&di(e,t));break;case ci.Destroy:ai(e);break;case ci.CreateViewNodes:ei(e)}}function di(e,t){ui(e,t),li(e,t)}function pi(e,t,n,r){if(!(e.def.nodeFlags&t&&e.def.nodeFlags&n))return;const s=e.def.nodes.length;for(let o=0;o<s;o++){const s=e.def.nodes[o];if(s.flags&t&&s.flags&n)switch(Fn.setCurrentNode(e,s.nodeIndex),r){case 0:ko(e,s);break;case 1:ii(e,s)}s.childFlags&t&&s.childFlags&n||(o+=s.childCount)}}let fi=!1;function gi(e,t,n,r,s,o){const i=s.injector.get(nn);return Wo(mi(e,s,i,t,n),r,o)}function Ei(e,t,n,r,s,o){const i=s.injector.get(nn),a=mi(e,s,new $i(i),t,n),c=Ni(r);return qi(Li.create,Wo,null,[a,c,o])}function mi(e,t,n,r,s){const o=t.injector.get(Rt),i=t.injector.get(et),a=n.createRenderer(null,null);return{ngModule:t,injector:e,projectableNodes:r,selectorOrNode:s,sanitizer:o,rendererFactory:n,renderer:a,errorHandler:i}}function _i(e,t,n,r){const s=Ni(n);return qi(Li.create,$o,null,[e,t,s,r])}function Ci(e,t,n,r){return n=vi.get(t.element.componentProvider.provider.token)||Ni(n),qi(Li.create,zo,null,[e,t,n,r])}function Si(e,t,n,r){return Jr(e,t,n,function(e){const{hasOverrides:t,hasDeprecatedOverrides:n}=function(e){let t=!1,n=!1;return 0===Ti.size?{hasOverrides:t,hasDeprecatedOverrides:n}:(e.providers.forEach(e=>{const r=Ti.get(e.token);3840&e.flags&&r&&(t=!0,n=n||r.deprecatedBehavior)}),e.modules.forEach(e=>{yi.forEach((r,s)=>{fe(s).providedIn===e&&(t=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:t,hasDeprecatedOverrides:n})}(e);return t?(function(e){for(let t=0;t<e.providers.length;t++){const r=e.providers[t];n&&(r.flags|=4096);const s=Ti.get(r.token);s&&(r.flags=-3841&r.flags|s.flags,r.deps=ar(s.deps),r.value=s.value)}if(yi.size>0){let t=new Set(e.modules);yi.forEach((r,s)=>{if(t.has(fe(s).providedIn)){let t={token:s,flags:r.flags|(n?4096:0),deps:ar(r.deps),value:r.value,index:e.providers.length};e.providers.push(t),e.providersByKey[Hn(s)]=t}})}}(e=e.factory(()=>Vn)),e):e}(r))}const Ti=new Map,yi=new Map,vi=new Map;function Ai(e){let t;Ti.set(e.token,e),"function"==typeof e.token&&(t=fe(e.token))&&"function"==typeof t.providedIn&&yi.set(e.token,e)}function Ii(e,t){const n=ur(t.viewDefFactory),r=ur(n.nodes[0].element.componentView);vi.set(e,r)}function Ri(){Ti.clear(),yi.clear(),vi.clear()}function Ni(e){if(0===Ti.size)return e;const t=function(e){const t=[];let n=null;for(let r=0;r<e.nodes.length;r++){const s=e.nodes[r];1&s.flags&&(n=s),n&&3840&s.flags&&Ti.has(s.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory(()=>Vn);for(let r=0;r<t.length;r++)n(e,t[r]);return e;function n(e,t){for(let n=t+1;n<e.nodes.length;n++){const t=e.nodes[n];if(1&t.flags)return;if(3840&t.flags){const e=t.provider,n=Ti.get(e.token);n&&(t.flags=-3841&t.flags|n.flags,e.deps=ar(n.deps),e.value=n.value)}}}}function Oi(e,t,n,r,s,o,i,a,c,l,u,h,d){const p=e.def.nodes[t];return ri(e,p,n,r,s,o,i,a,c,l,u,h,d),224&p.flags?Gn(e,t).value:void 0}function wi(e,t,n,r,s,o,i,a,c,l,u,h,d){const p=e.def.nodes[t];return oi(e,p,n,r,s,o,i,a,c,l,u,h,d),224&p.flags?Gn(e,t).value:void 0}function Mi(e){return qi(Li.detectChanges,ni,null,[e])}function bi(e){return qi(Li.checkNoChanges,ti,null,[e])}function Pi(e){return qi(Li.destroy,ai,null,[e])}const Li=function(){var e={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return e[e.create]="create",e[e.detectChanges]="detectChanges",e[e.checkNoChanges]="checkNoChanges",e[e.destroy]="destroy",e[e.handleEvent]="handleEvent",e}();let xi,Ui,Di;function Yi(e,t){Ui=e,Di=t}function Gi(e,t,n,r){return Yi(e,t),qi(Li.handleEvent,e.def.handleEvent,null,[e,t,n,r])}function ki(e,t){if(128&e.state)throw Pn(Li[xi]);return Yi(e,Hi(e,0)),e.def.updateDirectives(function(e,n,r,...s){const o=e.def.nodes[n];return 0===t?Vi(e,o,r,s):Bi(e,o,r,s),16384&o.flags&&Yi(e,Hi(e,n)),224&o.flags?Gn(e,o.nodeIndex).value:void 0},e)}function Fi(e,t){if(128&e.state)throw Pn(Li[xi]);return Yi(e,Ki(e,0)),e.def.updateRenderer(function(e,n,r,...s){const o=e.def.nodes[n];return 0===t?Vi(e,o,r,s):Bi(e,o,r,s),3&o.flags&&Yi(e,Ki(e,n)),224&o.flags?Gn(e,o.nodeIndex).value:void 0},e)}function Vi(e,t,n,r){if(ri(e,t,n,...r)){const i=1===n?r[0]:r;if(16384&t.flags){const n={};for(let e=0;e<t.bindings.length;e++){const r=t.bindings[e],a=i[e];8&r.flags&&(n[(s=r.nonMinifiedName,o=void 0,o=s.replace(/[$@]/g,"_"),`ng-reflect-${s=o.replace(wt,(...e)=>"-"+e[1].toLowerCase())}`)]=Mt(a))}const r=t.parent,a=Dn(e,r.nodeIndex).renderElement;if(r.element.name)for(let t in n){const r=n[t];null!=r?e.renderer.setAttribute(a,t,r):e.renderer.removeAttribute(a,t)}else e.renderer.setValue(a,`bindings=${JSON.stringify(n,null,2)}`)}}var s,o}function Bi(e,t,n,r){oi(e,t,n,...r)}function Hi(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(16384&t.flags&&t.bindings&&t.bindings.length)return n}return null}function Ki(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(3&t.flags&&t.bindings&&t.bindings.length)return n}return null}class ji{constructor(e,t){this.view=e,this.nodeIndex=t,null==t&&(this.nodeIndex=t=0),this.nodeDef=e.def.nodes[t];let n=this.nodeDef,r=e;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=nr(r),r=r.parent;this.elDef=n,this.elView=r}get elOrCompView(){return Dn(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return Vr(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const e=[];if(this.elDef)for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e}get references(){const e={};if(this.elDef){Ji(this.elView,this.elDef,e);for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&Ji(this.elView,n,e),t+=n.childCount}}return e}get componentRenderElement(){const e=function(e){for(;e&&!sr(e);)e=e.parent;return e.parent?Dn(e.parent,nr(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?rr(this.view,this.nodeDef):rr(this.elView,this.elDef)}logError(e,...t){let n,r;2&this.nodeDef.flags?(n=this.view.def,r=this.nodeDef.nodeIndex):(n=this.elView.def,r=this.elDef.nodeIndex);const s=function(e,t){let n=-1;for(let r=0;r<=t;r++)3&e.nodes[r].flags&&n++;return n}(n,r);let o=-1;n.factory(()=>++o===s?e.error.bind(e,...t):Vn),o<s&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error(...t))}}function Ji(e,t,n){for(let r in t.references)n[r]=Vo(e,t,t.references[r])}function qi(e,t,n,r){const s=xi,o=Ui,i=Di;try{xi=e;const c=t.apply(n,r);return Ui=o,Di=i,xi=s,c}catch(a){if(ze(a)||!Ui)throw a;throw function(e,t){return e instanceof Error||(e=new Error(e.toString())),bn(e,t),e}(a,Xi())}}function Xi(){return Ui?new ji(Ui,Di):null}class $i{constructor(e){this.delegate=e}createRenderer(e,t){return new Wi(this.delegate.createRenderer(e,t))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class Wi{constructor(e){this.delegate=e,this.debugContextFactory=Xi,this.data=this.delegate.data}createDebugContext(e){return this.debugContextFactory(e)}destroyNode(e){!function(e){yo.delete(e.nativeNode)}(vo(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)}destroy(){this.delegate.destroy()}createElement(e,t){const n=this.delegate.createElement(e,t),r=this.createDebugContext(n);if(r){const t=new To(n,null,r);t.name=e,Ao(t)}return n}createComment(e){const t=this.delegate.createComment(e),n=this.createDebugContext(t);return n&&Ao(new So(t,null,n)),t}createText(e){const t=this.delegate.createText(e),n=this.createDebugContext(t);return n&&Ao(new So(t,null,n)),t}appendChild(e,t){const n=vo(e),r=vo(t);n&&r&&n instanceof To&&n.addChild(r),this.delegate.appendChild(e,t)}insertBefore(e,t,n){const r=vo(e),s=vo(t),o=vo(n);r&&s&&r instanceof To&&r.insertBefore(o,s),this.delegate.insertBefore(e,t,n)}removeChild(e,t){const n=vo(e),r=vo(t);n&&r&&n instanceof To&&n.removeChild(r),this.delegate.removeChild(e,t)}selectRootElement(e,t){const n=this.delegate.selectRootElement(e,t),r=Xi();return r&&Ao(new To(n,null,r)),n}setAttribute(e,t,n,r){const s=vo(e);s&&s instanceof To&&(s.attributes[r?r+":"+t:t]=n),this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){const r=vo(e);r&&r instanceof To&&(r.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)}addClass(e,t){const n=vo(e);n&&n instanceof To&&(n.classes[t]=!0),this.delegate.addClass(e,t)}removeClass(e,t){const n=vo(e);n&&n instanceof To&&(n.classes[t]=!1),this.delegate.removeClass(e,t)}setStyle(e,t,n,r){const s=vo(e);s&&s instanceof To&&(s.styles[t]=n),this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){const r=vo(e);r&&r instanceof To&&(r.styles[t]=null),this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){const r=vo(e);r&&r instanceof To&&(r.properties[t]=n),this.delegate.setProperty(e,t,n)}listen(e,t,n){if("string"!=typeof e){const r=vo(e);r&&r.listeners.push(new Co(t,n))}return this.delegate.listen(e,t,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setValue(e,t){return this.delegate.setValue(e,t)}}function zi(e,t,n){return new Qi(e,t,n)}class Qi extends zt{constructor(e,t,n){super(),this.moduleType=e,this._bootstrapComponents=t,this._ngModuleDefFactory=n}create(e){!function(){if(fi)return;fi=!0;const e=rt()?{setCurrentNode:Yi,createRootView:Ei,createEmbeddedView:_i,createComponentView:Ci,createNgModuleRef:Si,overrideProvider:Ai,overrideComponentView:Ii,clearOverrides:Ri,checkAndUpdateView:Mi,checkNoChangesView:bi,destroyView:Pi,createDebugContext:(e,t)=>new ji(e,t),handleEvent:Gi,updateDirectives:ki,updateRenderer:Fi}:{setCurrentNode:()=>{},createRootView:gi,createEmbeddedView:$o,createComponentView:zo,createNgModuleRef:Jr,overrideProvider:Vn,overrideComponentView:Vn,clearOverrides:Vn,checkAndUpdateView:ni,checkNoChangesView:ti,destroyView:ai,createDebugContext:(e,t)=>new ji(e,t),handleEvent:(e,t,n,r)=>e.def.handleEvent(e,t,n,r),updateDirectives:(e,t)=>e.def.updateDirectives(0===t?Oi:wi,e),updateRenderer:(e,t)=>e.def.updateRenderer(0===t?Oi:wi,e)};Fn.setCurrentNode=e.setCurrentNode,Fn.createRootView=e.createRootView,Fn.createEmbeddedView=e.createEmbeddedView,Fn.createComponentView=e.createComponentView,Fn.createNgModuleRef=e.createNgModuleRef,Fn.overrideProvider=e.overrideProvider,Fn.overrideComponentView=e.overrideComponentView,Fn.clearOverrides=e.clearOverrides,Fn.checkAndUpdateView=e.checkAndUpdateView,Fn.checkNoChangesView=e.checkNoChangesView,Fn.destroyView=e.destroyView,Fn.resolveDep=ps,Fn.createDebugContext=e.createDebugContext,Fn.handleEvent=e.handleEvent,Fn.updateDirectives=e.updateDirectives,Fn.updateRenderer=e.updateRenderer,Fn.dirtyParentQueries=Go}();const t=function(e){const t=Array.from(e.providers),n=Array.from(e.modules),r={};for(const s in e.providersByKey)r[s]=e.providersByKey[s];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:r}}(ur(this._ngModuleDefFactory));return Fn.createNgModuleRef(this.moduleType,e||be.NULL,this._bootstrapComponents,t)}}const Zi={production:!0,appId:"1771186eda20577",apiKey:"d254038aa187aa6d65ffd7a9c3bdeab1fc93f1a1"};class ea{}class ta{constructor(){this.title="comet-chat-angular"}}class na{}const ra=new Re("Location Initialized");class sa{}const oa=new Re("appBaseHref"),ia=(()=>{class e{constructor(t,n){this._subject=new Ss,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=e.stripTrailingSlash(aa(r)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+e.normalizeQueryParams(n))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,aa(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(t,n="",r=null){this._platformStrategy.pushState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+e.normalizeQueryParams(n)),r)}replaceState(t,n="",r=null){this._platformStrategy.replaceState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+e.normalizeQueryParams(n)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)})}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}static normalizeQueryParams(e){return e&&"?"!==e[0]?"?"+e:e}static joinWithSlash(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}static stripTrailingSlash(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}}return e})();function aa(e){return e.replace(/\/index.html$/,"")}const ca=(()=>(class extends sa{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",null!=t&&(this._baseHref=t)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=ia.joinWithSlash(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let s=this.prepareExternalUrl(n+ia.normalizeQueryParams(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,t,s)}replaceState(e,t,n,r){let s=this.prepareExternalUrl(n+ia.normalizeQueryParams(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}))(),la=(()=>(class extends sa{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return ia.joinWithSlash(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+ia.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const s=this.prepareExternalUrl(n+ia.normalizeQueryParams(r));this._platformLocation.pushState(e,t,s)}replaceState(e,t,n,r){const s=this.prepareExternalUrl(n+ia.normalizeQueryParams(r));this._platformLocation.replaceState(e,t,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}))(),ua=void 0;var ha=["en",[["a","p"],["AM","PM"],ua],[["AM","PM"],ua,ua],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ua,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ua,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ua,"{1} 'at' {0}",ua],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];const da={},pa=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),fa=new Re("UseV4Plurals");class ga{}const Ea=(()=>(class extends ga{constructor(e,t){super(),this.locale=e,this.deprecatedPluralFn=t}getPluralCategory(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):function(e){return function(e){const t=e.toLowerCase().replace(/_/g,"-");let n=da[t];if(n)return n;const r=t.split("-")[0];if(n=da[r])return n;if("en"===r)return ha;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[18]}(t||this.locale)(e)){case pa.Zero:return"zero";case pa.One:return"one";case pa.Two:return"two";case pa.Few:return"few";case pa.Many:return"many";default:return"other"}}}))();class ma{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}const _a=(()=>(class{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){rt()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ma(null,this._ngForOf,-1,-1),r),s=new Ca(e,n);t.push(s)}else if(null==r)this._viewContainer.remove(n);else{const s=this._viewContainer.get(n);this._viewContainer.move(s,r);const o=new Ca(e,s);t.push(o)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}))();class Ca{constructor(e,t){this.record=e,this.view=t}}const Sa=(()=>(class{constructor(e,t){this._viewContainer=e,this._context=new Ta,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ya("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ya("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateGuard_ngIf(e,t){return!0}}))();class Ta{constructor(){this.$implicit=null,this.ngIf=null}}function ya(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Ee(t)}'.`)}class va{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Aa{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const Ia=new Aa,Ra=new va,Na=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):Ut(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,Yt.wrap(this._latestValue)):(e&&this._subscribe(e),this._latestReturnedValue=this._latestValue,this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if(bt(t))return Ia;if(Pt(t))return Ra;throw Error(`InvalidPipeArgument: '${t}' for pipe '${Ee(e)}'`)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e})(),Oa=(()=>(class{}))(),wa=new Re("DocumentToken"),Ma=(()=>{class e{}return e.ngInjectableDef=pe({providedIn:"root",factory:()=>new ba(Ie(wa),window,Ie(et))}),e})();class ba{constructor(e,t,n){this.document=e,this.window=t,this.errorHandler=n,this.offset=(()=>[0,0])}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const n=this.document.querySelector(`#${e}`);if(n)return void this.scrollToElement(n);const r=this.document.querySelector(`[name='${e}']`);if(r)return void this.scrollToElement(r)}catch(t){this.errorHandler.handleError(t)}}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}const Pa=new T(e=>e.complete());function La(e){return e?function(e){return new T(t=>e.schedule(()=>t.complete()))}(e):Pa}function xa(e){const t=new T(t=>{t.next(e),t.complete()});return t._isScalar=!0,t.value=e,t}function Ua(...e){let t=e[e.length-1];switch(w(t)?e.pop():t=void 0,e.length){case 0:return La(t);case 1:return t?j(e,t):xa(e[0]);default:return j(e,t)}}class Da extends N{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new A;return this._value}next(e){super.next(this._value=e)}}function Ya(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}Ya.prototype=Object.create(Error.prototype);const Ga=Ya,ka={};class Fa{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Va(e,this.resultSelector))}}class Va extends V{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(ka),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++){const t=e[n];this.add(F(this,t,t,n))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n,r,s){const o=this.values,i=this.toRespond?o[n]===ka?--this.toRespond:this.toRespond:0;o[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function Ba(e){return new T(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?J(n):La()).subscribe(t)})}function Ha(){return z(1)}function Ka(e,t){return function(n){return n.lift(new ja(e,t))}}class ja{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Ja(e,this.predicate,this.thisArg))}}class Ja extends g{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}function qa(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}qa.prototype=Object.create(Error.prototype);const Xa=qa;function $a(e){return function(t){return 0===e?La():t.lift(new Wa(e))}}class Wa{constructor(e){if(this.total=e,this.total<0)throw new Xa}call(e,t){return t.subscribe(new za(e,this.total))}}class za extends g{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<n;s++){const s=t++%n;e.next(r[s])}}e.complete()}}function Qa(e,t,n){return function(r){return r.lift(new Za(e,t,n))}}class Za{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new ec(e,this.nextOrObserver,this.error,this.complete))}}class ec extends g{constructor(e,t,n,s){super(e),this._tapNext=_,this._tapError=_,this._tapComplete=_,this._tapError=n||_,this._tapComplete=s||_,r(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||_,this._tapError=t.error||_,this._tapComplete=t.complete||_)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}const tc=(e=function(){return new Ga})=>Qa({hasValue:!1,next(){this.hasValue=!0},complete(){if(!this.hasValue)throw e()}});function nc(e=null){return t=>t.lift(new rc(e))}class rc{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new sc(e,this.defaultValue))}}class sc extends g{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function oc(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Ka((t,n)=>e(t,n,r)):W,$a(1),n?nc(t):tc(()=>new Ga))}function ic(e){return function(t){const n=new ac(e),r=t.lift(n);return n.caught=r}}class ac{constructor(e){this.selector=e}call(e,t){return t.subscribe(new cc(e,this.selector,this.caught))}}class cc extends V{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new M(this,void 0,void 0);this.add(r),F(this,n,void 0,void 0,r)}}}function lc(e){return t=>0===e?La():t.lift(new uc(e))}class uc{constructor(e){if(this.total=e,this.total<0)throw new Xa}call(e,t){return t.subscribe(new hc(e,this.total))}}class hc extends g{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function dc(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Ka((t,n)=>e(t,n,r)):W,lc(1),n?nc(t):tc(()=>new Ga))}class pc{constructor(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}call(e,t){return t.subscribe(new fc(e,this.predicate,this.thisArg,this.source))}}class fc extends g{constructor(e,t,n,r){super(e),this.predicate=t,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(e){this.destination.next(e),this.destination.complete()}_next(e){let t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function gc(e,t){return"function"==typeof t?n=>n.pipe(gc((n,r)=>J(e(n,r)).pipe(B((e,s)=>t(n,e,r,s))))):t=>t.lift(new Ec(e))}class Ec{constructor(e){this.project=e}call(e,t){return t.subscribe(new mc(e,this.project))}}class mc extends V{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}_innerSub(e,t,n){const r=this.innerSubscription;r&&r.unsubscribe();const s=new M(this,void 0,void 0);this.destination.add(s),this.innerSubscription=F(this,e,t,n,s)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,n,r,s){this.destination.next(t)}}function _c(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Cc(e,t,n))}}class Cc{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new Sc(e,this.accumulator,this.seed,this.hasSeed))}}class Sc extends g{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Tc(e,t){return q(e,t,1)}class yc{constructor(e){this.callback=e}call(e,t){return t.subscribe(new vc(e,this.callback))}}class vc extends g{constructor(e,t){super(e),this.add(new d(t))}}let Ac=null;function Ic(){return Ac}class Rc{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(e){this._attrToPropMap=e}}class Nc extends Rc{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const t=this.createElement("div",document);if(null!=this.getStyle(t,"animationName"))this._animationPrefix="";else{const e=["Webkit","Moz","O","ms"];for(let n=0;n<e.length;n++)if(null!=this.getStyle(t,e[n]+"AnimationName")){this._animationPrefix="-"+e[n].toLowerCase()+"-";break}}const n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(n).forEach(e=>{null!=this.getStyle(t,e)&&(this._transitionEnd=n[e])})}catch(e){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(e){return e.getDistributedNodes()}resolveAndSetHref(e,t,n){e.href=null==n?t:t+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const Oc={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},wc=3,Mc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Pc=(()=>{if(Te.Node)return Te.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))}})();class Lc extends Nc{parse(e){throw new Error("parse not implemented")}static makeCurrent(){var e;e=new Lc,Ac||(Ac=e)}hasProperty(e,t){return t in e}setProperty(e,t,n){e[t]=n}getProperty(e,t){return e[t]}invoke(e,t,n){e[t](...n)}logError(e){window.console&&(console.error?console.error(e):console.log(e))}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return Oc}contains(e,t){return Pc.call(e,t)}querySelector(e,t){return e.querySelector(t)}querySelectorAll(e,t){return e.querySelectorAll(t)}on(e,t,n){e.addEventListener(t,n,!1)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}createMouseEvent(e){const t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t}createEvent(e){const t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t}preventDefault(e){e.preventDefault(),e.returnValue=!1}isPrevented(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue}getInnerHTML(e){return e.innerHTML}getTemplateContent(e){return"content"in e&&this.isTemplateElement(e)?e.content:null}getOuterHTML(e){return e.outerHTML}nodeName(e){return e.nodeName}nodeValue(e){return e.nodeValue}type(e){return e.type}content(e){return this.hasProperty(e,"content")?e.content:e}firstChild(e){return e.firstChild}nextSibling(e){return e.nextSibling}parentElement(e){return e.parentNode}childNodes(e){return e.childNodes}childNodesAsList(e){const t=e.childNodes,n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r];return n}clearNodes(e){for(;e.firstChild;)e.removeChild(e.firstChild)}appendChild(e,t){e.appendChild(t)}removeChild(e,t){e.removeChild(t)}replaceChild(e,t,n){e.replaceChild(t,n)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}insertBefore(e,t,n){e.insertBefore(n,t)}insertAllBefore(e,t,n){n.forEach(n=>e.insertBefore(n,t))}insertAfter(e,t,n){e.insertBefore(n,t.nextSibling)}setInnerHTML(e,t){e.innerHTML=t}getText(e){return e.textContent}setText(e,t){e.textContent=t}getValue(e){return e.value}setValue(e,t){e.value=t}getChecked(e){return e.checked}setChecked(e,t){e.checked=t}createComment(e){return this.getDefaultDocument().createComment(e)}createTemplate(e){const t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createElementNS(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)}createTextNode(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)}createScriptTag(e,t,n){const r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r}createStyleElement(e,t){const n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n}createShadowRoot(e){return e.createShadowRoot()}getShadowRoot(e){return e.shadowRoot}getHost(e){return e.host}clone(e){return e.cloneNode(!0)}getElementsByClassName(e,t){return e.getElementsByClassName(t)}getElementsByTagName(e,t){return e.getElementsByTagName(t)}classList(e){return Array.prototype.slice.call(e.classList,0)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}hasClass(e,t){return e.classList.contains(t)}setStyle(e,t,n){e.style[t]=n}removeStyle(e,t){e.style[t]=""}getStyle(e,t){return e.style[t]}hasStyle(e,t,n){const r=this.getStyle(e,t)||"";return n?r==n:r.length>0}tagName(e){return e.tagName}attributeMap(e){const t=new Map,n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r);t.set(e.name,e.value)}return t}hasAttribute(e,t){return e.hasAttribute(t)}hasAttributeNS(e,t,n){return e.hasAttributeNS(t,n)}getAttribute(e,t){return e.getAttribute(t)}getAttributeNS(e,t,n){return e.getAttributeNS(t,n)}setAttribute(e,t,n){e.setAttribute(t,n)}setAttributeNS(e,t,n,r){e.setAttributeNS(t,n,r)}removeAttribute(e,t){e.removeAttribute(t)}removeAttributeNS(e,t,n){e.removeAttributeNS(t,n)}templateAwareRoot(e){return this.isTemplateElement(e)?this.content(e):e}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(e){return e.title}setTitle(e,t){e.title=t||""}elementMatches(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))}isTemplateElement(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName}isTextNode(e){return e.nodeType===Node.TEXT_NODE}isCommentNode(e){return e.nodeType===Node.COMMENT_NODE}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}hasShadowRoot(e){return null!=e.shadowRoot&&e instanceof HTMLElement}isShadowRoot(e){return e instanceof DocumentFragment}importIntoDoc(e){return document.importNode(this.templateAwareRoot(e),!0)}adoptNode(e){return document.adoptNode(e)}getHref(e){return e.getAttribute("href")}getEventKey(e){let t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),e.location===wc&&bc.hasOwnProperty(t)&&(t=bc[t]))}return Mc[t]||t}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=Uc||(Uc=document.querySelector("base"))?Uc.getAttribute("href"):null;return null==t?null:(n=t,xc||(xc=document.createElement("a")),xc.setAttribute("href",n),"/"===xc.pathname.charAt(0)?xc.pathname:"/"+xc.pathname);var n}resetBaseElement(){Uc=null}getUserAgent(){return window.navigator.userAgent}setData(e,t,n){this.setAttribute(e,"data-"+t,n)}getData(e,t){return this.getAttribute(e,"data-"+t)}getComputedStyle(e){return getComputedStyle(e)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,s]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,e)}setCookie(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)}}let xc,Uc=null;function Dc(){return!!window.history.pushState}const Yc=(()=>{class e extends na{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=Ic().getLocation(),this._history=Ic().getHistory()}getBaseHrefFromDOM(){return Ic().getBaseHref(this._doc)}onPopState(e){Ic().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){Ic().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){Dc()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){Dc()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.ctorParameters=(()=>[{type:void 0,decorators:[{type:ae,args:[wa]}]}]),e})(),Gc=new Re("TRANSITION_ID"),kc=[{provide:vs,useFactory:function(e,t,n){return()=>{n.get(As).donePromise.then(()=>{const n=Ic();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter(t=>n.getAttribute(t,"ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[Gc,wa,be],multi:!0}];class Fc{static init(){var e;e=new Fc,so=e}addToWindow(e){Te.getAngularTestability=((t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r}),Te.getAllAngularTestabilities=(()=>e.getAllTestabilities()),Te.getAllAngularRootElements=(()=>e.getAllRootElements()),Te.frameworkStabilizers||(Te.frameworkStabilizers=[]),Te.frameworkStabilizers.push(e=>{const t=Te.getAllAngularTestabilities();let n=t.length,r=!1;const s=function(t){r=r||t,0==--n&&e(r)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?Ic().isShadowRoot(t)?this.findTestabilityInTree(e,Ic().getHost(t),!0):this.findTestabilityInTree(e,Ic().parentElement(t),!0):null}}function Vc(e,t){"undefined"!=typeof COMPILED&&COMPILED||((Te.ng=Te.ng||{})[e]=t)}const Bc=(()=>({ApplicationRef:po,NgZone:qs}))();function Hc(e){return vo(e)}const Kc=new Re("EventManagerPlugins"),jc=(()=>(class{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}))();class Jc{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=Ic().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}const qc=(()=>(class{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}))(),Xc=(()=>(class extends qc{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement("style");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>Ic().remove(e))}}))(),$c={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Wc=/%COMP%/g,zc="_nghost-%COMP%",Qc="_ngcontent-%COMP%";function Zc(e,t,n){for(let r=0;r<t.length;r++){let s=t[r];Array.isArray(s)?Zc(e,s,n):(s=s.replace(Wc,e),n.push(s))}return n}function el(e){return t=>{!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}const tl=(()=>(class{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new nl(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case $e.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new ol(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case $e.Native:case $e.ShadowDom:return new il(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=Zc(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}))();class nl{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS($c[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=`${r}:${t}`;const s=$c[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=$c[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&rn.DashCase?e.style.setProperty(t,n,r&rn.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&rn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){sl(t,"property"),e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return sl(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,el(n)):this.eventManager.addEventListener(e,t,el(n))}}const rl=(()=>"@".charCodeAt(0))();function sl(e,t){if(e.charCodeAt(0)===rl)throw new Error(`Found the synthetic ${t} ${e}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class ol extends nl{constructor(e,t,n,r){super(e),this.component=n;const s=Zc(r+"-"+n.id,n.styles,[]);t.addStyles(s),this.contentAttr=Qc.replace(Wc,r+"-"+n.id),this.hostAttr=zc.replace(Wc,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class il extends nl{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===$e.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const s=Zc(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const e=document.createElement("style");e.textContent=s[o],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}const al=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e})(),cl=al("addEventListener"),ll=al("removeEventListener"),ul={},hl="__zone_symbol__propagationStopped",dl=(()=>{const e="undefined"!=typeof Zone&&Zone[al("BLACK_LISTED_EVENTS")];if(e){const t={};return e.forEach(e=>{t[e]=e}),t}})(),pl=function(e){return!!dl&&dl.hasOwnProperty(e)},fl=function(e){const t=ul[e.type];if(!t)return;const n=this[t];if(!n)return;const r=[e];if(1===n.length){const e=n[0];return e.zone!==Zone.current?e.zone.run(e.handler,this,r):e.handler.apply(this,r)}{const t=n.slice();for(let n=0;n<t.length&&!0!==e[hl];n++){const e=t[n];e.zone!==Zone.current?e.zone.run(e.handler,this,r):e.handler.apply(this,r)}}},gl=(()=>(class extends Jc{constructor(e,t,n){super(e),this.ngZone=t,n&&function(e){return"server"===e}(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype.__zone_symbol__stopImmediatePropagation)return;const e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[hl]=!0),e&&e.apply(this,arguments)}}supports(e){return!0}addEventListener(e,t,n){let r=n;if(!e[cl]||qs.isInAngularZone()&&!pl(t))e.addEventListener(t,r,!1);else{let n=ul[t];n||(n=ul[t]=al("ANGULAR"+t+"FALSE"));let s=e[n];const o=s&&s.length>0;s||(s=e[n]=[]);const i=pl(t)?Zone.root:Zone.current;if(0===s.length)s.push({zone:i,handler:r});else{let e=!1;for(let t=0;t<s.length;t++)if(s[t].handler===r){e=!0;break}e||s.push({zone:i,handler:r})}o||e[cl](t,fl,!1)}return()=>this.removeEventListener(e,t,r)}removeEventListener(e,t,n){let r=e[ll];if(!r)return e.removeEventListener.apply(e,[t,n,!1]);let s=ul[t],o=s&&e[s];if(!o)return e.removeEventListener.apply(e,[t,n,!1]);let i=!1;for(let a=0;a<o.length;a++)if(o[a].handler===n){i=!0,o.splice(a,1);break}i?0===o.length&&r.apply(e,[t,fl,!1]):e.removeEventListener.apply(e,[t,n,!1])}}))(),El={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},ml=new Re("HammerGestureConfig"),_l=new Re("HammerLoader"),Cl=(()=>(class{constructor(){this.events=[],this.overrides={}}buildHammer(e){const t=new Hammer(e,this.options);t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0});for(const n in this.overrides)t.get(n).set(this.overrides[n]);return t}}))(),Sl=(()=>(class extends Jc{constructor(e,t,n,r){super(e),this._config=t,this.console=n,this.loader=r}supports(e){return!(!El.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${e}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(e,t,n){const r=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){let r=!1,s=()=>{r=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(s=(()=>{}));r||(s=this.addEventListener(e,t,n))}).catch(()=>{this.console.warn(`The "${t}" event cannot be bound because the custom `+"Hammer.JS loader failed."),s=(()=>{})}),()=>{s()}}return r.runOutsideAngular(()=>{const s=this._config.buildHammer(e),o=function(e){r.runGuarded(function(){n(e)})};return s.on(t,o),()=>{s.off(t,o),"function"==typeof s.destroy&&s.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}}))(),Tl=["alt","control","meta","shift"],yl={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},vl=(()=>{class e extends Jc{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const s=e.parseEventName(n),o=e.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ic().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=e._normalizeKey(n.pop());let o="";if(Tl.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),o+=e+".")}),o+=s,0!=n.length||0===s.length)return null;const i={};return i.domEventName=r,i.fullKey=o,i}static getEventFullKey(e){let t="",n=Ic().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Tl.forEach(r=>{r!=n&&(0,yl[r])(e)&&(t+=r+".")}),t+=n}static eventCallback(t,n,r){return s=>{e.getEventFullKey(s)===t&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e})();class Al{}const Il=(()=>(class extends Al{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case It.NONE:return t;case It.HTML:return t instanceof Nl?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){let n=null;try{vt=vt||new st(e);let r=t?String(t):"";n=vt.getInertBodyElement(r);let s=5,o=r;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,r=o,o=n.innerHTML,n=vt.getInertBodyElement(r)}while(r!==o);const i=new Ct,a=i.sanitizeChildren(At(n)||n);return rt()&&i.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const e=At(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}(this._doc,String(t)));case It.STYLE:return t instanceof Ol?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";const t=e.match(Ot);return t&&at(t[1])===t[1]||e.match(Nt)&&function(e){let t=!0,n=!0;for(let r=0;r<e.length;r++){const s=e.charAt(r);"'"===s&&n?t=!t:'"'===s&&t&&(n=!n)}return t&&n}(e)?e:(rt()&&console.warn(`WARNING: sanitizing unsafe style value ${e} (see http://g.co/ng/security#xss).`),"unsafe")}(t));case It.SCRIPT:if(t instanceof wl)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case It.URL:return t instanceof bl||t instanceof Ml?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),at(String(t)));case It.RESOURCE_URL:if(t instanceof bl)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(e,t){if(e instanceof Rl)throw new Error(`Required a safe ${t}, got a ${e.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(e){return new Nl(e)}bypassSecurityTrustStyle(e){return new Ol(e)}bypassSecurityTrustScript(e){return new wl(e)}bypassSecurityTrustUrl(e){return new Ml(e)}bypassSecurityTrustResourceUrl(e){return new bl(e)}}))();class Rl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class Nl extends Rl{getTypeName(){return"HTML"}}class Ol extends Rl{getTypeName(){return"Style"}}class wl extends Rl{getTypeName(){return"Script"}}class Ml extends Rl{getTypeName(){return"URL"}}class bl extends Rl{getTypeName(){return"ResourceURL"}}const Pl=co(Io,"browser",[{provide:ws,useValue:"browser"},{provide:Os,useValue:function(){Lc.makeCurrent(),Fc.init()},multi:!0},{provide:na,useClass:Yc,deps:[wa]},{provide:wa,useFactory:function(){return document},deps:[]}]);function Ll(){return new et}const xl=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:Is,useValue:t.appId},{provide:Gc,useExisting:Is},kc]}}}return e})();"undefined"!=typeof window&&window;class Ul{constructor(e,t){this.id=e,this.url=t}}class Dl extends Ul{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Yl extends Ul{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gl extends Ul{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kl extends Ul{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Fl extends Ul{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vl extends Ul{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bl extends Ul{constructor(e,t,n,r,s){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Hl extends Ul{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kl extends Ul{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Jl{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ql{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xl{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $l{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zl{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ql=(()=>(class{}))(),Zl="primary";class eu{constructor(e){this.params=e||{}}has(e){return this.params.hasOwnProperty(e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function tu(e){return new eu(e)}const nu="ngNavigationCancelingError";function ru(e){const t=Error("NavigationCancelingError: "+e);return t[nu]=!0,t}function su(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const s={};for(let o=0;o<r.length;o++){const t=r[o],n=e[o];if(t.startsWith(":"))s[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:s}}class ou{constructor(e,t){this.routes=e,this.module=t}}function iu(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];au(r,cu(t,r))}}function au(e,t){if(!e)throw new Error(`\n      Invalid configuration of route '${t}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${t}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&e.outlet!==Zl)throw new Error(`Invalid configuration of route '${t}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${t}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${t}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${t}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${t}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${t}': routes must have either a path or a matcher specified`);if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${t}': path cannot start with a slash`);if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error(`Invalid configuration of route '{path: "${t}", redirectTo: "${e.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error(`Invalid configuration of route '${t}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&iu(e.children,t)}function cu(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function lu(e){const t=e.children&&e.children.map(lu),n=t?Object.assign({},e,{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Zl&&(n.component=Ql),n}function uu(e,t){const n=Object.keys(e),r=Object.keys(t);if(!n||!r||n.length!=r.length)return!1;let s;for(let o=0;o<n.length;o++)if(e[s=n[o]]!==t[s])return!1;return!0}function hu(e){return Array.prototype.concat.apply([],e)}function du(e){return e.length>0?e[e.length-1]:null}function pu(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function fu(e){return Pt(e)?e:bt(e)?J(Promise.resolve(e)):Ua(e)}function gu(e,t,n){return n?function(e,t){return uu(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!Cu(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>t[n]===e[n])}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,s){if(n.segments.length>s.length){return!!Cu(n.segments.slice(0,s.length),s)&&!r.hasChildren()}if(n.segments.length===s.length){if(!Cu(n.segments,s))return!1;for(const t in r.children){if(!n.children[t])return!1;if(!e(n.children[t],r.children[t]))return!1}return!0}{const e=s.slice(0,n.segments.length),o=s.slice(n.segments.length);return!!Cu(n.segments,e)&&!!n.children[Zl]&&t(n.children[Zl],r,o)}}(t,n,n.segments)}(e.root,t.root)}class Eu{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tu(this.queryParams)),this._queryParamMap}toString(){return vu.serialize(this)}}class mu{constructor(e,t){this.segments=e,this.children=t,this.parent=null,pu(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Au(this)}}class _u{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=tu(this.parameters)),this._parameterMap}toString(){return Mu(this)}}function Cu(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}function Su(e,t){let n=[];return pu(e.children,(e,r)=>{r===Zl&&(n=n.concat(t(e,r)))}),pu(e.children,(e,r)=>{r!==Zl&&(n=n.concat(t(e,r)))}),n}class Tu{}class yu{parse(e){const t=new Uu(e);return new Eu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`${`/${function e(t,n){if(!t.hasChildren())return Au(t);if(n){const n=t.children[Zl]?e(t.children[Zl],!1):"",r=[];return pu(t.children,(t,n)=>{n!==Zl&&r.push(`${n}:${e(t,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=Su(t,(n,r)=>r===Zl?[e(t.children[Zl],!1)]:[`${r}:${e(n,!1)}`]);return`${Au(t)}/(${n.join("//")})`}}(e.root,!0)}`}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${Ru(t)}=${Ru(e)}`).join("&"):`${Ru(t)}=${Ru(n)}`});return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const vu=new yu;function Au(e){return e.segments.map(e=>Mu(e)).join("/")}function Iu(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ru(e){return Iu(e).replace(/%3B/gi,";")}function Nu(e){return Iu(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ou(e){return decodeURIComponent(e)}function wu(e){return Ou(e.replace(/\+/g,"%20"))}function Mu(e){return`${Nu(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${Nu(e)}=${Nu(t[e])}`).join("")}`;var t}const bu=/^[^\/()?;=#]+/;function Pu(e){const t=e.match(bu);return t?t[0]:""}const Lu=/^[^=?&#]+/,xu=/^[^?&#]+/;class Uu{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mu([],{}):new mu([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[Zl]=new mu(e,t)),n}parseSegment(){const e=Pu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new _u(Ou(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Pu(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=Pu(this.remaining);e&&this.capture(n=e)}e[Ou(t)]=Ou(n)}parseQueryParam(e){const t=function(e){const t=e.match(Lu);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(xu);return t?t[0]:""}(this.remaining);e&&this.capture(n=e)}const r=wu(t),s=wu(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(e[r]=t=[t]),t.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Pu(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s=void 0;n.indexOf(":")>-1?(s=n.substr(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Zl);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Zl]:new mu([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Du{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Yu(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=Yu(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Gu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return Gu(e,this._root).map(e=>e.value)}}function Yu(e,t){if(e===t.value)return t;for(const n of t.children){const t=Yu(e,n);if(t)return t}return null}function Gu(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Gu(e,n);if(r.length)return r.unshift(t),r}return[]}class ku{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Fu(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Vu extends Du{constructor(e,t){super(e),this.snapshot=t,qu(this,e)}toString(){return this.snapshot.toString()}}function Bu(e,t){const n=function(e,t){const n=new ju([],{},{},"",{},Zl,t,null,e.root,-1,{});return new Ju("",new ku(n,[]))}(e,t),r=new Da([new _u("",{})]),s=new Da({}),o=new Da({}),i=new Da({}),a=new Da(""),c=new Hu(r,s,i,a,o,Zl,t,n.root);return c.snapshot=n.root,new Vu(new ku(c,[]),n)}class Hu{constructor(e,t,n,r,s,o,i,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=i,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(B(e=>tu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(B(e=>tu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ku(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign({},e.params,t.params),data:Object.assign({},e.data,t.data),resolve:Object.assign({},e.resolve,t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ju{constructor(e,t,n,r,s,o,i,a,c,l,u){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=i,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=tu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ju extends Du{constructor(e,t){super(t),this.url=e,qu(this,t)}toString(){return Xu(this._root)}}function qu(e,t){t.value._routerState=e,t.children.forEach(t=>qu(e,t))}function Xu(e){const t=e.children.length>0?` { ${e.children.map(Xu).join(", ")} } `:"";return`${e.value}${t}`}function $u(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,uu(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),uu(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!uu(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),uu(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Wu(e,t){var n,r;return uu(e.params,t.params)&&Cu(n=e.url,r=t.url)&&n.every((e,t)=>uu(e.parameters,r[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||Wu(e.parent,t.parent))}function zu(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Qu(e,t,n,r,s){let o={};return r&&pu(r,(e,t)=>{o[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new Eu(n.root===e?t:function e(t,n,r){const s={};return pu(t.children,(t,o)=>{s[o]=t===n?r:e(t,n,r)}),new mu(t.segments,s)}(n.root,e,t),o,s)}class Zu{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&zu(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(e=>"object"==typeof e&&null!=e&&e.outlets);if(r&&r!==du(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class eh{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function th(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets[Zl]:`${e}`}function nh(e,t,n){if(e||(e=new mu([],{})),0===e.segments.length&&e.hasChildren())return rh(e,t,n);const r=function(e,t,n){let r=0,s=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(r>=n.length)return o;const t=e.segments[s],i=th(n[r]),a=r<n.length-1?n[r+1]:null;if(s>0&&void 0===i)break;if(i&&a&&"object"==typeof a&&void 0===a.outlets){if(!ah(i,a,t))return o;r+=2}else{if(!ah(i,{},t))return o;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(e,t,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new mu(e.segments.slice(0,r.pathIndex),{});return t.children[Zl]=new mu(e.segments.slice(r.pathIndex),e.children),rh(t,0,s)}return r.match&&0===s.length?new mu(e.segments,{}):r.match&&!e.hasChildren()?sh(e,t,n):r.match?rh(e,0,s):sh(e,t,n)}function rh(e,t,n){if(0===n.length)return new mu(e.segments,{});{const r=function(e){return"object"!=typeof e[0]?{[Zl]:e}:void 0===e[0].outlets?{[Zl]:e}:e[0].outlets}(n),s={};return pu(r,(n,r)=>{null!==n&&(s[r]=nh(e.children[r],t,n))}),pu(e.children,(e,t)=>{void 0===r[t]&&(s[t]=e)}),new mu(e.segments,s)}}function sh(e,t,n){const r=e.segments.slice(0,t);let s=0;for(;s<n.length;){if("object"==typeof n[s]&&void 0!==n[s].outlets){const e=oh(n[s].outlets);return new mu(r,e)}if(0===s&&zu(n[0])){r.push(new _u(e.segments[t].path,n[0])),s++;continue}const o=th(n[s]),i=s<n.length-1?n[s+1]:null;o&&i&&zu(i)?(r.push(new _u(o,ih(i))),s+=2):(r.push(new _u(o,{})),s++)}return new mu(r,{})}function oh(e){const t={};return pu(e,(e,n)=>{null!==e&&(t[n]=sh(new mu([],{}),0,e))}),t}function ih(e){const t={};return pu(e,(e,n)=>t[n]=`${e}`),t}function ah(e,t,n){return e==n.path&&uu(t,n.parameters)}const ch=(e,t,n)=>B(r=>(new lh(t,r.targetRouterState,r.currentRouterState,n).activate(e),r));class lh{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),$u(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Fu(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),pu(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet);if(n){const r=Fu(e),s=e.value.component?n.children:t;pu(r,(e,t)=>this.deactivateRouteAndItsChildren(e,s)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(e,t,n){const r=Fu(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new Wl(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Xl(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if($u(r),r===s)if(r.component){const s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),uh(e.route)}else{const n=function(e){for(let t=r.snapshot.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(),s=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=s,t.outlet&&t.outlet.activateWith(r,s),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function uh(e){$u(e.value),e.children.forEach(uh)}function hh(e){return"function"==typeof e}function dh(e){return e instanceof Eu}class ph{constructor(e){this.segmentGroup=e||null}}class fh{constructor(e){this.urlTree=e}}function gh(e){return new T(t=>t.error(new ph(e)))}function Eh(e){return new T(t=>t.error(new fh(e)))}function mh(e){return new T(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class _h{constructor(e,t,n,r,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(Wt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Zl).pipe(B(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(ic(e=>{if(e instanceof fh)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof ph)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Zl).pipe(B(t=>this.createUrlTree(t,e.queryParams,e.fragment))).pipe(ic(e=>{if(e instanceof ph)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new mu([],{[Zl]:e}):e;return new Eu(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(B(e=>new mu([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){return function(e,t){if(0===Object.keys(e).length)return Ua({});const n=[],r=[],s={};return pu(e,(e,o)=>{const i=t(o,e).pipe(B(e=>s[o]=e));o===Zl?n.push(i):r.push(i)}),Ua.apply(null,n.concat(r)).pipe(Ha(),oc(),B(()=>s))}(n.children,(n,r)=>this.expandSegmentGroup(e,t,r,n))}expandSegment(e,t,n,r,s,o){return Ua(...n).pipe(B(i=>this.expandSegmentAgainstRoute(e,t,n,i,r,s,o).pipe(ic(e=>{if(e instanceof ph)return Ua(null);throw e}))),Ha(),dc(e=>!!e),ic((e,n)=>{if(e instanceof Ga||"EmptyError"===e.name){if(this.noLeftoversInUrl(t,r,s))return Ua(new mu([],{}));throw new ph(t)}throw e}))}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}expandSegmentAgainstRoute(e,t,n,r,s,o,i){return yh(r)!==o?gh(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s):i&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o):gh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Eh(s):this.lineralizeSegments(n,s).pipe(q(n=>{const s=new mu(n,{});return this.expandSegment(e,s,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o){const{matched:i,consumedSegments:a,lastChild:c,positionalParamSegments:l}=Ch(t,r,s);if(!i)return gh(t);const u=this.applyRedirectCommands(a,r.redirectTo,l);return r.redirectTo.startsWith("/")?Eh(u):this.lineralizeSegments(r,u).pipe(q(r=>this.expandSegment(e,t,n,r.concat(s.slice(c)),o,!1)))}matchSegmentAgainstRoute(e,t,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(B(e=>(n._loadedConfig=e,new mu(r,{})))):Ua(new mu(r,{}));const{matched:s,consumedSegments:o,lastChild:i}=Ch(t,n,r);if(!s)return gh(t);const a=r.slice(i);return this.getChildConfig(e,n,r).pipe(q(e=>{const n=e.module,r=e.routes,{segmentGroup:s,slicedSegments:i}=function(e,t,n,r){return n.length>0&&function(e,t,n){return r.some(n=>Th(e,t,n)&&yh(n)!==Zl)}(e,n)?{segmentGroup:Sh(new mu(t,function(e,t){const n={};n[Zl]=t;for(const r of e)""===r.path&&yh(r)!==Zl&&(n[yh(r)]=new mu([],{}));return n}(r,new mu(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return r.some(n=>Th(e,t,n))}(e,n)?{segmentGroup:Sh(new mu(e.segments,function(e,t,n,r){const s={};for(const o of n)Th(e,t,o)&&!r[yh(o)]&&(s[yh(o)]=new mu([],{}));return Object.assign({},r,s)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,o,a,r);return 0===i.length&&s.hasChildren()?this.expandChildren(n,r,s).pipe(B(e=>new mu(o,e))):0===r.length&&0===i.length?Ua(new mu(o,{})):this.expandSegment(n,s,r,i,Zl,!0).pipe(B(e=>new mu(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?Ua(new ou(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Ua(t._loadedConfig):function(e,t,n){const r=t.canLoad;return r&&0!==r.length?J(r).pipe(B(r=>{const s=e.get(r);let o;if(function(e){return e&&hh(e.canLoad)}(s))o=s.canLoad(t,n);else{if(!hh(s))throw new Error("Invalid CanLoad guard");o=s(t,n)}return fu(o)})).pipe(Ha(),(s=(e=>!0===e),e=>e.lift(new pc(s,void 0,e)))):Ua(!0);var s}(e.injector,t,n).pipe(q(n=>n?this.configLoader.load(e.injector,t).pipe(B(e=>(t._loadedConfig=e,e))):function(e){return new T(t=>t.error(ru(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):Ua(new ou([],e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Ua(n);if(r.numberOfChildren>1||!r.children[Zl])return mh(e.redirectTo);r=r.children[Zl]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const s=this.createSegmentGroup(e,t.root,n,r);return new Eu(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return pu(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const s=e.substring(1);n[r]=t[s]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const s=this.createSegments(e,t.segments,n,r);let o={};return pu(t.children,(t,s)=>{o[s]=this.createSegmentGroup(e,t,n,r)}),new mu(s,o)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function Ch(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(t.matcher||su)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Sh(e){if(1===e.numberOfChildren&&e.children[Zl]){const t=e.children[Zl];return new mu(e.segments.concat(t.segments),t.children)}return e}function Th(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function yh(e){return e.outlet||Zl}class vh{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ah{constructor(e,t){this.component=e,this.route=t}}function Ih(e,t,n){const r=e._root;return function e(t,n,r,s,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=Fu(n);return t.children.forEach(t=>{!function(t,n,r,s,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,a=n?n.value:null,c=r?r.getContext(t.value.outlet):null;if(a&&i.routeConfig===a.routeConfig){const l=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Cu(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Cu(e.url,t.url)||!uu(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wu(e,t)||!uu(e.queryParams,t.queryParams);case"paramsChange":default:return!Wu(e,t)}}(a,i,i.routeConfig.runGuardsAndResolvers);if(l?o.canActivateChecks.push(new vh(s)):(i.data=a.data,i._resolvedData=a._resolvedData),e(t,n,i.component?c?c.children:null:r,s,o),l){o.canDeactivateChecks.push(new Ah(c&&c.outlet&&c.outlet.component||null,a))}}else a&&Nh(n,c,o),o.canActivateChecks.push(new vh(s)),e(t,null,i.component?c?c.children:null:r,s,o)}(t,i[t.value.outlet],r,s.concat([t.value]),o),delete i[t.value.outlet]}),pu(i,(e,t)=>Nh(e,r.getContext(t),o)),o}(r,t?t._root:null,n,[r.value])}function Rh(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function Nh(e,t,n){const r=Fu(e),s=e.value;pu(r,(e,r)=>{Nh(e,s.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Ah(s.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,s))}const Oh=Symbol("INITIAL_VALUE");function wh(){return gc(e=>(function(...e){let t=null,n=null;return w(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&c(e[0])&&(e=e[0]),j(e,n).lift(new Fa(t))})(...e.map(e=>e.pipe(lc(1),function(...e){return t=>{let n=e[e.length-1];w(n)?e.pop():n=null;const r=e.length;return function(...e){return Ha()(Ua(...e))}(1!==r||n?r>0?j(e,n):La(n):xa(e[0]),t)}}(Oh)))).pipe(_c((e,t)=>{let n=!1;return t.reduce((e,r,s)=>{if(e!==Oh)return e;if(r===Oh&&(n=!0),!n){if(!1===r)return r;if(s===t.length-1||dh(r))return r}return e},e)},Oh),Ka(e=>e!==Oh),B(e=>dh(e)?e:!0===e),lc(1)))}function Mh(e,t){return null!==e&&t&&t(new $l(e)),Ua(!0)}function bh(e,t){return null!==e&&t&&t(new ql(e)),Ua(!0)}function Ph(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?Ua(r.map(r=>Ba(()=>{const s=Rh(r,t,n);let o;if(function(e){return e&&hh(e.canActivate)}(s))o=fu(s.canActivate(t,e));else{if(!hh(s))throw new Error("Invalid CanActivate guard");o=fu(s(t,e))}return o.pipe(dc())}))).pipe(wh()):Ua(!0)}function Lh(e,t,n){const r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(e=>(function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null})(e)).filter(e=>null!==e).map(t=>Ba(()=>Ua(t.guards.map(s=>{const o=Rh(s,t.node,n);let i;if(function(e){return e&&hh(e.canActivateChild)}(o))i=fu(o.canActivateChild(r,e));else{if(!hh(o))throw new Error("Invalid CanActivateChild guard");i=fu(o(r,e))}return i.pipe(dc())})).pipe(wh())));return Ua(s).pipe(wh())}class xh{}class Uh{constructor(e,t,n,r,s,o){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){try{const t=Gh(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,Zl),r=new ju([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Zl,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new ku(r,n),o=new Ju(this.url,s);return this.inheritParamsAndData(o._root),Ua(o)}catch(e){return new T(t=>t.error(e))}}inheritParamsAndData(e){const t=e.value,n=Ku(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=Su(t,(t,n)=>this.processSegmentGroup(e,t,n));return function(e){const t={};n.forEach(e=>{const n=t[e.value.outlet];if(n){const t=n.url.map(e=>e.toString()).join("/"),r=e.value.url.map(e=>e.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${t}' and '${r}'.`)}t[e.value.outlet]=e.value})}(),n.sort((e,t)=>e.value.outlet===Zl?-1:t.value.outlet===Zl?1:e.value.outlet.localeCompare(t.value.outlet)),n}processSegment(e,t,n,r){for(const o of e)try{return this.processSegmentAgainstRoute(o,t,n,r)}catch(s){if(!(s instanceof xh))throw s}if(this.noLeftoversInUrl(t,n,r))return[];throw new xh}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo)throw new xh;if((e.outlet||Zl)!==r)throw new xh;let s,o=[],i=[];if("**"===e.path){const o=n.length>0?du(n).parameters:{};s=new ju(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vh(e),r,e.component,e,Dh(t),Yh(t)+n.length,Bh(e))}else{const a=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new xh;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(t.matcher||su)(n,e,t);if(!r)throw new xh;const s={};pu(r.posParams,(e,t)=>{s[t]=e.path});const o=r.consumed.length>0?Object.assign({},s,r.consumed[r.consumed.length-1].parameters):s;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(t,e,n);o=a.consumedSegments,i=n.slice(a.lastChild),s=new ju(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vh(e),r,e.component,e,Dh(t),Yh(t)+o.length,Bh(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:l}=Gh(t,o,i,a,this.relativeLinkResolution);if(0===l.length&&c.hasChildren()){const e=this.processChildren(a,c);return[new ku(s,e)]}if(0===a.length&&0===l.length)return[new ku(s,[])];const u=this.processSegment(a,c,l,Zl);return[new ku(s,u)]}}function Dh(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Yh(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Gh(e,t,n,r,s){if(n.length>0&&function(e,t,n){return r.some(n=>kh(e,t,n)&&Fh(n)!==Zl)}(e,n)){const s=new mu(t,function(e,t,n,r){const s={};s[Zl]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&Fh(o)!==Zl){const n=new mu([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,s[Fh(o)]=n}return s}(e,t,r,new mu(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return r.some(n=>kh(e,t,n))}(e,n)){const o=new mu(e.segments,function(e,t,n,r,s,o){const i={};for(const a of r)if(kh(e,n,a)&&!s[Fh(a)]){const n=new mu([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===o?e.segments.length:t.length,i[Fh(a)]=n}return Object.assign({},s,i)}(e,t,n,r,e.children,s));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}const o=new mu(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function kh(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Fh(e){return e.outlet||Zl}function Vh(e){return e.data||{}}function Bh(e){return e.resolve||{}}function Hh(e,t,n,r){const s=Rh(e,t,r);return fu(s.resolve?s.resolve(t,n):s(t,n))}function Kh(e){return function(t){return t.pipe(gc(t=>{const n=e(t);return n?J(n).pipe(B(()=>t)):J([t])}))}}class jh{}class Jh{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}const qh=new Re("ROUTES");class Xh{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(B(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new ou(hu(r.injector.get(qh)).map(lu),r)}))}loadModuleFactory(e){return"string"==typeof e?J(this.loader.load(e)):fu(e()).pipe(q(e=>e instanceof zt?Ua(e):J(this.compiler.compileModuleAsync(e))))}}class $h{}class Wh{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function zh(e){throw e}function Qh(e,t,n){return t.parse("/")}function Zh(e,t){return Ua(null)}class ed{constructor(e,t,n,r,s,o,i,a){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new N,this.errorHandler=zh,this.malformedUriErrorHandler=Qh,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Zh,afterPreactivation:Zh},this.urlHandlingStrategy=new Wh,this.routeReuseStrategy=new Jh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=s.get(Wt),this.console=s.get(bs);const c=s.get(qs);this.isNgZoneEnabled=c instanceof qs,this.resetConfig(a),this.currentUrlTree=new Eu(new mu([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Xh(o,i,e=>this.triggerEvent(new jl(e)),e=>this.triggerEvent(new Jl(e))),this.routerState=Bu(this.currentUrlTree,this.rootComponentType),this.transitions=new Da({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(Ka(e=>0!==e.id),B(e=>Object.assign({},e,{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),gc(e=>{let n=!1,r=!1;return Ua(e).pipe(Qa(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign({},this.lastSuccessfulNavigation,{previousNavigation:null}):null}}),gc(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Ua(e).pipe(gc(e=>{const n=this.transitions.getValue();return t.next(new Dl(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?Pa:[e]}),gc(e=>Promise.resolve(e)),function(e,t,n,r){return function(s){return s.pipe(gc(s=>(function(e,t,n,r,o){return new _h(e,t,n,s.extractedUrl,o).apply()})(e,t,n,0,r).pipe(B(e=>Object.assign({},s,{urlAfterRedirects:e})))))}}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Qa(e=>{this.currentNavigation=Object.assign({},this.currentNavigation,{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,s){return function(o){return o.pipe(q(o=>(function(e,t,n,r,s="emptyOnly",o="legacy"){return new Uh(e,t,n,r,s,o).recognize()})(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),r,s).pipe(B(e=>Object.assign({},o,{targetSnapshot:e})))))}}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),Qa(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),Qa(e=>{const n=new Fl(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:s,restoredState:o,extras:i}=e,a=new Dl(n,this.serializeUrl(r),s,o);t.next(a);const c=Bu(r,this.rootComponentType).snapshot;return Ua(Object.assign({},e,{targetSnapshot:c,urlAfterRedirects:r,extras:Object.assign({},i,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Pa}),Kh(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:o,replaceUrl:i}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!o,replaceUrl:!!i})}),Qa(e=>{const t=new Vl(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),B(e=>Object.assign({},e,{guards:Ih(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return function(n){return n.pipe(q(n=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:o,canDeactivateChecks:i}}=n;return 0===i.length&&0===o.length?Ua(Object.assign({},n,{guardsResult:!0})):function(e,t,n,r){return J(i).pipe(q(e=>(function(e,t,n,r,s){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Ua(o.map(o=>{const i=Rh(o,t,s);let a;if(function(e){return e&&hh(e.canDeactivate)}(i))a=fu(i.canDeactivate(e,t,n,r));else{if(!hh(i))throw new Error("Invalid CanDeactivate guard");a=fu(i(e,t,n,r))}return a.pipe(dc())})).pipe(wh()):Ua(!0)})(e.component,e.route,n,t,r)),dc(e=>!0!==e,!0))}(0,r,s,e).pipe(q(n=>n&&function(e){return"boolean"==typeof n}()?function(e,t,n,r){return J(o).pipe(Tc(t=>J([bh(t.route.parent,r),Mh(t.route,r),Lh(e,t.path,n),Ph(e,t.route,n)]).pipe(Ha(),dc(e=>!0!==e,!0))),dc(e=>!0!==e,!0))}(r,0,e,t):Ua(n)),B(e=>Object.assign({},n,{guardsResult:e})))}))}}(this.ngModule.injector,e=>this.triggerEvent(e)),Qa(e=>{if(dh(e.guardsResult)){const t=ru(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}}),Qa(e=>{const t=new Bl(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Ka(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Gl(e.id,this.serializeUrl(e.extractedUrl),"");return t.next(n),e.resolve(!1),!1}return!0}),Kh(e=>{if(e.guards.canActivateChecks.length)return Ua(e).pipe(Qa(e=>{const t=new Hl(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),function(e,t){return function(n){return n.pipe(q(n=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=n;return s.length?J(s).pipe(Tc(n=>(function(e,t,n,s){return function(e,t,n,r){const s=Object.keys(e);if(0===s.length)return Ua({});if(1===s.length){const o=s[0];return Hh(e[o],t,n,r).pipe(B(e=>({[o]:e})))}const o={};return J(s).pipe(q(s=>Hh(e[s],t,n,r).pipe(B(e=>(o[s]=e,e))))).pipe(oc(),B(()=>o))}(e._resolve,e,r,s).pipe(B(t=>(e._resolvedData=t,e.data=Object.assign({},e.data,Ku(e,n).resolve),null)))})(n.route,0,e,t)),function(e,t){return arguments.length>=2?function(t){return C(_c(e,void 0),$a(1),nc(void 0))(t)}:function(t){return C(_c((t,n,r)=>e(t)),$a(1))(t)}}((e,t)=>e),B(e=>n)):Ua(n)}))}}(this.paramsInheritanceStrategy,this.ngModule.injector),Qa(e=>{const t=new Kl(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),Kh(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:o,replaceUrl:i}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!o,replaceUrl:!!i})}),B(e=>{const t=function(e,t,n){const r=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){const s=r.value;s._futureSnapshot=n.value;const o=function(t,n,r){return n.children.map(n=>{for(const s of r.children)if(t.shouldReuseRoute(s.value.snapshot,n.value))return e(t,n,s);return e(t,n)})}(t,n,r);return new ku(s,o)}{const r=t.retrieve(n.value);if(r){const e=r.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(let r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,e),e}{const r=new Hu(new Da((s=n.value).url),new Da(s.params),new Da(s.queryParams),new Da(s.fragment),new Da(s.data),s.outlet,s.component,s),o=n.children.map(n=>e(t,n));return new ku(r,o)}}var s}(e,t._root,n?n._root:void 0);return new Vu(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign({},e,{targetRouterState:t})}),Qa(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),ch(this.rootContexts,this.routeReuseStrategy,e=>this.triggerEvent(e)),Qa({next(){n=!0},complete(){n=!0}}),function(e){return t=>t.lift(new yc(e))}(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Gl(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);t.next(n),e.resolve(!1)}this.currentNavigation=null}),ic(n=>{if(r=!0,function(e){return n&&n[nu]}()){const r=dh(n.url);r||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const s=new Gl(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(s),e.resolve(!1),r&&this.navigateByUrl(n.url)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const r=new kl(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(s){e.reject(s)}}return Pa}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign({},this.getTransition(),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{let t=this.parseUrl(e.url);const n="popstate"===e.type?"popstate":"hashchange",r=e.state&&e.state.navigationId?e.state:null;setTimeout(()=>{this.scheduleNavigation(t,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){iu(e),this.config=e.map(lu),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:s,preserveQueryParams:o,queryParamsHandling:i,preserveFragment:a}=t;rt()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=a?this.currentUrlTree.fragment:s;let u=null;if(i)switch(i){case"merge":u=Object.assign({},this.currentUrlTree.queryParams,r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}else u=o?this.currentUrlTree.queryParams:r||null;return null!==u&&(u=this.removeEmptyProps(u)),function(e,t,n,r,s){if(0===n.length)return Qu(t.root,t.root,t,r,s);const o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Zu(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,s)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return pu(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===s?(r.split("/").forEach((r,s)=>{0==s&&"."===r||(0==s&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new Zu(n,t,r)}(n);if(o.toRoot())return Qu(t.root,new mu([],{}),t,r,s);const i=function(e,n,r){if(e.isAbsolute)return new eh(t.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new eh(r.snapshot._urlSegment,!0,0);const s=zu(e.commands[0])?0:1;return function(t,n,o){let i=r.snapshot._urlSegment,a=r.snapshot._lastPathIndex+s,c=e.numberOfDoubleDots;for(;c>a;){if(c-=a,!(i=i.parent))throw new Error("Invalid number of '../'");a=i.segments.length}return new eh(i,!1,a-c)}()}(o,0,e),a=i.processChildren?rh(i.segmentGroup,i.index,o.commands):nh(i.segmentGroup,i.index,o.commands);return Qu(i.segmentGroup,a,t,r,s)}(c,this.currentUrlTree,e,u,l)}navigateByUrl(e,t={skipLocationChange:!1}){rt()&&this.isNgZoneEnabled&&!qs.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=dh(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){if(dh(e))return gu(this.currentUrlTree,e,t);const n=this.parseUrl(e);return gu(this.currentUrlTree,n,t)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new Yl(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r){const s=this.getTransition();if(s&&"imperative"!==t&&"imperative"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(s&&"hashchange"==t&&"popstate"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(s&&"popstate"==t&&"hashchange"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);let o=null,i=null;const a=new Promise((e,t)=>{o=e,i=t}),c=++this.navigationId;return this.setTransition({id:c,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:o,reject:i,promise:a,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),a.catch(e=>Promise.reject(e))}setBrowserUrl(e,t,n,r){const s=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(s)||t?this.location.replaceState(s,"",Object.assign({},r,{navigationId:n})):this.location.go(s,"",Object.assign({},r,{navigationId:n}))}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}class td{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new nd,this.attachRef=null}}class nd{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new td,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}const rd=(()=>(class{constructor(e,t,n,r,s){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ss,this.deactivateEvents=new Ss,this.name=r||Zl,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,s=new sd(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,s),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}))();class sd{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Hu?this.route:e===nd?this.childContexts:this.parent.get(e,t)}}class od{}class id{preload(e,t){return t().pipe(ic(()=>Ua(null)))}}class ad{preload(e,t){return Ua(null)}}const cd=(()=>(class{constructor(e,t,n,r,s){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=new Xh(t,n,t=>e.triggerEvent(new jl(t)),t=>e.triggerEvent(new Jl(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ka(e=>e instanceof Yl),Tc(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Wt);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return J(n).pipe(z(),B(e=>void 0))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>this.loader.load(e.injector,t).pipe(q(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}))();class ld{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Dl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Yl&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof zl&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new zl(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const ud=new Re("ROUTER_CONFIGURATION"),hd=new Re("ROUTER_FORROOT_GUARD"),dd=[ia,{provide:Tu,useClass:yu},{provide:ed,useFactory:Cd,deps:[po,Tu,nd,ia,be,ys,Ys,qh,ud,[$h,new ce],[jh,new ce]]},nd,{provide:Hu,useFactory:Sd,deps:[ed]},{provide:ys,useClass:mo},cd,ad,id,{provide:ud,useValue:{enableTracing:!1}}];function pd(){return new ao("Router",ed)}const fd=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[dd,_d(t),{provide:hd,useFactory:md,deps:[[ed,new ce,new ue]]},{provide:ud,useValue:n||{}},{provide:sa,useFactory:Ed,deps:[na,[new ae(oa),new ce],ud]},{provide:ld,useFactory:gd,deps:[ed,Ma,ud]},{provide:od,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ad},{provide:ao,multi:!0,useFactory:pd},[Td,{provide:vs,multi:!0,useFactory:yd,deps:[Td]},{provide:Ad,useFactory:vd,deps:[Td]},{provide:Ms,multi:!0,useExisting:Ad}]]}}static forChild(t){return{ngModule:e,providers:[_d(t)]}}}return e})();function gd(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new ld(e,t,n)}function Ed(e,t,n={}){return n.useHash?new ca(e,t):new la(e,t)}function md(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function _d(e){return[{provide:Xe,multi:!0,useValue:e},{provide:qh,multi:!0,useValue:e}]}function Cd(e,t,n,r,s,o,i,a,c={},l,u){const h=new ed(null,t,n,r,s,o,i,hu(a));if(l&&(h.urlHandlingStrategy=l),u&&(h.routeReuseStrategy=u),c.errorHandler&&(h.errorHandler=c.errorHandler),c.malformedUriErrorHandler&&(h.malformedUriErrorHandler=c.malformedUriErrorHandler),c.enableTracing){const e=Ic();h.events.subscribe(t=>{e.logGroup(`Router Event: ${t.constructor.name}`),e.log(t.toString()),e.log(t),e.logGroupEnd()})}return c.onSameUrlNavigation&&(h.onSameUrlNavigation=c.onSameUrlNavigation),c.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=c.paramsInheritanceStrategy),c.urlUpdateStrategy&&(h.urlUpdateStrategy=c.urlUpdateStrategy),c.relativeLinkResolution&&(h.relativeLinkResolution=c.relativeLinkResolution),h}function Sd(e){return e.routerState.root}const Td=(()=>(class{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new N}appInitializer(){return this.injector.get(ra,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(ed),r=this.injector.get(ud);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))e(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),e(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=(()=>this.initNavigation?Ua(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone)),n.initialNavigation()}return t})}bootstrapListener(e){const t=this.injector.get(ud),n=this.injector.get(cd),r=this.injector.get(ld),s=this.injector.get(ed),o=this.injector.get(po);e===o.components[0]&&(this.isLegacyEnabled(t)?s.initialNavigation():this.isLegacyDisabled(t)&&s.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}))();function yd(e){return e.appInitializer.bind(e)}function vd(e){return e.bootstrapListener.bind(e)}const Ad=new Re("Router Initializer");var Id=qn({encapsulation:2,styles:[],data:{}});function Rd(e){return Jo(0,[(e()(),Lo(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ns(1,212992,null,0,rd,[nd,On,qt,[8,null],Tn],null,null)],function(e,t){e(t,1,0)},null)}function Nd(e){return Jo(0,[(e()(),Lo(0,0,null,null,1,"ng-component",[],null,null,null,Rd,Id)),ns(1,49152,null,0,Ql,[],null,null)],null,null)}var Od=Pr("ng-component",Ql,Nd,{},{},[]);class wd extends V{constructor(e,t){super(e),this.sources=t,this.completed=0,this.haveValues=0;const n=t.length;this.values=new Array(n);for(let r=0;r<n;r++){const e=F(this,t[r],null,r);e&&this.add(e)}}notifyNext(e,t,n,r,s){this.values[n]=t,s._hasValue||(s._hasValue=!0,this.haveValues++)}notifyComplete(e){const{destination:t,haveValues:n,values:r}=this,s=r.length;e._hasValue?(this.completed++,this.completed===s&&(n===s&&t.next(r),t.complete())):t.complete()}}const Md=new Re("NgValueAccessor"),bd=(()=>(class{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=(e=>{}),this.onTouched=(()=>{})}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}))(),Pd=new Re("CompositionEventMode"),Ld=(()=>(class{constructor(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=(e=>{}),this.onTouched=(()=>{}),this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=Ic()?Ic().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}))();class xd{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ud extends xd{get formDirective(){return null}get path(){return null}}function Dd(){throw new Error("unimplemented")}class Yd extends xd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return Dd()}get asyncValidator(){return Dd()}}class Gd{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}const kd=(()=>(class extends Gd{constructor(e){super(e)}}))(),Fd=(()=>(class extends Gd{constructor(e){super(e)}}))();function Vd(e){return null==e||0===e.length}const Bd=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;class Hd{static min(e){return t=>{if(Vd(t.value)||Vd(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}static max(e){return t=>{if(Vd(t.value)||Vd(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}static required(e){return Vd(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return Vd(e.value)?null:Bd.test(e.value)?null:{email:!0}}static minLength(e){return t=>{if(Vd(t.value))return null;const n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}static maxLength(e){return t=>{const n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}static pattern(e){if(!e)return Hd.nullValidator;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(Vd(e.value))return null;const r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const t=e.filter(Kd);return 0==t.length?null:function(e){return Jd(function(e,n){return t.map(t=>t(e))}(e))}}static composeAsync(e){if(!e)return null;const t=e.filter(Kd);return 0==t.length?null:function(e){return function e(...t){let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&c(t[0])&&(t=t[0]),0===t.length?Pa:n?e(t).pipe(B(e=>n(...e))):new T(e=>new wd(e,t))}(function(e,n){return t.map(t=>t(e))}(e).map(jd)).pipe(B(Jd))}}}function Kd(e){return null!=e}function jd(e){const t=bt(e)?J(e):e;if(!Pt(t))throw new Error("Expected validator to return Promise or Observable.");return t}function Jd(e){const t=e.reduce((e,t)=>null!=t?Object.assign({},e,t):e,{});return 0===Object.keys(t).length?null:t}function qd(e){return e.validate?t=>e.validate(t):e}function Xd(e){return e.validate?t=>e.validate(t):e}const $d=(()=>(class{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=(e=>{}),this.onTouched=(()=>{})}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=(t=>{e(""==t?null:parseFloat(t))})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}))(),Wd=(()=>(class{constructor(){this._accessors=[]}add(e,t){this._accessors.push([e,t])}remove(e){for(let t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}select(e){this._accessors.forEach(t=>{this._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})}_isSameGroup(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}))(),zd=(()=>(class{constructor(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=(()=>{}),this.onTouched=(()=>{})}ngOnInit(){this._control=this._injector.get(Yd),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=(()=>{e(this.value),this._registry.select(this)})}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}))(),Qd={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};class Zd{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${Qd.formControlName}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${Qd.formGroupName}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${Qd.ngModelGroup}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${Qd.formControlName}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${Qd.formGroupName}`)}static arrayParentException(){throw new Error(`formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        ${Qd.formArrayName}`)}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(e){console.warn(`\n    It looks like you're using ngModel on the same form field as ${e}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===e?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}function ep(e,t){return[...t.path,e]}function tp(e,t){e||op(t,"Cannot find control with"),t.valueAccessor||op(t,"No value accessor for form control with"),e.validator=Hd.compose([e.validator,t.validator]),e.asyncValidator=Hd.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&np(e,t)})}(e,t),function(e,t){e.registerOnChange((e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&np(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(e=>{t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())}),t._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())})}function np(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function rp(e,t){null==e&&op(t,"Cannot find control with"),e.validator=Hd.compose([e.validator,t.validator]),e.asyncValidator=Hd.composeAsync([e.asyncValidator,t.asyncValidator])}function sp(e){return op(e,"There is no FormControl instance attached to form control element with")}function op(e,t){let n;throw n=e.path.length>1?`path: '${e.path.join(" -> ")}'`:e.path[0]?`name: '${e.path}'`:"unspecified name attribute",new Error(`${t} ${n}`)}function ip(e){return null!=e?Hd.compose(e.map(qd)):null}function ap(e){return null!=e?Hd.composeAsync(e.map(Xd)):null}const cp=[bd,(()=>(class{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=(e=>{}),this.onTouched=(()=>{})}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=(t=>{e(""==t?null:parseFloat(t))})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}))(),$d,(()=>(class{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=(e=>{}),this.onTouched=(()=>{}),this._compareWith=Ut}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(e){this.onChange=(t=>{this.value=this._getOptionValue(t),e(this.value)})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}))(),(()=>(class{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=(e=>{}),this.onTouched=(()=>{}),this._compareWith=Ut}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=((e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)})}else t=((e,t)=>{e._setSelected(!1)});this._optionMap.forEach(t)}registerOnChange(e){this.onChange=(t=>{const n=[];if(t.hasOwnProperty("selectedOptions")){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const r=e.item(t),s=this._getOptionValue(r.value);n.push(s)}}else{const e=t.options;for(let t=0;t<e.length;t++){const r=e.item(t);if(r.selected){const e=this._getOptionValue(r.value);n.push(e)}}}this.value=n,e(n)})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}))(),zd],lp="VALID",up="INVALID",hp="PENDING",dp="DISABLED";function pp(e){const t=gp(e)?e.validators:e;return Array.isArray(t)?ip(t):t||null}function fp(e,t){const n=gp(t)?t.asyncValidators:e;return Array.isArray(n)?ap(n):n||null}function gp(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class Ep{constructor(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=(()=>{}),this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===lp}get invalid(){return this.status===up}get pending(){return this.status==hp}get disabled(){return this.status===dp}get enabled(){return this.status!==dp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this.validator=pp(e)}setAsyncValidators(e){this.asyncValidator=fp(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=hp,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dp,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},e,{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lp,this._forEachChild(t=>{t.enable(Object.assign({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign({},e,{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==lp&&this.status!==hp||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dp:lp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=hp;const t=jd(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>this.setErrors(t,{emitEvent:e}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){return null==t?null:(t instanceof Array||(t=t.split(".")),t instanceof Array&&0===t.length?null:t.reduce((e,t)=>e instanceof _p?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Cp&&e.at(t)||null,e))}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ss,this.statusChanges=new Ss}_calculateStatus(){return this._allControlsDisabled()?dp:this.errors?up:this._anyControlsHaveStatus(hp)?hp:this._anyControlsHaveStatus(up)?up:lp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gp(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class mp extends Ep{constructor(e=null,t,n){super(pp(t),fp(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=(()=>{})}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class _p extends Ep{constructor(e,t,n){super(pp(t),fp(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof mp?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>e(this.controls[t],t))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){let t=!1;return this._forEachChild((n,r)=>{t=t||this.contains(r)&&e(n)}),t}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Cp extends Ep{constructor(e,t,n){super(pp(t),fp(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof mp?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}class Sp extends Ud{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return ep(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return ip(this._validators)}get asyncValidator(){return ap(this._asyncValidators)}_checkParentType(){}}const Tp=(()=>(class{}))(),yp=new Re("NgModelWithFormControlWarning"),vp=(()=>(class extends Ud{constructor(e,t){super(),this._validators=e,this._asyncValidators=t,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new Ss}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return tp(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){!function(t,n){const r=t.indexOf(e);r>-1&&t.splice(r,1)}(this.directives)}addFormGroup(e){const t=this.form.get(e.path);rp(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormGroup(e){}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){const t=this.form.get(e.path);rp(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormArray(e){}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,t=this.directives,this.form._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var t}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=this.form.get(e.path);e.control!==t&&(function(e,t){t.valueAccessor.registerOnChange(()=>sp(t)),t.valueAccessor.registerOnTouched(()=>sp(t)),t._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),e&&e._clearChangeFns()}(e.control,e),t&&tp(t,e),e.control=t)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const e=ip(this._validators);this.form.validator=Hd.compose([this.form.validator,e]);const t=ap(this._asyncValidators);this.form.asyncValidator=Hd.composeAsync([this.form.asyncValidator,t])}_checkFormPresent(){this.form||Zd.missingFormException()}}))(),Ap=(()=>(class extends Sp{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}_checkParentType(){Rp(this._parent)&&Zd.groupParentException()}}))(),Ip=(()=>(class extends Ud{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return ep(this.name,this._parent)}get validator(){return ip(this._validators)}get asyncValidator(){return ap(this._asyncValidators)}_checkParentType(){Rp(this._parent)&&Zd.arrayParentException()}}))();function Rp(e){return!(e instanceof Ap||e instanceof vp||e instanceof Ip)}const Np=(()=>{class e extends Yd{constructor(e,t,n,r,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new Ss,this._ngModelWarningSent=!1,this._parent=e,this._rawValidators=t||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||op(e,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,s=void 0;return t.forEach(t=>{t.constructor===Ld?n=t:function(e){return cp.some(t=>e.constructor===t)}(t)?(r&&op(e,"More than one built-in value accessor matches form control with"),r=t):(s&&op(e,"More than one custom value accessor matches form control with"),s=t)}),s||r||n||(op(e,"No valid value accessor for form control with"),null)}(this,r)}set isDisabled(e){Zd.disabledAttrWarning()}ngOnChanges(t){var n,r;this._added||this._setUpControl(),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Ut(t,n.currentValue)}(t,this.viewModel)&&("formControlName",n=e,this,r=this._ngModelWarningConfig,rt()&&"never"!==r&&((null!==r&&"once"!==r||n._ngModelWarningSentOnce)&&("always"!==r||this._ngModelWarningSent)||(Zd.ngModelWarning("formControlName"),n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return ep(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return ip(this._rawValidators)}get asyncValidator(){return ap(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof Ap)&&this._parent instanceof Sp?Zd.ngModelGroupException():this._parent instanceof Ap||this._parent instanceof vp||this._parent instanceof Ip||Zd.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return e._ngModelWarningSentOnce=!1,e})(),Op=(()=>(class{}))(),wp=(()=>(class{group(e,t=null){const n=this._reduceControls(e);let r=null,s=null,o=void 0;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(r=null!=t.validators?t.validators:null,s=null!=t.asyncValidators?t.asyncValidators:null,o=null!=t.updateOn?t.updateOn:void 0):(r=null!=t.validator?t.validator:null,s=null!=t.asyncValidator?t.asyncValidator:null)),new _p(n,{asyncValidators:s,updateOn:o,validators:r})}control(e,t,n){return new mp(e,t,n)}array(e,t,n){const r=e.map(e=>this._createControl(e));return new Cp(r,t,n)}_reduceControls(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this._createControl(e[n])}),t}_createControl(e){return e instanceof mp||e instanceof _p||e instanceof Cp?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}))(),Mp=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:yp,useValue:t.warnOnNgModelWithFormControl}]}}}return e})();var bp=n("mtpe");class Pp extends d{constructor(e,t){super()}schedule(e,t=0){return this}}class Lp extends Pp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,r=void 0;try{this.work(e)}catch(s){n=!0,r=!!s&&s||new Error(s)}if(n)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}class xp extends Lp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}const Up=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=(()=>Date.now()),e})();class Dp extends Up{constructor(e,t=Up.now){super(e,()=>Dp.delegate&&Dp.delegate!==this?Dp.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return Dp.delegate&&Dp.delegate!==this?Dp.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}class Yp extends Dp{}const Gp=new Yp(xp),kp=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return Ua(this.value);case"E":return e=this.error,new T(t=>t.error(e));case"C":return La()}var e;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();class Fp extends g{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(Fp.dispatch,this.delay,new Vp(e,this.destination)))}_next(e){this.scheduleMessage(kp.createNext(e))}_error(e){this.scheduleMessage(kp.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(kp.createComplete()),this.unsubscribe()}}class Vp{constructor(e,t){this.notification=e,this.destination=t}}class Bp extends N{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),super.next(e)}nextTimeWindow(e){this._events.push(new Hp(this._getNow(),e)),this._trimBufferThenGetEvents(),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=n.length;let o;if(this.closed)throw new A;if(this.isStopped||this.hasError?o=d.EMPTY:(this.observers.push(e),o=new I(this,e)),r&&e.add(e=new Fp(e,r)),t)for(let i=0;i<s&&!e.closed;i++)e.next(n[i]);else for(let i=0;i<s&&!e.closed;i++)e.next(n[i].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||Gp).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,s=r.length;let o=0;for(;o<s&&!(e-r[o].time<n);)o++;return s>t&&(o=Math.max(o,s-t)),o>0&&r.splice(0,o),r}}class Hp{constructor(e,t){this.time=e,this.value=t}}const Kp=(()=>{class e{constructor(){this.initialized=new Bp,this.incomingCall$=new Bp,this.outgoingCall$=new Bp,this.ongoingCall$=new Bp,this.users$=new Bp,bp.CometChat.init(Zi.appId).then(e=>{console.log("Comet Chat initialized."),this.initialized.next(!0)},e=>{console.log("Initialization error: "+e)}),this.ongoingCall$.pipe(Ka(e=>!!e)).subscribe(e=>{bp.CometChat.startCall(e.sessionId,document.getElementById("callScreen"),new bp.CometChat.OngoingCallListener({onCallEnded:e=>{this.ongoingCall$.next(null)}}))})}retrieveUsers(){(new bp.CometChat.UsersRequestBuilder).setLimit(20).build().fetchNext().then(e=>{this.users$.next(e)})}login(e){return e=e.toLowerCase(),this.initialized.pipe(Ka(e=>e),q(t=>(console.log("uid",e,Zi.apiKey),J(bp.CometChat.login(e,Zi.apiKey)).pipe(Qa(t=>{this.retrieveUsers(),this.signedIn=e,bp.CometChat.addCallListener("CALL_LISTENER_ID",new bp.CometChat.CallListener({onIncomingCallReceived:e=>{this.incomingCall$.next(e)},onOutgoingCallAccepted:e=>{this.ongoingCall$.next(e),this.outgoingCall$.next(null)},onOutgoingCallRejected:e=>{this.outgoingCall$.next(null),this.incomingCall$.next(null)},onIncomingCallCancelled:e=>{this.incomingCall$.next(null)}})),bp.CometChat.addUserListener("USER_LISTENER_ID",new bp.CometChat.UserListener({onUserOnline:e=>this.retrieveUsers(),onUserOffline:e=>this.retrieveUsers()}))})))))}getSignedIn(){return this.signedIn=localStorage.getItem("uid"),this.signedIn}getIncomingCalls(){return this.incomingCall$}getOutgoingCalls(){return this.outgoingCall$}getOngoingCalls(){return this.ongoingCall$}startVoiceCall(e){if(!this.signedIn)throw new Error("Not logged in.");const t=new bp.CometChat.Call(e,bp.CometChat.CALL_TYPE.AUDIO,bp.CometChat.RECEIVER_TYPE.USER);return J(bp.CometChat.initiateCall(t)).pipe(Qa(e=>this.outgoingCall$.next(e)))}startVideoCall(e){if(!this.signedIn)throw new Error("Not logged in.");const t=new bp.CometChat.Call(e,bp.CometChat.CALL_TYPE.VIDEO,bp.CometChat.RECEIVER_TYPE.USER);return J(bp.CometChat.initiateCall(t))}accept(e){return J(bp.CometChat.acceptCall(e)).pipe(Qa(e=>{this.incomingCall$.next(null),this.ongoingCall$.next(e)}))}reject(e){return J(bp.CometChat.rejectCall(e,bp.CometChat.CALL_STATUS.REJECTED)).pipe(Qa(e=>{this.incomingCall$.next(null)}))}getUsers(){return this.users$}}return e.ngInjectableDef=pe({factory:function(){return new e},token:e,providedIn:"root"}),e})();class jp{constructor(e,t){this.chat=e,this.router=t,this.loginForm=new _p({uid:new mp("",Hd.required)})}signIn(){this.chat.login(this.loginForm.value.uid).subscribe(e=>{localStorage.setItem("uid",this.loginForm.value.uid),this.router.navigate(["call"])})}}var Jp=qn({encapsulation:0,styles:[[""]],data:{}});function qp(e){return Jo(0,[(e()(),Lo(0,0,null,null,15,"div",[["class","container pt-3"]],null,null,null,null,null)),(e()(),Lo(1,0,null,null,14,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,t,n){var r=!0,s=e.component;return"submit"===t&&(r=!1!==Hr(e,3).onSubmit(n)&&r),"reset"===t&&(r=!1!==Hr(e,3).onReset()&&r),"ngSubmit"===t&&(r=!1!==s.signIn()&&r),r},null,null)),ns(2,16384,null,0,Tp,[],null,null),ns(3,540672,null,0,vp,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),ss(2048,null,Ud,null,[vp]),ns(5,16384,null,0,Fd,[[4,Ud]],null,null),(e()(),Lo(6,0,null,null,7,"label",[],null,null,null,null,null)),(e()(),Ho(-1,null,["User ID:"])),(e()(),Lo(8,0,null,null,5,"input",[["formControlName","uid"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0;return"input"===t&&(r=!1!==Hr(e,9)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Hr(e,9).onTouched()&&r),"compositionstart"===t&&(r=!1!==Hr(e,9)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Hr(e,9)._compositionEnd(n.target.value)&&r),r},null,null)),ns(9,16384,null,0,Ld,[sn,Zt,[2,Pd]],null,null),ss(1024,null,Md,function(e){return[e]},[Ld]),ns(11,671744,null,0,Np,[[3,Ud],[8,null],[8,null],[6,Md],[2,yp]],{name:[0,"name"]},null),ss(2048,null,Yd,null,[Np]),ns(13,16384,null,0,kd,[[4,Yd]],null,null),(e()(),Lo(14,0,null,null,1,"button",[["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(e()(),Ho(-1,null,["Sign In"]))],function(e,t){e(t,3,0,t.component.loginForm),e(t,11,0,"uid")},function(e,t){var n=t.component;e(t,1,0,Hr(t,5).ngClassUntouched,Hr(t,5).ngClassTouched,Hr(t,5).ngClassPristine,Hr(t,5).ngClassDirty,Hr(t,5).ngClassValid,Hr(t,5).ngClassInvalid,Hr(t,5).ngClassPending),e(t,8,0,Hr(t,13).ngClassUntouched,Hr(t,13).ngClassTouched,Hr(t,13).ngClassPristine,Hr(t,13).ngClassDirty,Hr(t,13).ngClassValid,Hr(t,13).ngClassInvalid,Hr(t,13).ngClassPending),e(t,14,0,!n.loginForm.valid)})}function Xp(e){return Jo(0,[(e()(),Lo(0,0,null,null,1,"app-login",[],null,null,null,qp,Jp)),ns(1,49152,null,0,jp,[Kp,ed],null,null)],null,null)}var $p=Pr("app-login",jp,Xp,{},{},[]),Wp=["img[_ngcontent-%COMP%]{max-width:50px;max-height:50px}[_nghost-%COMP%]{display:flex}"];class zp{}var Qp=qn({encapsulation:0,styles:[Wp],data:{}});function Zp(e){return Jo(0,[(e()(),Lo(0,0,null,null,1,"h1",[],null,null,null,null,null)),(e()(),Ho(1,null,["Calling to ",""])),(e()(),Lo(2,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Lo(3,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(e,t){var n=t.component;e(t,1,0,n.call.data.entities.for.entity.name),e(t,3,0,n.call.data.entities.for.entity.avatar)})}class ef{constructor(e){this.chat=e}accept(){this.chat.accept(this.call.sessionId).subscribe()}reject(){this.chat.reject(this.call.sessionId).subscribe()}}var tf=qn({encapsulation:0,styles:[[".positive[_ngcontent-%COMP%]{color:green}.negative[_ngcontent-%COMP%]{color:red}img[_ngcontent-%COMP%]{max-width:200px;max-height:200px}[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{display:flex;justify-content:center}span[_ngcontent-%COMP%]{margin:0 15px;text-decoration:underline}span[_ngcontent-%COMP%]:hover{text-decoration:none;cursor:pointer}"]],data:{}});function nf(e){return Jo(0,[(e()(),Lo(0,0,null,null,12,"div",[["class","card text-center mx-auto"],["style","width: 18rem;"]],null,null,null,null,null)),(e()(),Lo(1,0,null,null,0,"img",[["alt","..."],["class","card-img-top mx-auto"]],[[8,"src",4]],null,null,null,null)),(e()(),Lo(2,0,null,null,10,"div",[["class","card-body text-center"]],null,null,null,null,null)),(e()(),Lo(3,0,null,null,1,"h4",[["class","card-title"]],null,null,null,null,null)),(e()(),Ho(4,null,[" ",""])),(e()(),Lo(5,0,null,null,1,"p",[["class","card-text"]],null,null,null,null,null)),(e()(),Ho(-1,null,["Incoming call"])),(e()(),Lo(7,0,null,null,2,"button",[["class","btn btn-block btn-success  btn-sm"],["type","button"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.accept()&&r),r},null,null)),(e()(),Lo(8,0,null,null,0,"i",[["class","fas fa-phone-alt"]],null,null,null,null,null)),(e()(),Ho(-1,null,[" Accept"])),(e()(),Lo(10,0,null,null,2,"button",[["class","btn btn-block btn-danger  btn-sm"],["type","button"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.reject()&&r),r},null,null)),(e()(),Lo(11,0,null,null,0,"i",[["class","fas fa-phone-slash"]],null,null,null,null,null)),(e()(),Ho(-1,null,[" Reject"]))],null,function(e,t){var n=t.component;e(t,1,0,n.call.callInitiator.avatar),e(t,4,0,n.call.callInitiator.name)})}class rf{constructor(e){this.chat=e}ngOnInit(){this.call.callInitiator.uid===this.chat.getSignedIn()?(this.name=this.call.callReceiver.name,this.avatar=this.call.callReceiver.avatar):(this.name=this.call.callInitiator.name,this.avatar=this.call.callInitiator.avatar)}}var sf=qn({encapsulation:0,styles:[Wp],data:{}});function of(e){return Jo(0,[(e()(),Lo(0,0,null,null,1,"h1",[],null,null,null,null,null)),(e()(),Ho(1,null,["Speaking with ",""])),(e()(),Lo(2,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),Lo(3,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(e,t){var n=t.component;e(t,1,0,n.name),e(t,3,0,n.avatar)})}class af{constructor(e){this.chat=e,this.contacts=this.chat.getUsers(),this.incomingCall$=this.chat.getIncomingCalls(),this.ongoingCall$=this.chat.getOngoingCalls(),this.outgoingCall$=this.chat.getOutgoingCalls()}voiceCall(e){this.chat.startVoiceCall(e).subscribe()}videoCall(e){this.chat.startVideoCall(e).subscribe()}}var cf=qn({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{flex:1}#callScreen[_ngcontent-%COMP%]{height:500px}"]],data:{}});function lf(e){return Jo(0,[(e()(),Lo(0,0,null,null,1,"span",[["class","badge badge-pill badge-success"]],null,null,null,null,null)),(e()(),Ho(-1,null,[" \xa0"]))],null,null)}function uf(e){return Jo(0,[(e()(),Lo(0,0,null,null,1,"span",[["class","badge badge-pill badge-danger"]],null,null,null,null,null)),(e()(),Ho(-1,null,[" \xa0 "]))],null,null)}function hf(e){return Jo(0,[(e()(),Lo(0,0,null,null,2,"button",[["class","btn btn-primary btn-sm"],["type","button"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.voiceCall(e.parent.context.$implicit.uid)&&r),r},null,null)),(e()(),Lo(1,0,null,null,0,"i",[["class","fas fa-phone-square-alt"]],null,null,null,null,null)),(e()(),Ho(-1,null,[" call"]))],null,null)}function df(e){return Jo(0,[(e()(),Lo(0,0,null,null,2,"button",[["class","btn btn-success btn-sm"],["type","button"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.videoCall(e.parent.context.$implicit.uid)&&r),r},null,null)),(e()(),Lo(1,0,null,null,0,"i",[["class","fas fa-video"]],null,null,null,null,null)),(e()(),Ho(-1,null,[" call"]))],null,null)}function pf(e){return Jo(0,[(e()(),Lo(0,0,null,null,12,"li",[["class","list-group-item pl-0 pr-0"]],null,null,null,null,null)),(e()(),Lo(1,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Po(16777216,null,null,1,null,lf)),ns(3,16384,null,0,Sa,[On,Rn],{ngIf:[0,"ngIf"]},null),(e()(),Po(16777216,null,null,1,null,uf)),ns(5,16384,null,0,Sa,[On,Rn],{ngIf:[0,"ngIf"]},null),(e()(),Ho(6,null,[" "," \xa0 \xa0 "])),(e()(),Lo(7,0,null,null,5,"span",[],null,null,null,null,null)),(e()(),Po(16777216,null,null,1,null,hf)),ns(9,16384,null,0,Sa,[On,Rn],{ngIf:[0,"ngIf"]},null),(e()(),Ho(-1,null,[" \xa0 "])),(e()(),Po(16777216,null,null,1,null,df)),ns(12,16384,null,0,Sa,[On,Rn],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,3,0,"online"==t.context.$implicit.status),e(t,5,0,"online"!=t.context.$implicit.status),e(t,9,0,"online"==t.context.$implicit.status),e(t,12,0,"online"==t.context.$implicit.status)},function(e,t){e(t,6,0,t.context.$implicit.name)})}function ff(e){return Jo(0,[(e()(),Lo(0,0,null,null,1,"app-outgoing-call",[],null,null,null,Zp,Qp)),ns(1,49152,null,0,zp,[],{call:[0,"call"]},null)],function(e,t){e(t,1,0,t.context.ngIf)},null)}function gf(e){return Jo(0,[(e()(),Lo(0,0,null,null,1,"app-incoming-call",[],null,null,null,nf,tf)),ns(1,49152,null,0,ef,[Kp],{call:[0,"call"]},null)],function(e,t){e(t,1,0,t.context.ngIf)},null)}function Ef(e){return Jo(0,[(e()(),Lo(0,0,null,null,1,"app-ongoing-call",[],null,null,null,of,sf)),ns(1,114688,null,0,rf,[Kp],{call:[0,"call"]},null)],function(e,t){e(t,1,0,t.context.ngIf)},null)}function mf(e){return Jo(0,[(e()(),Lo(0,0,null,null,21,"div",[["class","container-fluid"]],null,null,null,null,null)),(e()(),Lo(1,0,null,null,20,"div",[["class","row"]],null,null,null,null,null)),(e()(),Lo(2,0,null,null,8,"div",[["class","col-md-5 "]],null,null,null,null,null)),(e()(),Lo(3,0,null,null,7,"div",[["class","card mx-auto"]],null,null,null,null,null)),(e()(),Lo(4,0,null,null,6,"div",[["class","card-body "]],null,null,null,null,null)),(e()(),Lo(5,0,null,null,1,"h5",[["class","card-title text-center"]],null,null,null,null,null)),(e()(),Ho(-1,null,["User List"])),(e()(),Lo(7,0,null,null,3,"ul",[["class","list-group list-group-flush"]],null,null,null,null,null)),(e()(),Po(16777216,null,null,2,null,pf)),ns(9,278528,null,0,_a,[On,Rn,Cn],{ngForOf:[0,"ngForOf"]},null),rs(131072,Na,[Tn]),(e()(),Lo(11,0,null,null,10,"div",[["class","col-md-7"]],null,null,null,null,null)),(e()(),Po(16777216,null,null,2,null,ff)),ns(13,16384,null,0,Sa,[On,Rn],{ngIf:[0,"ngIf"]},null),rs(131072,Na,[Tn]),(e()(),Po(16777216,null,null,2,null,gf)),ns(16,16384,null,0,Sa,[On,Rn],{ngIf:[0,"ngIf"]},null),rs(131072,Na,[Tn]),(e()(),Po(16777216,null,null,2,null,Ef)),ns(19,16384,null,0,Sa,[On,Rn],{ngIf:[0,"ngIf"]},null),rs(131072,Na,[Tn]),(e()(),Lo(21,0,null,null,0,"div",[["id","callScreen"]],null,null,null,null,null))],function(e,t){var n=t.component;e(t,9,0,Kn(t,9,0,Hr(t,10).transform(n.contacts))),e(t,13,0,Kn(t,13,0,Hr(t,14).transform(n.outgoingCall$))),e(t,16,0,Kn(t,16,0,Hr(t,17).transform(n.incomingCall$))),e(t,19,0,Kn(t,19,0,Hr(t,20).transform(n.ongoingCall$)))},null)}function _f(e){return Jo(0,[(e()(),Lo(0,0,null,null,1,"app-call",[],null,null,null,mf,cf)),ns(1,49152,null,0,af,[Kp],null,null)],null,null)}var Cf=Pr("app-call",af,_f,{},{},[]),Sf=qn({encapsulation:0,styles:[[""]],data:{}});function Tf(e){return Jo(0,[(e()(),Lo(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ns(1,212992,null,0,rd,[nd,On,qt,[8,null],Tn],null,null)],function(e,t){e(t,1,0)},null)}function yf(e){return Jo(0,[(e()(),Lo(0,0,null,null,1,"app-root",[],null,null,null,Tf,Sf)),ns(1,49152,null,0,ta,[],null,null)],null,null)}var vf=Pr("app-root",ta,yf,{},{},[]);const Af=(()=>{class e{constructor(e,t){this.chat=e,this.router=t}canActivate(){return this.chat.getSignedIn()||this.router.navigate(["login"]),!!this.chat.getSignedIn()}}return e.ngInjectableDef=pe({factory:function(){return new e(Ie(Kp),Ie(ed))},token:e,providedIn:"root"}),e})();class If{}var Rf=zi(ea,[ta],function(e){return function(e){const t={},n=[];let r=!1;for(let s=0;s<e.length;s++){const o=e[s];o.token===Vt&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=s,t[Hn(o.token)]=o}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:r}}([vr(512,qt,Xt,[[8,[Od,$p,Cf,vf]],[3,qt],Wt]),vr(5120,Ro,wo,[[3,Ro]]),vr(4608,ga,Ea,[Ro,[2,fa]]),vr(5120,Cs,Mo,[qs]),vr(5120,Is,Rs,[]),vr(5120,Cn,No,[]),vr(5120,Sn,Oo,[]),vr(4608,Al,Il,[wa]),vr(6144,Rt,null,[Al]),vr(4608,ml,Cl,[]),vr(5120,Kc,function(e,t,n,r,s,o,i,a){return[new gl(e,t,n),new vl(r),new Sl(s,o,i,a)]},[wa,qs,ws,wa,wa,ml,bs,[2,_l]]),vr(4608,jc,jc,[Kc,qs]),vr(135680,Xc,Xc,[wa]),vr(4608,tl,tl,[jc,Xc,Is]),vr(6144,nn,null,[tl]),vr(6144,qc,null,[Xc]),vr(4608,eo,eo,[qs]),vr(5120,Hu,Sd,[ed]),vr(4608,ad,ad,[]),vr(6144,od,null,[ad]),vr(135680,cd,cd,[ed,ys,Ys,be,od]),vr(4608,id,id,[]),vr(5120,ld,gd,[ed,Ma,ud]),vr(5120,Ad,vd,[Td]),vr(5120,Ms,function(e){return[e]},[Ad]),vr(4608,wp,wp,[]),vr(4608,Wd,Wd,[]),vr(1073742336,Oa,Oa,[]),vr(1024,et,Ll,[]),vr(1024,ao,function(){return[pd()]},[]),vr(512,Td,Td,[be]),vr(1024,vs,function(e,t){return[(n=e,Vc("probe",Hc),Vc("coreTokens",Object.assign({},Bc,(n||[]).reduce((e,t)=>(e[t.name]=t.token,e),{}))),()=>Hc),yd(t)];var n},[[2,ao],Td]),vr(512,As,As,[[2,vs]]),vr(131584,po,po,[qs,bs,be,et,qt,As]),vr(1073742336,bo,bo,[po]),vr(1073742336,xl,xl,[[3,xl]]),vr(1024,hd,md,[[3,ed]]),vr(512,Tu,yu,[]),vr(512,nd,nd,[]),vr(256,ud,{},[]),vr(1024,sa,Ed,[na,[2,oa],ud]),vr(512,ia,ia,[sa,na]),vr(512,Ys,Ys,[]),vr(512,ys,mo,[Ys,[2,go]]),vr(1024,qh,function(){return[[{path:"",redirectTo:"call",pathMatch:"full"},{path:"login",component:jp},{path:"call",component:af,canActivate:[Af]}]]},[]),vr(1024,ed,Cd,[po,Tu,nd,ia,be,ys,Ys,qh,ud,[2,$h],[2,jh]]),vr(1073742336,fd,fd,[[2,hd],[2,ed]]),vr(1073742336,If,If,[]),vr(1073742336,Op,Op,[]),vr(1073742336,Mp,Mp,[]),vr(1073742336,ea,ea,[]),vr(256,Vt,!0,[])])});Zi.production&&function(){if(nt)throw new Error("Cannot enable prod mode after platform setup.");tt=!1}(),Pl().bootstrapModuleFactory(Rf).catch(e=>console.error(e))},zn8P:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);